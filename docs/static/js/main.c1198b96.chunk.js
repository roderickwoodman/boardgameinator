(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t){e.exports="data:image/png;base64,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"},41:function(e,t){e.exports="data:image/png;base64,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"},49:function(e,t,a){e.exports=a(65)},54:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),i=a.n(l),s=a(42),o=a(19),c=(a(54),a(7)),u=a.n(c),m=a(12),h=a(9),d=a(33),p=a(34),g=a(45),b=a(35),v=a(10),f=a(46),y=a(4),E=a(36),w=a.n(E),O=a(16),N=a(13),S=a(14),k=(a(31),a(5)),A=a(3),_=function(e){var t=Object(n.useState)(!1),a=Object(y.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(!1),o=Object(y.a)(s,2),c=o[0],u=o[1],m=Object(n.useState)(!1),h=Object(y.a)(m,2),d=h[0],p=h[1],g=Object(n.useState)(""),b=Object(y.a)(g,2),v=b[0],f=b[1],E=Object(n.useState)(null),w=Object(y.a)(E,2),_=w[0],P=w[1],I=Object(n.useState)(""),j=Object(y.a)(I,2),C=j[0],T=j[1],x=Object(n.useRef)(null);Object(n.useEffect)(function(){d&&x.current.focus()});var J=function(){i(!1)},G=function(){u(!1)},L=function(){p(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"view-controls"},r.a.createElement("button",{className:null===e.user?"fa fa-button user loggedout":"fa fa-button user",onClick:function(t){null===e.user?(i(!1),u(!1),p(!0)):(f(""),e.onuserchange(null))}},null===e.user?r.a.createElement("span",null,r.a.createElement(k.a,{icon:A.l})):r.a.createElement("span",null,e.user," ",r.a.createElement(k.a,{icon:A.j}))),r.a.createElement(O.a,{size:"md",show:d,onHide:L},r.a.createElement(N.a,null,r.a.createElement("h4",null,"Enter a username for yourself:"),r.a.createElement("section",{id:"input-username"},r.a.createElement("section",{className:"buttonrow"},r.a.createElement("input",{ref:x,size:"30",value:v,onChange:function(e){e.preventDefault();var t=e.target.value;f(t);var a=t.replace(/[^A-Za-z.-]/g," "),n=null;t.match(/[ ]{2}/g)?T("ERROR: repeated spaces are not allowed"):t.length<3&&t.length>0?T("ERROR: username must be at least 3 characters"):a!==t?T("ERROR: invalid characters were detected"):t.length>16?T("ERROR: username cannot be more than 16 characters"):0!==t.length&&(T(""),n=t.trim()),P(n)},placeholder:"(your username)",required:!0}),r.a.createElement("button",{onClick:function(t){null!==_&&e.onuserchange(v)},className:"default-primary-styles"},"OK")),r.a.createElement("p",{className:"error"},C))),r.a.createElement(S.a,null,r.a.createElement("button",{className:"default-primary-styles",onClick:L},"Close"))),r.a.createElement("button",{className:"fa fa-button",onClick:function(){u(!1),p(!1),i(!0)}},r.a.createElement(k.a,{icon:A.g})),r.a.createElement(O.a,{size:"md",show:l,onHide:J},r.a.createElement(N.a,null,r.a.createElement("div",{id:"gamesorting-controls"},r.a.createElement("h4",null,"Order the board games by the..."),r.a.createElement("button",{className:"default-secondary-styles ".concat("alphabetical"===e.sortby?"active-button":""),onClick:function(t){return e.onsortchange(t,"alphabetical")}},"alphabetical order"),r.a.createElement("button",{className:"default-secondary-styles ".concat("maxtitlevotes"===e.sortby?"active-button":""),onClick:function(t){return e.onsortchange(t,"maxtitlevotes")}},"most title votes"),r.a.createElement("button",{className:"default-secondary-styles ".concat("maxattrvotes"===e.sortby?"active-button":""),onClick:function(t){return e.onsortchange(t,"maxattrvotes")}},"most attribute votes"),r.a.createElement("button",{className:"default-secondary-styles ".concat("minplaytime"===e.sortby?"active-button":""),onClick:function(t){return e.onsortchange(t,"minplaytime")}},"shortest playtime"),r.a.createElement("button",{className:"default-secondary-styles ".concat("maxplayers"===e.sortby?"active-button":""),onClick:function(t){return e.onsortchange(t,"maxplayers")}},"most players"))),r.a.createElement(S.a,null,r.a.createElement("button",{className:"default-primary-styles",onClick:J},"Close"))),r.a.createElement("button",{className:"fa fa-button",onClick:function(){i(!1),p(!1),u(!0)}},r.a.createElement(k.a,{icon:A.d})),r.a.createElement(O.a,{size:"md",show:c,onHide:G},r.a.createElement(N.a,null,r.a.createElement("div",{id:"gamefiltering-controls"},"local"!==e.activepoll.id&&r.a.createElement("p",{className:"warning"},"INFO: Filtering is disabled while a poll is selected."),r.a.createElement("h4",null,"Show me only the board games matching an..."),r.a.createElement("button",{className:"default-secondary-styles ".concat(e.filtertitles?"active-button":""),onClick:function(t){return e.onfilterchange(t,"titles")}},"upvoted title"),r.a.createElement("button",{className:"default-secondary-styles ".concat(e.filterplayercount?"active-button":""),onClick:function(t){return e.onfilterchange(t,"playercount")}},"upvoted player count"),r.a.createElement("button",{className:"default-secondary-styles ".concat(e.filterweight?"active-button":""),onClick:function(t){return e.onfilterchange(t,"weight")}},"upvoted weight"))),r.a.createElement(S.a,null,r.a.createElement("button",{className:"default-primary-styles",onClick:G},"Close")))))},P=a(25),I=[{id:1610263515e3,updatedAt:1610263515e3,closesAt:16193016e5,name:"Fake Poll A, VOTING DISABLED",pollThumbs:{titles:{175914:{thumbsup:[{user:"Fran",rank:1},{user:"Filipe",rank:1},{user:"Fiona",rank:1},{user:"Mendy",rank:1}]},266192:{thumbsup:[{user:"Wesley",rank:1},{user:"Will",rank:1}]},31481:{thumbsup:[{user:"Gary",rank:1}]},199478:{thumbsup:[{user:"Fred",rank:1}]},169786:{thumbsup:[{user:"Sue",rank:1}]},9209:{thumbsup:[{user:"Tina",rank:1},{user:"Timothy",rank:1}]}},winners:[],total_title_votes:11}},{id:160845612e4,updatedAt:160845612e4,closesAt:1610263498e3,name:"Fake Poll B, VOTING DISABLED",pollThumbs:{titles:{126163:{thumbsup:[{user:"Terry",rank:1},{user:"Tina",rank:1},{user:"Mendy",rank:1}]},266192:{thumbsup:[{user:"Wendy",rank:1},{user:"Wally",rank:1},{user:"Mendy",rank:1}]},28023:{thumbsup:[{user:"Jerry",rank:1}]},218603:{thumbsup:[{user:"Patty",rank:1}]},237182:{thumbsup:[{user:"Randy",rank:1},{user:"Mendy",rank:2}]}},winners:[126163,266192],total_title_votes:10}},{id:1610263992e3,updatedAt:1610263992e3,closesAt:1612941797e3,name:"Fake Poll C, VOTING DISABLED",pollThumbs:{titles:{298065:{thumbsup:[{user:"Santa",rank:1},{user:"Mendy",rank:1}]},73761:{thumbsup:[{user:"Santa",rank:2},{user:"Mendy",rank:1},{user:"Keith",rank:1},{user:"Karl",rank:1}]},141791:{thumbsup:[]},169786:{thumbsup:[{user:"Santa",rank:3}]},162886:{thumbsup:[{user:"Sue",rank:1}]}},winners:[],total_title_votes:8}}],j=function(e){var t=Object(n.useState)(e.activepoll.id.toString()),a=Object(y.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(!1),o=Object(y.a)(s,2),c=o[0],u=o[1],m=function(t){if(!c)if(i(t.target.value),"local"===t.target.value){e.onviewpoll({id:"local",name:"local"})}else{u(!0);var a=J(parseInt(t.target.value));e.onviewpoll(a),u(!1)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Select a group poll"),r.a.createElement("h6",{className:"warning"},"(UNDER CONSTRUCTION)"),r.a.createElement("div",{id:"import-poll"},r.a.createElement("label",{htmlFor:"poll-local"},r.a.createElement("input",{type:"radio",id:"poll-local",name:"gamelist",value:"local",checked:"local"===l,onChange:m}),"\xa0No poll"),I.map(function(e,t){var a=Object.keys(e.pollThumbs.titles).length+" "+(1===Object.keys(e.pollThumbs.titles).length?"game":"games"),n=e.pollThumbs.total_title_votes+" "+(1===e.pollThumbs.total_title_votes?"vote":"votes");return r.a.createElement("label",{key:t,htmlFor:"poll-"+t},r.a.createElement("input",{type:"radio",id:"poll-"+t,name:"gamelist",value:e.id,checked:l===e.id.toString(),onChange:m}),"\xa0",e.name," (",a,", ",n,")\xa0",c&&l===e.id.toString()&&r.a.createElement(P.a,{animation:"border",size:"sm"}))})))};function C(e){var t="https://boardgamegeek.com/xmlapi2/search?type=boardgame&query="+e.replaceAll(" ","+").replaceAll(":","+");return fetch(t).then(function(e){return e.text()}).then(function(e){return x(e)})}function T(e){return fetch("https://boardgamegeek.com/xmlapi2/thing?type=boardgame&stats=1&ratingcomments=1&videos=1&id="+e).then(function(e){return e.text()}).then(function(e){return function(e){var t={attributes:{categories:[],mechanics:[]}},a=(new DOMParser).parseFromString(e,"application/xml").getElementsByTagName("item");a.length&&(t.id=parseInt(a[0].id),a[0].childNodes.forEach(function(e){e.nodeType===Node.ELEMENT_NODE&&("name"===e.tagName&&"primary"===e.getAttribute("type")&&(t.name=e.getAttribute("value")),"thumbnail"===e.tagName&&(t.thumbnail=e.innerHTML),"description"===e.tagName&&(t.description=e.innerHTML.replace(/&amp;/g,"&").replace(/&rsquo;/g,"'").replace(/&quot;/g,'"').replace(/&ldquo;/g,"\u201c").replace(/&rdquo;/g,"\u201d").replace(/&ndash;/g,"\u2013").replace(/&mdash;/g,"\u2013").replace(/&bull;/g,"\u2219").replace(/&nbsp;/g," ").split("&#10;")),"yearpublished"===e.tagName&&(t.year_published=parseInt(e.getAttribute("value"))),"minplayers"===e.tagName&&(t.attributes.min_players=parseInt(e.getAttribute("value"))),"maxplayers"===e.tagName&&(t.attributes.max_players=parseInt(e.getAttribute("value"))),"minplaytime"===e.tagName&&(t.attributes.min_playtime=parseInt(e.getAttribute("value"))),"maxplaytime"===e.tagName&&(t.attributes.max_playtime=parseInt(e.getAttribute("value"))),"link"===e.tagName&&"boardgamecategory"===e.getAttribute("type")&&t.attributes.categories.push(e.getAttribute("value")),"link"===e.tagName&&"boardgamemechanic"===e.getAttribute("type")&&t.attributes.mechanics.push(e.getAttribute("value")),"statistics"===e.tagName&&e.childNodes.forEach(function(e){"ratings"===e.tagName&&e.childNodes.forEach(function(e){if("numweights"===e.tagName&&(t.num_weights=e.getAttribute("value")),"averageweight"===e.tagName){t.attributes.average_weight=e.getAttribute("value");var a=parseFloat(t.attributes.average_weight),n=null;n=a<1.5?"light":a<2.5?"medium light":a<3.5?"medium":a<4.5?"medium heavy":"heavy",t.attributes.average_weight_name=n}})}),"comments"===e.tagName&&e.childNodes.forEach(function(e){if("comment"===e.tagName){var a=e.getAttribute("value");if(a.length>30&&a.length<800){var n=e.getAttribute("username"),r={comment:a,author:n};t.hasOwnProperty("comments")?t.comments.push(r):t.comments=[r]}}}),"videos"===e.tagName&&e.childNodes.forEach(function(e){if("video"===e.tagName&&"English"===e.getAttribute("language")&&"review"===e.getAttribute("category")){var a=e.getAttribute("title"),n=e.getAttribute("link"),r=e.getAttribute("username"),l={title:a,link:n,author:r};t.hasOwnProperty("videos")?t.videos.push(l):t.videos=[l]}}))}));!Object.keys(t)||t.hasOwnProperty("year_published")&&0!==t.year_published||(t.year_published=null);return t}(e)})}function x(e){var t=[],a=(new DOMParser).parseFromString(e,"application/xml").getElementsByTagName("item"),n=!0,r=!1,l=void 0;try{for(var i,s=function(){var e=i.value,a={};a.id=parseInt(e.id),e.childNodes.forEach(function(e){e.nodeType===Node.ELEMENT_NODE&&("name"===e.tagName&&"primary"===e.getAttribute("type")&&(a.name=e.getAttribute("value")),"yearpublished"===e.tagName&&(a.year_published=parseInt(e.getAttribute("value"))))}),"name"in a&&t.push(a),"year_published"in a||(a.year_published=null)},o=a[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)s()}catch(c){r=!0,l=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return t}function J(e){return console.log("FIXME (WIP): implement the fetching of poll #".concat(e,".")),I.filter(function(t){return t.id===e})[0]}function G(e,t,a,n){return console.log('FIXME (WIP): implement a "'.concat(a,'" vote by ').concat(n," in poll #").concat(e," for game #").concat(t,".")),{}}function L(e,t){return console.log("FIXME (WIP): implement clearing all title votes by ".concat(t," in poll #").concat(e,".")),{}}function R(e,t,a){return console.log("FIXME (WIP): implement deleting game #".concat(t," in poll #").concat(e," by user ").concat(a,".")),{}}var F=function(e){return"string"===typeof e&&e.length?e.replace(/(( +)\(([-#]?)\d{1,6}\))$/,""):e},W=function(e){if("string"===typeof e&&e.length){var t=e.match(/(( +)\((-?)\d{1,4}\))$/);if(null!==t)return t[0].replace(/[^0-9-]/g,"");var a=e.match(/(( +)\(#\d{1,6}\))$/);return null!==a?a[0].replace(/[^#0-9-]/g,""):null}},V=function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(e){return C(F(e))}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(e){return T(e)}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n,r,l,i,s,o,c,m,d,p,g,b,v;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={does_not_exist:[],already_active:[],games_byid_not_in_cache:{},games_byid_dict:{},games_withdisambig_not_in_cache:{},ambiguous_cached_games:{},ambiguous_new_gamedata:{},new_gamedata_to_activate:[],new_gamedata_to_cache:[],cached_games_to_activate:[]},r=[],l=[],i=[],s=Object.entries(t).map(function(e){return parseInt(e[1].id)}),o=[],c=[],a.forEach(function(e){if(isNaN(Number(e)))c.push(e);else if(s.includes(parseInt(e))){var a=Object.entries(t).filter(function(t){return t[1].id===parseInt(e)})[0][1];n.games_byid_dict[a.unambiguous_name]=a.id,a.active?n.already_active.push(a.unambiguous_name):n.cached_games_to_activate.push(a.unambiguous_name)}else o.push(e)}),m=[],e.next=10,B(o);case 10:return e.sent.forEach(function(e,t){if(e.hasOwnProperty("name")){var a=parseInt(e.id);n.games_byid_not_in_cache[e.name]=a,m.push(e.name)}else{var r=o[t];n.does_not_exist.push(r)}}),c=[].concat(Object(h.a)(c),m),d={},Object.entries(t).filter(function(e){return e[0]!==e[1].name}).forEach(function(e){var t=F(e[0]),a=JSON.parse(JSON.stringify(e[1]));d.hasOwnProperty(t)?d[t].push(a):d[t]=[a]}),p=Object.keys(t),c.forEach(function(e){if(p.includes(e))t[e].active?n.already_active.push(e):n.cached_games_to_activate.push(e);else if(p.includes(F(e)))t[F(e)].active?n.already_active.push(F(e)):n.cached_games_to_activate.push(F(e));else if(Object.keys(d).includes(F(e))){var a=JSON.parse(JSON.stringify(d[F(e)]));n.ambiguous_cached_games[F(e)]=a}else F(e)!==e&&(n.games_withdisambig_not_in_cache[F(e)]=parseInt(W(e))),r.push(F(e))}),Object.entries(n.ambiguous_cached_games).forEach(function(e){n.ambiguous_cached_games[e[0]]=e[1].sort(function(e,t){return e.year_published<t.year_published?-1:1})}),e.next=21,V(r);case 21:return(g=e.sent).forEach(function(e,t){var a=[];e.forEach(function(e){var n;e.name.toLowerCase()===r[t].toLowerCase()&&(n=JSON.parse(JSON.stringify(e)),a.push(n))}),g[t]=a}),r.forEach(function(e,t){g[t].length>0?g[t].forEach(function(e){var a=parseInt(e.id);1===g[t].length?l.push(a):i.push(a)}):n.does_not_exist.push(e)}),b=[].concat(l,i),e.next=27,D(b);case 27:return(v=e.sent).forEach(function(e){var t=JSON.parse(JSON.stringify(e));if(l.includes(e.id))t.unambiguous_name=e.name,n.new_gamedata_to_activate[e.name]=t;else if(i.includes(e.id)){var a="".concat(e.name," (").concat(e.year_published,")");if(t.unambiguous_name=a,n.games_byid_not_in_cache.hasOwnProperty(e.name))n.games_byid_not_in_cache[e.name]===e.id?(n.games_byid_dict[a]=e.id,n.new_gamedata_to_activate.push(t)):n.new_gamedata_to_cache.push(t);else if(n.games_withdisambig_not_in_cache.hasOwnProperty(e.name)){var r=n.games_withdisambig_not_in_cache[e.name];if(1===v.filter(function(e){return e.year_published===r}).length)n.games_withdisambig_not_in_cache[e.name]===e.year_published?n.new_gamedata_to_activate.push(t):n.new_gamedata_to_cache.push(t);else if(n.ambiguous_new_gamedata.hasOwnProperty(e.name))n.ambiguous_new_gamedata[e.name].push(t);else{var s=[];s.push(t),n.ambiguous_new_gamedata[e.name]=s}}else if(n.ambiguous_new_gamedata.hasOwnProperty(e.name))n.ambiguous_new_gamedata[e.name].push(t);else{var o=[];o.push(t),n.ambiguous_new_gamedata[e.name]=o}}}),Object.entries(n.ambiguous_new_gamedata).forEach(function(e){n.ambiguous_new_gamedata[e[0]]=e[1].sort(function(e,t){return e.year_published<t.year_published?-1:1})}),e.abrupt("return",n);case 31:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),z=function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n,r,l,i,s,o,c,m,d,p,g,b,v,f,y,E,w,O,N,S,k,A,_,P,I,j,C,T,x,J,G,L,R,F,W,V,D,B,z,U;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){if(Object.entries(t).map(function(e){return parseInt(e[1].id)}).includes(parseInt(e))){var a=Object.values(t).filter(function(t){return t.id===parseInt(e)})[0].unambiguous_name;return"[#".concat(e,"] ").concat(a)}return e},r={},l=!1,e.next=4,Y(t,a);case 4:for((i=e.sent).selected_games_to_activate=[],i.ambiguous_title_count=Object.keys(i.ambiguous_cached_games).length+Object.keys(i.ambiguous_new_gamedata).length,s=[],Object.entries(i.ambiguous_cached_games).forEach(function(e){var t=JSON.parse(JSON.stringify(e[1]));s.push({message_str:'Which version of "'.concat(e[0],'"? '),ambiguous:t,error_flag:!1}),l=!0}),Object.entries(i.ambiguous_new_gamedata).forEach(function(e){if(i.games_byid_not_in_cache.hasOwnProperty(e[0]))i.games_byid_not_in_cache[e[0]]===e[1].id&&i.selected_games_to_activate.push(e[1].unambiguous_name);else{var t=JSON.parse(JSON.stringify(e[1]));s.push({message_str:'Which version of "'.concat(e[0],'"? '),ambiguous:t,error_flag:!1}),l=!0}}),i.routed_games_treatment="none",r.gameValidations=i,o="",c=0,m=[],d=!0,p=!1,g=void 0,e.prev=17,b=i.already_active[Symbol.iterator]();!(d=(v=b.next()).done);d=!0)f=v.value,c+=1,o=i.games_byid_dict.hasOwnProperty(f)?"[#".concat(i.games_byid_dict[f],"] "):"",m.push(o+f),l=!0;e.next=25;break;case 21:e.prev=21,e.t0=e.catch(17),p=!0,g=e.t0;case 25:e.prev=25,e.prev=26,d||null==b.return||b.return();case 28:if(e.prev=28,!p){e.next=31;break}throw g;case 31:return e.finish(28);case 32:return e.finish(25);case 33:for(c>0&&(1===c?(E=Object(h.a)(m),m=[],y="is already active"):(E=[],y="".concat(c," titles are already active")),s.push({error_flag:!0,message_str:y,prepend_titles:E,append_titles:m}),l=!0),w=0,O=[],N=!0,S=!1,k=void 0,e.prev=38,A=i.does_not_exist[Symbol.iterator]();!(N=(_=A.next()).done);N=!0)P=_.value,w+=1,O.push(P),l=!0;e.next=46;break;case 42:e.prev=42,e.t1=e.catch(38),S=!0,k=e.t1;case 46:e.prev=46,e.prev=47,N||null==A.return||A.return();case 49:if(e.prev=49,!S){e.next=52;break}throw k;case 52:return e.finish(49);case 53:return e.finish(46);case 54:for(w>0&&(1===w?(j=Object(h.a)(O),O=[],I="does not exist"):(j=[],I="".concat(w," titles do not exist")),s.push({error_flag:!0,message_str:I,prepend_titles:j,append_titles:O})),C=0,T=[],x=!0,J=!1,G=void 0,e.prev=59,L=i.cached_games_to_activate[Symbol.iterator]();!(x=(R=L.next()).done);x=!0)F=R.value,C+=1,o=i.games_byid_not_in_cache.hasOwnProperty(F)?"[#".concat(i.games_byid_not_in_cache[F],"] "):"",T.push(o+n(F));e.next=67;break;case 63:e.prev=63,e.t2=e.catch(59),J=!0,G=e.t2;case 67:e.prev=67,e.prev=68,x||null==L.return||L.return();case 70:if(e.prev=70,!J){e.next=73;break}throw G;case 73:return e.finish(70);case 74:return e.finish(67);case 75:for(W=0,V=Object.keys(i.new_gamedata_to_activate);W<V.length;W++)D=V[W],C+=1,o=i.games_byid_not_in_cache.hasOwnProperty(D)?"[#".concat(i.games_byid_not_in_cache[D],"] "):"",T.push(o+n(D));return C>0&&(U=Object.keys(i.ambiguous_cached_games).length>0||Object.keys(i.ambiguous_new_gamedata).length>0||i.does_not_exist.length>0||i.already_active.length>0?" other":"",1===C?(z=Object(h.a)(T),T=[],B="Adding"):(z=[],B="Adding ".concat(C).concat(U," titles")),s.push({error_flag:!1,message_str:B,prepend_titles:z,append_titles:T})),r.messages=s,r.keep_modal_open=l,e.abrupt("return",r);case 80:case"end":return e.stop()}},e,null,[[17,21,25,33],[26,,28,32],[38,42,46,54],[47,,49,53],[59,63,67,75],[68,,70,74]])}));return function(t,a){return e.apply(this,arguments)}}(),U=function(e){return"string"===typeof e&&e.length?e.replace(/(( +)\(([-#]?)\d{1,6}\))$/,""):e},H=function(e,t){if(0!==e.ambiguous_title_count){var a=e.selected_games_to_activate.map(function(e){return U(e)}),n=[],r=[];Object.entries(e.ambiguous_new_gamedata).forEach(function(t){t[1].forEach(function(l){var i=JSON.parse(JSON.stringify(l));a.includes(l.name)&&(e.selected_games_to_activate.includes(l.unambiguous_name)?n.push(i):r.push(i),delete e.ambiguous_new_gamedata[t[0]],e.selected_games_to_activate=e.selected_games_to_activate.filter(function(e){return e.name!==t[0]}))})}),e.new_gamedata_to_activate=n,e.new_gamedata_to_cache=r,Object.entries(e.ambiguous_cached_games).forEach(function(t){t[1].forEach(function(a){e.selected_games_to_activate.includes(a.unambiguous_name)&&(e.cached_games_to_activate.push(a.unambiguous_name),delete e.ambiguous_cached_games[t[0]])})}),e.ambiguous_title_count-=a.length,e.selected_games_to_activate=[],t(e)}else t(e)},M=function(e){var t=Object(n.useState)(""),a=Object(y.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)([]),o=Object(y.a)(s,2),c=o[0],d=o[1],p=Object(n.useState)({}),g=Object(y.a)(p,2),b=g[0],v=g[1],f=Object(n.useState)([]),E=Object(y.a)(f,2),w=E[0],O=E[1],N=Object(n.useState)(!1),S=Object(y.a)(N,2),_=S[0],I=S[1],j=Object(n.useRef)(null);Object(n.useEffect)(function(){function t(){return(t=Object(m.a)(u.a.mark(function t(){var a,n,r,l;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.routedgames.hasOwnProperty("pollid")||null===e.routedgames.pollid){t.next=5;break}a=J(e.routedgames.pollid),e.onviewpoll(a),t.next=21;break;case 5:if(n=[],r="none",e.routedgames.hasOwnProperty("new_list")&&e.routedgames.new_list.length>0?(n=Object(h.a)(e.routedgames.new_list),r="replace"):e.routedgames.hasOwnProperty("addto_list")&&e.routedgames.addto_list.length>0&&(n=Object(h.a)(e.routedgames.addto_list),r="append"),!(n.length>0)){t.next=21;break}return I(!0),t.next=11,z(e.cachedgametitles,n);case 11:if((l=t.sent).gameValidations.routed_games_treatment=r,v(l.gameValidations),C(l.messages),l.keep_modal_open){t.next=20;break}return H(l.gameValidations,e.updategamevalidations),t.abrupt("return",null);case 20:I(!1);case 21:case"end":return t.stop()}},t)}))).apply(this,arguments)}null!==j.current&&j.current.focus(),function(){t.apply(this,arguments)}()},[e]);var C=function(e){var t=Object(h.a)(e);d(t)},T=function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),G("148228, 199478, 172081, 175914, 126163, 178900, 251678, 6830, 93, 73439, 132531, 194655");case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),G(l);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),G=function(){var t=Object(m.a)(u.a.mark(function t(a){var n,r,l,i;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.split(/\r\n|\r|\n/).filter(function(e){return""!==e}).length,n=r>1?"\n":",",l=a.split(n).map(function(e){return e.trim()}).map(function(e){return e.replace(/[^0-9a-zA-Z:.()&!\u2013#' ]/g,"")}).filter(function(e){return e}),I(!0),t.next=6,z(e.cachedgametitles,Array.from(new Set(l)));case 6:if(i=t.sent,v(i.gameValidations),C(i.messages),i.keep_modal_open){t.next=14;break}return H(i.gameValidations,e.updategamevalidations),t.abrupt("return",null);case 14:I(!0);case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),L=function(e){return e.hasOwnProperty("prepend_titles")&&e.prepend_titles.length?e.prepend_titles.map(function(e,t){return 0===t?r.a.createElement("span",{key:t,className:"title"},e):r.a.createElement("span",null,", ",r.a.createElement("span",{key:t,className:"title"},e))}):null},R=function(e){return e.hasOwnProperty("append_titles")&&e.append_titles.length?e.append_titles.map(function(e,t){return 0===t?r.a.createElement("span",{key:t}," - ",r.a.createElement("span",{className:"title"},e)):r.a.createElement("span",{key:t},", ",r.a.createElement("span",{className:"title"},e))}):null},F=function(e){if(e.hasOwnProperty("ambiguous")){var t={};return e.ambiguous.forEach(function(e){var a="default-secondary-styles";w.includes(e.unambiguous_name)&&(a+=" active-button"),t[e.unambiguous_name]=a}),e.ambiguous.map(function(e){return r.a.createElement("button",{key:e.id,className:t[e.unambiguous_name],onClick:function(t){return function(e){var t=U(e),a=Object(h.a)(w);(a=a.filter(function(e){return U(e)!==t})).push(e),O(a);var n=JSON.parse(JSON.stringify(b));n.selected_games_to_activate=JSON.parse(JSON.stringify(a)),v(n)}(e.unambiguous_name)}},e.year_published)})}return null},W=b.hasOwnProperty("ambiguous_title_count")&&b.ambiguous_title_count>0||b.hasOwnProperty("cached_games_to_activate")&&b.cached_games_to_activate.length>0||b.hasOwnProperty("new_gamedata_to_activate")&&Object.keys(b.new_gamedata_to_activate).length>0,V=Object.values(e.cachedgametitles).filter(function(e){return e.active}).length;return"local"!==e.activepoll.id?r.a.createElement("div",{id:"input-section"},r.a.createElement("p",{className:"warning"},'INFO: Adding of games is disabled while a poll is selected. Use "Import Poll" button to deselect it.')):r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Add board game by title:"),r.a.createElement("div",{id:"input-section"},r.a.createElement("section",{id:"input-by-title"},r.a.createElement("section",{className:"buttonrow"},r.a.createElement("input",{ref:j,size:"30",value:l,onChange:function(e){e.preventDefault(),i(e.target.value)},placeholder:"(exact game titles or BGG IDs)",required:!0}),r.a.createElement("button",{onClick:x,className:"default-primary-styles"},"Add"),_&&!c.length&&r.a.createElement(P.a,{animation:"border",size:"sm"})),c.length||V?null:r.a.createElement("div",null,r.a.createElement("section",null,"OR"),r.a.createElement("section",{className:"buttonrow"},r.a.createElement("button",{onClick:T,className:"default-primary-styles"},"Show me some games!"))),r.a.createElement("div",{className:"status-messages"},c.map(function(e,t){return e.hasOwnProperty("error_flag")&&e.error_flag?r.a.createElement("p",{key:t,className:"message error"},"ERROR: ",L(e)," ",e.message_str,R(e)," ",F(e)):r.a.createElement("p",{key:t,className:"message"},r.a.createElement(k.a,{icon:A.f})," ",L(e)," ",e.message_str,R(e)," ",F(e))}))),W&&r.a.createElement("button",{className:"default-primary-styles",onClick:function(){return H(b,e.updategamevalidations),null}},"Apply")))},Z=function(e){var t;t="title"===e.votingtype?e.preferences.hasOwnProperty(e.votingon)&&e.preferences[e.votingon].hasOwnProperty("thumbsup")&&e.preferences[e.votingon].thumbsup.filter(function(t){return t.user===e.user}).length?"thumbsup":"novote":e.preferences.hasOwnProperty(e.votingon)&&e.preferences[e.votingon].hasOwnProperty("thumbsup")&&e.preferences[e.votingon].thumbsup.includes(e.user)?"thumbsup":"novote";var a="voteable";a+=" ".concat(t);var n=e.votingonlabel;return(e.attrcount>1||!e.suppresslowcounts)&&(n+=" (".concat(e.attrcount,")")),"category"!==e.votingtype&&"mechanic"!==e.votingtype||(n=n.toLowerCase()),r.a.createElement("li",{key:e.votingon,className:a},r.a.createElement("div",{className:"vote"},"thumbsup"===t&&r.a.createElement(k.a,{icon:A.h})),r.a.createElement("div",{className:"clickable","data-votingtype":e.votingtype,"data-votingon":e.votingon,"data-newvote":"thumbsup",onClick:e.onnewvote},n))},X=function(e){var t=JSON.parse(JSON.stringify(e.counts)),a=JSON.parse(JSON.stringify(e.counts));return e.alphabetize&&(a=t.sort(function(e,t){return e.attrCount<t.attrCount?1:e.attrCount>t.attrCount?-1:e.attrName<t.attrName?-1:e.attrName>t.attrName?1:0})),r.a.createElement("ul",{id:e.elementid},r.a.createElement("li",null,r.a.createElement("b",null,e.title)),a.map(function(t,a){return r.a.createElement(Z,{key:t.attrName,user:e.user,preferences:e.sectionthumbs,votingtype:e.type,votingon:t.attrId,votingonlabel:t.attrName,attrcount:t.attrCount,suppresslowcounts:e.suppresslowcounts,onnewvote:e.onnewvote})}))},K=a(67),q=a(66),Q=function(e){var t=Object(n.useState)("players"),a=Object(y.a)(t,2),l=a[0],i=a[1],s=function(e){var t=e.target.id.replace(/select-/g,"");i(t)},o={playercounts:function(e){var t={},a=!0,n=!1,r=void 0;try{for(var l,i=e.activegamedata[Symbol.iterator]();!(a=(l=i.next()).done);a=!0)for(var s=l.value,o=s.attributes.min_players;o<=s.attributes.max_players;o++)if(o<=10){var c=10===o?"10P+":o+"P";t.hasOwnProperty(c)?t[c]=t[c]+1:t[c]=1}}catch(m){n=!0,r=m}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}var u=[];return Object.keys(t).forEach(function(e){var a={attrId:e,attrName:e,attrCount:t[e]};u.push(a)}),u.sort(function(e,t){return parseInt(e.attrName.slice(0,-1))<parseInt(t.attrName.slice(0,-1))?1:-1}),u}(e),weightcounts:function(e){var t={},a=!0,n=!1,r=void 0;try{for(var l,i=e.activegamedata[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value;t.hasOwnProperty(s.attributes.average_weight_name)?t[s.attributes.average_weight_name]=t[s.attributes.average_weight_name]+1:t[s.attributes.average_weight_name]=1}}catch(h){n=!0,r=h}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}for(var o=[],c=0,u=["light","medium light","medium","medium heavy","heavy"];c<u.length;c++){var m=u[c];t.hasOwnProperty(m)?o.push({attrId:m,attrName:m,attrCount:t[m]}):o.push({attrId:m,attrName:m,attrCount:0})}return o}(e),categorycounts:function(e){var t={},a=!0,n=!1,r=void 0;try{for(var l,i=e.activegamedata[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value,o=!0,c=!1,u=void 0;try{for(var m,h=s.attributes.categories[Symbol.iterator]();!(o=(m=h.next()).done);o=!0){var d=m.value;t.hasOwnProperty(d)?t[d]=t[d]+1:t[d]=1}}catch(g){c=!0,u=g}finally{try{o||null==h.return||h.return()}finally{if(c)throw u}}}}catch(g){n=!0,r=g}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}var p=[];return Object.keys(t).forEach(function(e){p.push({attrId:e,attrName:e,attrCount:t[e]})}),p.sort(function(e,t){return e.attrCount<t.attrCount?1:e.attrCount===t.attrCount&&e.attrName>t.attrName?1:-1}),p}(e),mechaniccounts:function(e){var t={},a=!0,n=!1,r=void 0;try{for(var l,i=e.activegamedata[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var s=l.value,o=!0,c=!1,u=void 0;try{for(var m,h=s.attributes.mechanics[Symbol.iterator]();!(o=(m=h.next()).done);o=!0){var d=m.value;t.hasOwnProperty(d)?t[d]=t[d]+1:t[d]=1}}catch(g){c=!0,u=g}finally{try{o||null==h.return||h.return()}finally{if(c)throw u}}}}catch(g){n=!0,r=g}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}var p=[];return Object.keys(t).forEach(function(e){p.push({attrId:e,attrName:e,attrCount:t[e]})}),p.sort(function(e,t){return e.attrCount<t.attrCount?1:e.attrCount===t.attrCount&&e.attrName>t.attrName?1:-1}),p}(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Upvote board game attributes:"),r.a.createElement("ul",{id:"votingsection-selector"},r.a.createElement("li",{id:"select-players",className:"segmentedcontrol lightbg"+("players"==={votingOn:l}?" selected":""),onClick:s},"Players"),r.a.createElement("li",{id:"select-weights",className:"segmentedcontrol lightbg"+("weights"==={votingOn:l}?" selected":""),onClick:s},"Weights"),r.a.createElement("li",{id:"select-categories",className:"segmentedcontrol lightbg"+("categories"==={votingOn:l}?" selected":""),onClick:s},"Categories"),r.a.createElement("li",{id:"select-mechanics",className:"segmentedcontrol lightbg"+("mechanics"==={votingOn:l}?" selected":""),onClick:s},"Mechanics")),r.a.createElement("div",{id:"voting-section"},r.a.createElement(K.a,null,"players"===l&&r.a.createElement(q.a,{key:0,in:!0,appear:!1,timeout:2e3,classNames:"showsegment"},r.a.createElement(X,{user:e.user,type:"players",elementid:"supported-players",title:"PLAYERS:",counts:o.playercounts,sectionthumbs:e.attrthumbs.players,onnewvote:e.onnewvote,alphabetize:!1,suppresslowcounts:!1})),"weights"===l&&r.a.createElement(q.a,{key:1,in:!0,appear:!1,timeout:2e3,classNames:"showsegment"},r.a.createElement(X,{user:e.user,type:"weight",elementid:"weight-counts",title:"WEIGHT:",counts:o.weightcounts,sectionthumbs:e.attrthumbs.weight,onnewvote:e.onnewvote,alphabetize:!1,suppresslowcounts:!1})),"categories"===l&&r.a.createElement(q.a,{key:2,in:!0,appear:!1,timeout:2e3,classNames:"showsegment"},r.a.createElement(X,{user:e.user,type:"category",elementid:"category-counts",title:"CATEGORY:",counts:o.categorycounts,sectionthumbs:e.attrthumbs.category,onnewvote:e.onnewvote,alphabetize:!0,suppresslowcounts:!0})),"mechanics"===l&&r.a.createElement(q.a,{key:3,in:!0,appear:!1,timeout:2e3,classNames:"showsegment"},r.a.createElement(X,{user:e.user,type:"mechanic",elementid:"mechanic-counts",title:"MECHANIC:",counts:o.mechaniccounts,sectionthumbs:e.attrthumbs.mechanic,onnewvote:e.onnewvote,alphabetize:!0,suppresslowcounts:!0}))),0===o.playercounts.length&&0===o.weightcounts.length&&0===o.categorycounts.length&&0===o.mechaniccounts.length&&r.a.createElement("span",{className:"message warning"},r.a.createElement("p",null,"No board games to compare yet"),r.a.createElement("p",null,'Please add game titles by clicking on "Add Games".'))))},$=function(e){var t=[];return e.activegamedata.forEach(function(e){t.push({attrId:e.id,attrName:e.unambiguous_name,attrCount:1})}),r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Upvote board game titles:"),r.a.createElement(X,{user:e.user,type:"title",elementid:"game-titles",title:"TITLES ("+t.length+"):",counts:t,sectionthumbs:e.titlethumbs,onnewvote:e.onnewvote,alphabetize:!0,suppresslowcounts:!0}))},ee=function(e){var t=Object(n.useState)(!1),a=Object(y.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(!1),o=Object(y.a)(s,2),c=o[0],u=o[1],m=Object(n.useState)(!1),h=Object(y.a)(m,2),d=h[0],p=h[1],g=Object(n.useState)(!1),b=Object(y.a)(g,2),v=b[0],f=b[1],E=Object(n.useState)(!1),w=Object(y.a)(E,2),_=w[0],P=w[1],I=function(){u(!1),p(!1),f(!1),P(!1),i(!0)},C=function(){i(!1)},T=function(){i(!1),f(!1),P(!1),p(!1),u(!0)},x=function(){u(!1)},J=function(){i(!1),f(!1),P(!1),u(!1),p(!0)},G=function(){p(!1)},L=function(){i(!1),u(!1),p(!1),P(!1),f(!0)},R=function(){f(!1)},F=function(){i(!1),u(!1),p(!1),f(!1),P(!0)},W=function(){P(!1)},V=function(t){C(),e.addvalidatedgames(t)};Object(n.useEffect)(function(){0===e.activegamedata.length?I():C()},[e]);var D=0;for(var B in e.activethumbs.titles)for(var Y=0,z=Object.keys(e.activethumbs.titles[B]);Y<z.length;Y++){var U=z[Y];D+=e.activethumbs.titles[B][U].length}var H=Object.keys(e.activethumbs.attributes.players).length+Object.keys(e.activethumbs.attributes.weight).length+Object.keys(e.activethumbs.attributes.category).length+Object.keys(e.activethumbs.attributes.mechanic).length,Z=function(){var t="?newlist=";e.activegamedata.length?e.activegamedata.forEach(function(e){"?newlist="===t?t+=e.id:t=t+"+"+e.id}):t="",t=window.location.href+t;var a=document.getElementById("games-clipboard");a.value=t,a.select(),document.execCommand("copy")},X={position:"absolute",left:"-1000px",top:"-1000px"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"main-controls"},r.a.createElement(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"default-primary-styles",onClick:I},"Add Games"),r.a.createElement(O.a,{size:"md",backdrop:"static",show:l,onHide:C},r.a.createElement(N.a,null,r.a.createElement("div",{id:"gameinput-controls"},r.a.createElement(M,{activepoll:e.activepoll,onviewpoll:e.onviewpoll,routedgames:e.routedgames,updategamevalidations:V,cachedgametitles:e.cachedgametitles}))),r.a.createElement(S.a,null,r.a.createElement("button",{className:"default-primary-styles",onClick:C},"Close"))))},null),r.a.createElement(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"default-primary-styles",onClick:L},"Vote Games"),r.a.createElement(O.a,{size:"md",show:v,onHide:R},r.a.createElement(N.a,null,r.a.createElement("div",{id:"title-voting-controls"},"local"!==e.activepoll.id&&r.a.createElement("p",{className:"warning"},"INFO: Voting on titles in a poll is not yet supported."),r.a.createElement($,{user:e.user,activegamedata:e.activegamedata,titlethumbs:e.activethumbs.titles,onnewvote:e.onnewvote,ondeleteall:e.ondeleteall}))),r.a.createElement(S.a,null,"local"===e.activepoll.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"default-danger-styles",onClick:e.ondeleteall,disabled:0===e.activegamedata.length},"Remove All Games"),r.a.createElement("button",{className:"default-danger-styles","data-votingtype":"all_titles",onClick:e.onclearsectionvotes,disabled:0===D},"Remove All Title Votes")),"local"!==e.activepoll.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"default-danger-styles","data-votingtype":"all_titles",onClick:e.onclearsectionvotes},"Remove All Title Votes")),r.a.createElement("button",{className:"default-primary-styles",onClick:R},"Close"))))},null),r.a.createElement(function(){return"local"===e.activepoll.id?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"default-primary-styles",onClick:T},"Vote Attributes"),r.a.createElement(O.a,{size:"md",show:c,onHide:x},r.a.createElement(N.a,null,r.a.createElement("div",{id:"attribute-voting-controls"},r.a.createElement(Q,{user:e.user,activegamedata:e.activegamedata,attrthumbs:e.activethumbs.attributes,onnewvote:e.onnewvote}))),r.a.createElement(S.a,null,r.a.createElement("button",{className:"default-danger-styles","data-votingtype":"all_attributes",onClick:e.onclearsectionvotes,disabled:0===H},"Remove All Attribute Votes"),r.a.createElement("button",{className:"default-primary-styles",onClick:x},"Close")))):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"default-primary-styles",onClick:J},"Vote Attributes"),r.a.createElement(O.a,{size:"md",show:d,onHide:G},r.a.createElement(N.a,null,r.a.createElement("div",{id:"attribute-voting-controls"},r.a.createElement("p",{className:"warning"},"INFO: Voting on attributes is for personal use only. Only title votes will be counted for games in a poll."),r.a.createElement(Q,{user:e.user,activegamedata:e.activegamedata,attrthumbs:e.activethumbs.attributes,onnewvote:e.onnewvote}))),r.a.createElement(S.a,null,r.a.createElement("button",{className:"default-danger-styles","data-votingtype":"all_attributes",onClick:e.onclearsectionvotes,disabled:0===H},"Remove All Attribute Votes"),r.a.createElement("button",{className:"default-primary-styles",onClick:G},"Close"))))},null),r.a.createElement(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"default-primary-styles",onClick:F},"Import Poll"),r.a.createElement(O.a,{size:"md",show:_,onHide:W},r.a.createElement(N.a,null,r.a.createElement("div",{id:"poll-import-controls"},r.a.createElement(j,{activepoll:e.activepoll,onviewpoll:function(t){W(),e.onviewpoll(t)}}))),r.a.createElement(S.a,null,r.a.createElement("button",{className:"default-primary-styles",onClick:W},"Close"))))},null),r.a.createElement(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"default-primary-styles",onClick:Z},"Copy List ",r.a.createElement(k.a,{icon:A.b})),r.a.createElement("section",null,r.a.createElement("form",null,r.a.createElement("textarea",{id:"games-clipboard",style:X,defaultValue:""}))))},null)))},te=a(40),ae=function(e){var t=function(t){return e.reallynarrow?"attr.":1!==t?"attrs. match":"attr. matches"},a=function(){return r.a.createElement("div",{className:"vote-count"},r.a.createElement("div",{className:"vote-count-heading"},r.a.createElement(k.a,{icon:A.h}),function(){if("local"!==e.activepoll.id&&e.activethumbs.total_title_votes&&"undefined"!==typeof e.mythumbcounts&&e.mythumbcounts.hasOwnProperty("titles")){var t=null;return e.mythumbcounts.my_rank>0&&e.mythumbcounts.titles>=e.mythumbcounts.my_rank?(t="incl. You",r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"\xa0",e.mythumbcounts.titles),r.a.createElement("div",{className:"extra-text"},t))):r.a.createElement("div",null,"\xa0",e.mythumbcounts.titles)}return null}()),r.a.createElement("div",{className:"vote-count-subheading"},e.mythumbcounts.attributes&&e.mythumbcounts.titles?r.a.createElement("span",null,"& ",e.mythumbcounts.attributes," ",t(e.mythumbcounts.attributes)):e.mythumbcounts.attributes&&!e.mythumbcounts.titles?r.a.createElement("span",null,e.mythumbcounts.attributes," ",t(e.mythumbcounts.attributes)):null))};return r.a.createElement("div",{className:"thumbnail"},r.a.createElement("img",{src:e.url,alt:"game box cover"}),e.mythumbcounts.titles?r.a.createElement(r.a.Fragment,null,a()):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"voting-affordance"},r.a.createElement("div",{className:"vote-count-heading"},r.a.createElement(k.a,{icon:te.a}))),a()))},ne=function(e){var t=function(t,r){var l="clickable attribute";if("weight"===t){var i=n(r);l+=" weight ".concat(i)}else if("supported-playercount"===t){var s=a(e.attributes.min_players,e.attributes.max_players);l+=" supported-playercount ".concat(s)}else l+=e.activethumbs.attributes[t].hasOwnProperty(r)&&e.activethumbs.attributes[t][r].hasOwnProperty("thumbsup")&&e.activethumbs.attributes[t][r].thumbsup.length?" thumbsup":" novote";return l},a=function(t,a){var n="novote";return Object.entries(e.activethumbs.attributes.players).forEach(function(e){var r=parseInt(e[0].slice(0,-1));r>=t&&r<=a&&e[1].hasOwnProperty("thumbsup")&&e[1].thumbsup.length&&(n="thumbsup")}),n},n=function(t){var a="novote";return Object.entries(e.activethumbs.attributes.weight).forEach(function(e){t===e[0]&&e[1].hasOwnProperty("thumbsup")&&e[1].thumbsup.length&&(a="thumbsup")}),a},l=e.id,i=e.thumbnail,s=e.activepoll,o=e.name,c=e.yearpublished,u=e.attributes,m=e.activethumbs,d=e.mythumbcounts,p=e.ontoggleinspection,g=e.onnewvote,b=e.ondelete,v=e.reallynarrow,f=Object.entries(e.activethumbs.attributes.category).filter(function(e){return e[1].hasOwnProperty("thumbsup")&&e[1].thumbsup.length}).map(function(e){return e[0]}).filter(function(t){return e.attributes.categories.includes(t)}),y=Object.entries(e.activethumbs.attributes.mechanic).filter(function(e){return e[1].hasOwnProperty("thumbsup")&&e[1].thumbsup.length}).map(function(e){return e[0]}).filter(function(t){return e.attributes.mechanics.includes(t)}),E=[].concat(Object(h.a)(f),Object(h.a)(y)).sort();return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"gamecard-header"},r.a.createElement("button",{className:"fa fa-button",onClick:function(e){return b(e,l)}},r.a.createElement(k.a,{icon:A.i})),r.a.createElement("button",{className:"fa fa-button inspect",onClick:function(e){return p(e,l)}},r.a.createElement(k.a,{icon:A.e}))),r.a.createElement("section",{className:"gamecard-title"},r.a.createElement("h5",{className:"game-name"},o),null!==c?r.a.createElement("h6",{className:"game-yearpublished"},"(",c,")"):r.a.createElement("h6",{className:"game-yearpublished"},"(#",l,")")),r.a.createElement("section",{className:"gamecard-visual","data-votingtype":"title","data-votingon":l,"data-newvote":"thumbsup",onClick:g},r.a.createElement(ae,{id:l,name:o,url:i,activepoll:s,activethumbs:m,mythumbcounts:d,reallynarrow:v}),r.a.createElement("div",{className:"gamecardvisual-overlay"},u.min_players!==u.max_players?r.a.createElement("div",{className:t("supported-playercount",null)},r.a.createElement(k.a,{icon:A.k})," ",u.min_players,"-",u.max_players):r.a.createElement("div",{className:t("supported-playercount",null)},r.a.createElement(k.a,{icon:A.k})," ",u.min_players),u.min_playtime!==u.max_playtime?r.a.createElement("div",null,r.a.createElement(k.a,{icon:A.c})," ",u.min_playtime,"-",u.max_playtime,"'"):r.a.createElement("div",null,r.a.createElement(k.a,{icon:A.c})," ",u.min_playtime,"'"))),r.a.createElement("div",{className:"gamecard-weight"},r.a.createElement("div",{className:"halfsized"},u.min_players!==u.max_players?r.a.createElement("div",{className:t("supported-playercount",null)},r.a.createElement(k.a,{icon:A.k})," ",u.min_players,"-",u.max_players):r.a.createElement("div",{className:t("supported-playercount",null)},r.a.createElement(k.a,{icon:A.k})," ",u.min_players),u.min_playtime!==u.max_playtime?r.a.createElement("div",{className:"estimated-playtime"},r.a.createElement(k.a,{icon:A.c})," ",u.min_playtime,"-",u.max_playtime,"'"):r.a.createElement("div",{className:"estimated-playtime"},r.a.createElement(k.a,{icon:A.c})," ",u.min_playtime,"'")),r.a.createElement("div",{"data-votingtype":"weight","data-votingon":u.average_weight_name,"data-newvote":"thumbsup",onClick:e.onnewvote,className:t("weight",u.average_weight_name)},function(t){if(!e.reallynarrow)return t;switch(t){case"medium light":return"m. light";case"medium heavy":return"m. heavy";default:return t}}(u.average_weight_name))),r.a.createElement("div",{className:"gamecard-upvoted-attributes"},E.map(function(t){return r.a.createElement("div",{key:t,"data-votingtype":f.includes(t)?"category":"mechanic","data-votingon":t,"data-newvote":"thumbsup",onClick:e.onnewvote,className:"clickable attribute thumbsup"},t.toLowerCase())})),r.a.createElement("ul",{className:"gamecard-categories"},r.a.createElement("li",{className:"attribute-section-title"},"Categories"),u.categories.length?u.categories.map(function(a){return r.a.createElement("li",{key:a,"data-votingtype":"category","data-votingon":a,"data-newvote":"thumbsup",onClick:e.onnewvote,className:t("category",a)},a.toLowerCase())}):r.a.createElement("li",null,"(no categories)")),r.a.createElement("ul",{className:"gamecard-mechanics"},r.a.createElement("li",{className:"attribute-section-title"},"Mechanics"),u.mechanics.length?u.mechanics.map(function(a){return r.a.createElement("li",{key:a,"data-votingtype":"mechanic","data-votingon":a,"data-newvote":"thumbsup",onClick:e.onnewvote,className:t("mechanic",a)},a.toLowerCase())}):r.a.createElement("li",null,"(no mechanics)")))},re=function(e){var t=e.description.map(function(e,t){return r.a.createElement("p",{key:t},e)});return r.a.createElement("section",{className:"gamecard-description"},t)},le=function(e){var t=e.comments.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("b",null,e.author,": "),e.comment)});return r.a.createElement("ul",{className:"gamecard-comments"},t)},ie=function(e){var t=e.videos.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("b",null,e.author,": "),r.a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer"},e.title))});return r.a.createElement("ul",{className:"gamecard-videos"},t)},se=function(e){var t=e.id,a=e.name,n=e.yearpublished,l=e.description,i=e.inspectingsection,s=e.comments,o=e.videos,c=e.activethumbs,u=e.activepoll,m=e.ontoggleinspection,h=e.oninspectionsectionchange,d=e.onnewvote,p=e.ondelete,g=e.reallynarrow,b=e.thumbnail,v=e.mythumbcounts;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"gamecard-header"},r.a.createElement("button",{className:"fa fa-button",onClick:function(e){return p(e,t)}},r.a.createElement(k.a,{icon:A.i})),r.a.createElement("button",{className:"fa fa-button inspect",onClick:function(e){return m(e,t)}},r.a.createElement(k.a,{icon:A.e}))),r.a.createElement("section",{className:"gamecard-collapse-control"},r.a.createElement("button",{className:"fa fa-button inspect",onClick:function(e){return m(e,t)}},r.a.createElement(k.a,{icon:A.e}))),r.a.createElement("section",{className:"gamecard-title"},r.a.createElement("h5",{className:"game-name"},a),null!==n?r.a.createElement("h6",{className:"game-yearpublished"},"(",n,")"):r.a.createElement("h6",{className:"game-yearpublished"},"(#",t,")")),r.a.createElement("section",{className:"gamecard-visual","data-votingtype":"title","data-votingon":t,"data-newvote":"thumbsup",onClick:d},r.a.createElement(ae,{id:t,name:a,url:b,activepoll:u,activethumbs:c,mythumbcounts:v,reallynarrow:g})),r.a.createElement("ul",{id:"inspectionsection-selector"},r.a.createElement("li",{id:"select-description",className:"segmentedcontrol darkbg"+("description"===i?" selected":""),onClick:h},e.reallynarrow?"Desc.":"Description"),r.a.createElement("li",{id:"select-comments",className:"segmentedcontrol darkbg"+("comments"===i?" selected":""),onClick:h},"Comments"),r.a.createElement("li",{id:"select-videos",className:"segmentedcontrol darkbg"+("videos"===i?" selected":""),onClick:h},"Videos")),r.a.createElement("section",{className:"gamecard-variable"},r.a.createElement(K.a,null,"description"===i&&r.a.createElement(q.a,{key:0,in:!0,appear:!1,timeout:2e3,classNames:"showsegment"},r.a.createElement(re,{description:l})),"comments"===i&&r.a.createElement(q.a,{key:1,in:!0,appear:!1,timeout:2e3,classNames:"showsegment"},r.a.createElement(le,{comments:s})),"videos"===i&&r.a.createElement(q.a,{key:2,in:!0,appear:!1,timeout:2e3,classNames:"showsegment"},r.a.createElement(ie,{videos:o})))))};se.defaultProps={comments:[{author:"ERROR",comment:"(no comments for this game exist on BoardGameGeek.com)"}],videos:[{author:"ERROR",link:"#",title:"(no videos for this game exist on BoardGameGeek.com)"}]};var oe=a(41),ce=a.n(oe),ue=function(e){return r.a.createElement("div",{className:"footer"},r.a.createElement("a",{href:"https://boardgamegeek.com/boardgame/"+e.gameid,rel:"noopener noreferrer"},"this game on BGG"),"\xa0",r.a.createElement("img",{src:ce.a,alt:"BoardGameGeek logo"}))},me=function(e){return 1===e.mythumbcounts.poll_rank?r.a.createElement("div",{className:"gamecard-overlay"},"WINNER!"):null},he=function(e){var t,a="game";e.id===e.idunderinspection&&(a+=" inspecting"),"undefined"!==typeof e.mythumbcounts&&1===e.mythumbcounts.poll_rank&&(a+=" winner"),"undefined"!==typeof e.mythumbcounts&&e.mythumbcounts.hasOwnProperty("titles")&&0!==e.mythumbcounts.titles||(a+=" no-title-votes"),"undefined"!==typeof e.mythumbcounts&&e.mythumbcounts.hasOwnProperty("attributes")&&0!==e.mythumbcounts.attributes||(a+=" no-attribute-votes"),t=e.id!==e.idunderinspection?r.a.createElement(ne,{id:e.id,thumbnail:e.thumbnail,activepoll:e.activepoll,activethumbs:e.activethumbs,mythumbcounts:e.mythumbcounts,name:e.name,yearpublished:e.yearpublished,attributes:e.attributes,ontoggleinspection:e.ontoggleinspection,onnewvote:e.onnewvote,ondelete:e.ondelete,reallynarrow:e.reallynarrow}):r.a.createElement(se,{id:e.id,thumbnail:e.thumbnail,activepoll:e.activepoll,activethumbs:e.activethumbs,mythumbcounts:e.mythumbcounts,name:e.name,yearpublished:e.yearpublished,description:e.description,inspectingsection:e.inspectingsection,comments:e.comments,videos:e.videos,ontoggleinspection:e.ontoggleinspection,oninspectionsectionchange:e.oninspectionsectionchange,onnewvote:e.onnewvote,ondelete:e.ondelete,reallynarrow:e.reallynarrow});var n=r.a.createElement(me,{mythumbcounts:e.mythumbcounts});return r.a.createElement("section",{className:a},n,t,r.a.createElement("section",{className:"gamecard-footer"},r.a.createElement(ue,{gameid:e.id})))},de=function(e){var t=Object(n.useState)(null),a=Object(y.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)("description"),o=Object(y.a)(s,2),c=o[0],u=o[1];Object(n.useEffect)(function(){var e=JSON.parse(localStorage.getItem("idUnderInspection"));null!==e&&i(e)},[]);var m,h,d=function(e,t){var a=parseInt(t);l===a?(localStorage.setItem("idUnderInspection",JSON.stringify(null)),i(null)):(localStorage.setItem("idUnderInspection",JSON.stringify(a)),i(a))},p=function(e){var t=e.target.id.replace(/select-/g,"");u(t)},g=function(){var t={};if(e.activegamedata.length){var a=!0,n=!1,r=void 0;try{for(var l,i=e.activegamedata[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){for(var s=l.value,o={attributes:0,titles:0,poll_rank:0,my_rank:0},c=s.attributes.min_players;c<=s.attributes.max_players;c++)if(e.activethumbs.attributes.players.hasOwnProperty(c+"P")&&e.activethumbs.attributes.players[c+"P"].hasOwnProperty("thumbsup")&&e.activethumbs.attributes.players[c+"P"].thumbsup.length){o.attributes++;break}e.activethumbs.attributes.weight.hasOwnProperty(s.attributes.average_weight_name)&&e.activethumbs.attributes.weight[s.attributes.average_weight_name].hasOwnProperty("thumbsup")&&e.activethumbs.attributes.weight[s.attributes.average_weight_name].thumbsup.length&&o.attributes++;var u=!0,m=!1,h=void 0;try{for(var d,p=s.attributes.categories[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var g=d.value;e.activethumbs.attributes.category.hasOwnProperty(g)&&e.activethumbs.attributes.category[g].hasOwnProperty("thumbsup")&&e.activethumbs.attributes.category[g].thumbsup.length&&o.attributes++}}catch(S){m=!0,h=S}finally{try{u||null==p.return||p.return()}finally{if(m)throw h}}var b=!0,v=!1,f=void 0;try{for(var y,E=s.attributes.mechanics[Symbol.iterator]();!(b=(y=E.next()).done);b=!0){var w=y.value;e.activethumbs.attributes.mechanic.hasOwnProperty(w)&&e.activethumbs.attributes.mechanic[w].hasOwnProperty("thumbsup")&&e.activethumbs.attributes.mechanic[w].thumbsup.length&&o.attributes++}}catch(S){v=!0,f=S}finally{try{b||null==E.return||E.return()}finally{if(v)throw f}}if(e.activethumbs.hasOwnProperty("titles")&&e.activethumbs.titles.hasOwnProperty(s.id.toString())&&e.activethumbs.titles[s.id].hasOwnProperty("thumbsup")){if("local"!==e.activepoll.id)o.titles=e.activethumbs.titles[s.id.toString()].thumbsup.length;else{var O=JSON.parse(JSON.stringify(e.activethumbs.titles[s.id.toString()].thumbsup)).filter(function(t){return t.user===e.user});o.titles=O.length}var N=JSON.parse(JSON.stringify(e.activethumbs.titles[s.id.toString()].thumbsup)).filter(function(t){return null!==e.user?t.user===e.user:null===t.user});1===N.length?o.my_rank=N[0].rank:o.my_rank=null}"local"!==e.activepoll.id&&e.activethumbs.hasOwnProperty("winners")&&e.activethumbs.winners.includes(s.id)&&(o.poll_rank=1),t[s.id]=o}}catch(S){n=!0,r=S}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}}return t}(),b=(m=function(t){var a=function(e){var t=[];if(e.activethumbs.attributes.hasOwnProperty("weight"))for(var a in e.activethumbs.attributes.weight)e.activethumbs.attributes.weight[a].hasOwnProperty("thumbsup")&&e.activethumbs.attributes.weight[a].thumbsup.length&&t.push(a);return t}(e);return t.filter(function(t){return!e.filterweight||!a.length||!!a.includes(t.attributes.average_weight_name)})}(function(t){var a=function(e){var t=[];if(e.activethumbs.attributes.hasOwnProperty("players"))for(var a in e.activethumbs.attributes.players)e.activethumbs.attributes.players[a].hasOwnProperty("thumbsup")&&e.activethumbs.attributes.players[a].thumbsup.length&&t.push(parseInt(a.slice(0,-1)));return t}(e);return t.filter(function(t){if(e.filterplayercount&&a.length){for(var n=t.attributes.min_players;n<=t.attributes.max_players;n++)if(a.includes(n))return!0;return!1}return!0})}(function(t){var a=function(e){var t=[];if(e.activethumbs.hasOwnProperty("titles"))for(var a=0,n=Object.entries(e.activethumbs.titles);a<n.length;a++){var r=n[a];r[1].hasOwnProperty("thumbsup")&&r[1].thumbsup.length&&t.push(parseInt(r[0]))}return t}(e);return t.filter(function(t){return!e.filtertitles||!a.length||!!a.includes(t.id)})}(e.activegamedata))),h=g,m.sort(function(t,a){return"alphabetical"===e.sortby?t.unambiguous_name<a.unambiguous_name?-1:t.unambiguous_name<a.unambiguous_name?1:0:"maxtitlevotes"===e.sortby?h[t.id].titles<h[a.id].titles?1:h[t.id].titles>h[a.id].titles?-1:h[t.id].attributes<h[a.id].attributes?1:h[t.id].attributes>h[a.id].attributes?-1:t.attributes.max_playtime>a.attributes.max_playtime?1:t.attributes.max_playtime<a.attributes.max_playtime?-1:0:"maxattrvotes"===e.sortby?h[t.id].attributes<h[a.id].attributes?1:h[t.id].attributes>h[a.id].attributes?-1:h[t.id].titles<h[a.id].titles?1:h[t.id].titles>h[a.id].titles?-1:t.attributes.max_playtime>a.attributes.max_playtime?1:t.attributes.max_playtime<a.attributes.max_playtime?-1:0:"minplaytime"===e.sortby?t.attributes.max_playtime>a.attributes.max_playtime?1:t.attributes.max_playtime<a.attributes.max_playtime?-1:h[t.id].titles<h[a.id].titles?1:h[t.id].titles>h[a.id].titles?-1:h[t.id].attributes<h[a.id].attributes?1:h[t.id].attributes>h[a.id].attributes?-1:0:"maxplayers"===e.sortby?t.attributes.max_players<a.attributes.max_players?1:t.attributes.max_players>a.attributes.max_players?-1:h[t.id].titles<h[a.id].titles?1:h[t.id].titles>h[a.id].titles?-1:h[t.id].attributes<h[a.id].attributes?1:h[t.id].attributes>h[a.id].attributes?-1:0:0}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,{user:e.user,routedgames:e.routedgames,activegamedata:e.activegamedata,activethumbs:e.activethumbs,cachedgametitles:e.cachedgametitles,addvalidatedgames:e.addvalidatedgames,ondeleteall:e.ondeleteall,onnewvote:e.onnewvote,onclearsectionvotes:e.onclearsectionvotes,activepoll:e.activepoll,onviewpoll:e.onviewpoll}),r.a.createElement("div",{id:"resulting-games",className:function(){var t="";return 0!==e.activethumbs.total_title_votes&&(t+="deemphasize-nonvoted-titles"),t}()},0!==b.length&&b.map(function(t,a){return r.a.createElement(he,{key:a,id:t.id,idunderinspection:l,inspectingsection:c,name:t.name,thumbnail:t.thumbnail,description:t.description,yearpublished:t.year_published,attributes:t.attributes,comments:t.comments,videos:t.videos,activepoll:e.activepoll,activethumbs:e.activethumbs,mythumbcounts:g[t.id],onnewvote:e.onnewvote,ondelete:e.ondelete,ontoggleinspection:d,oninspectionsectionchange:p,reallynarrow:e.reallynarrow})}),0===e.activegamedata.length&&r.a.createElement("span",{className:"message warning"},r.a.createElement("p",null,"No board games to compare yet!"),r.a.createElement("p",null,'Please add game titles by clicking "Add Games".'))))},pe=function(e){var t=Object(n.useState)(!1),a=Object(y.a)(t,2),l=a[0],i=a[1],s=function(){i(!1)},o=function(e){var t=new Date(e);return t.toString().split(" ")[0]+" "+t.toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})};if("local"===e.poll.id)return r.a.createElement("p",null);var c={};Object.entries(e.poll.pollThumbs.titles).forEach(function(t){var a=e.gamedata.filter(function(e){return e.id===parseInt(t[0])})[0].unambiguous_name;if(t[1].hasOwnProperty("thumbsup")){var n=JSON.parse(JSON.stringify(t[1].thumbsup)).map(function(e){return e.user}).sort(function(t,a){return t===e.user?-1:a===e.user?1:t<a?-1:t>a?1:0});c[a]=n}});for(var u=Object.entries(c).sort(function(e,t){return e[1].length>t[1].length?-1:e[1].length<t[1].length?1:0}),m=0;m<u.length;m++){var h="";0===m?h="1":u[m][1].length===u[m-1][1].length?(u[m-1][2].endsWith("T")||(u[m-1][2]+="T"),h=u[m-1][2]):h=(m+1).toString(),u[m].push(h)}return r.a.createElement("div",{id:"poll-info"},r.a.createElement("button",{className:"local"!==e.poll.id?"fa fa-button poll-info":null,onClick:function(){i(!0)}},r.a.createElement(k.a,{icon:A.e})),r.a.createElement(O.a,{size:"md",show:l,onHide:s},r.a.createElement(N.a,null,r.a.createElement("h4",null,e.poll.name),r.a.createElement("table",{id:"poll-metadata"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID:"),r.a.createElement("td",null,e.poll.id)),r.a.createElement("tr",null,r.a.createElement("th",null,"created:"),r.a.createElement("td",null,o(e.poll.id))),r.a.createElement("tr",null,r.a.createElement("th",null,"updated:"),r.a.createElement("td",null,o(e.poll.updatedAt))),r.a.createElement("tr",null,r.a.createElement("th",null,"closes:"),r.a.createElement("td",null,o(e.poll.closesAt))))),r.a.createElement("table",{id:"poll-results"},r.a.createElement("tbody",null,u.map(function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("th",null,t[2],"."),r.a.createElement("td",null,t[0]),r.a.createElement("td",null,t[1].map(function(a,n){var l=n!==t[1].length-1?", ":"";return a===e.user?r.a.createElement("span",{key:n,className:"you"},"You",l):r.a.createElement("span",{key:n},a,l)})))})))),r.a.createElement(S.a,null,r.a.createElement("button",{className:"default-primary-styles",onClick:s},"Close"))))},ge=function(e){return"local"===e.poll.id?r.a.createElement("h1",{className:"big"},"Boardgameinator"):r.a.createElement("h1",null,e.poll.name)},be=function(e){var t=Object(n.useState)(0),a=Object(y.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)("-"),o=Object(y.a)(s,2),c=o[0],u=o[1],m=Object(n.useState)("-"),h=Object(y.a)(m,2),d=h[0],p=h[1],g=Object(n.useState)("-"),b=Object(y.a)(g,2),v=b[0],f=b[1],E=Object(n.useState)("-"),w=Object(y.a)(E,2),O=w[0],N=w[1];return Object(n.useEffect)(function(){if("local"!==e.poll.id){var t=setInterval(function(){var t=(new Date).getTime(),a=0,n=0,r=0,l=parseInt(e.poll.closesAt)-t,s=Math.floor(l/1e3);l>0&&s>59&&(s-=60*(r=Math.floor(s/60)),r>59&&(r-=60*(n=Math.floor(r/60)),n>23&&(n-=24*(a=Math.floor(n/24))))),i(l),u(a),p(n),f(r),N(s)},1e3);return function(){return clearInterval(t)}}},[e.poll.closesAt,e.poll.id]),"local"===e.poll.id?r.a.createElement("p",null):l<0?r.a.createElement("p",{id:"countdown"},"results final"):r.a.createElement("div",{id:"clock"},r.a.createElement("p",{id:"countdown-label"},"voting closes:"),r.a.createElement("div",{id:"countdown"},r.a.createElement("div",{className:"delta"},r.a.createElement("div",{className:"value"},c),r.a.createElement("div",{className:"units"},"days")),r.a.createElement("div",{className:"delta"},r.a.createElement("div",{className:"value"},d),r.a.createElement("div",{className:"units"},"hours")),r.a.createElement("div",{className:"delta"},r.a.createElement("div",{className:"value"},v),r.a.createElement("div",{className:"units"},"mins")),r.a.createElement("div",{className:"delta"},r.a.createElement("div",{className:"value"},O),r.a.createElement("div",{className:"units"},"secs"))))},ve=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).gamedataVersion=1,a.state={activeGameList:[],activePoll:{id:"local",name:"local"},allGameData:[],activeThumbs:{attributes:{players:{},weight:{},category:{},mechanic:{}},total_attribute_votes:0,titles:{},total_title_votes:0},allThumbs:{local:{attributes:{players:{},weight:{},category:{},mechanic:{}},total_attribute_votes:0,titles:{},total_title_votes:0}},filterTitles:!1,filterPlayercount:!0,filterWeight:!0,localGameList:[],routedGames:{},sortOrder:"alphabetical",user:null,windowWidth:0,windowHeight:0},a.getCachedGameTitles=a.getCachedGameTitles.bind(Object(v.a)(a)),a.addValidatedGamesWithPollContext=a.addValidatedGamesWithPollContext.bind(Object(v.a)(a)),a.addValidatedGames=a.addValidatedGames.bind(Object(v.a)(a)),a.deleteTitleInPoll=a.deleteTitleInPoll.bind(Object(v.a)(a)),a.onNewVote=a.onNewVote.bind(Object(v.a)(a)),a.onDeleteTitle=a.onDeleteTitle.bind(Object(v.a)(a)),a.onDeleteAllTitles=a.onDeleteAllTitles.bind(Object(v.a)(a)),a.onClearSectionVotes=a.onClearSectionVotes.bind(Object(v.a)(a)),a.onViewPoll=a.onViewPoll.bind(Object(v.a)(a)),a.handleSortChange=a.handleSortChange.bind(Object(v.a)(a)),a.handleFilterChange=a.handleFilterChange.bind(Object(v.a)(a)),a.handleUserChange=a.handleUserChange.bind(Object(v.a)(a)),a.updateDimensions=a.updateDimensions.bind(Object(v.a)(a)),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=[],t=[],a=[],n=null,r=this.props.location.search.slice(1).split("?"),l=JSON.parse(localStorage.getItem("user"));null!==l&&this.setState({user:l}),(1===r.length?r[0]:r[1]).split("&").forEach(function(e){var r=e.split("=");"newlist"===r[0]?r[1].split("+").forEach(function(e){t.includes(parseInt(e))||t.push(parseInt(e))}):"addtolist"===r[0]?r[1].split("+").forEach(function(e){a.includes(parseInt(e))||a.push(parseInt(e))}):"poll"!==r[0]||isNaN(parseInt(r[1]))||(n=parseInt(r[1]))}),null!==n?(a=[],t=[]):t.length&&a.length&&(a=[]);var i={};i.new_list=Object(h.a)(t),i.addto_list=Object(h.a)(a),i.pollid=n,this.setState({routedGames:i});var s=JSON.parse(localStorage.getItem("localGameList"));null!==s&&this.setState({localGameList:s});var o=JSON.parse(localStorage.getItem("activeGameList"));null!==o&&0===t.length&&null===n?this.setState({activeGameList:o}):this.setState({activeGameList:[]});var c=JSON.parse(localStorage.getItem("activePoll"));if(null!==c)this.setState({activePoll:c});else{this.setState({activePoll:{id:"local",name:"local"}})}JSON.parse(localStorage.getItem("gamedataVersion"))===this.gamedataVersion?e=JSON.parse(localStorage.getItem("allGameData")):(localStorage.setItem("gamedataVersion",JSON.stringify(this.gamedataVersion)),localStorage.setItem("allGameData",JSON.stringify(e))),this.setState({allGameData:e});var u=JSON.parse(localStorage.getItem("allThumbs"));null!==u&&this.setState({allThumbs:u});var m=JSON.parse(localStorage.getItem("activeThumbs"));null!==m&&this.setState({activeThumbs:m});var d=JSON.parse(localStorage.getItem("sortOrder"));null!==d&&this.setState({sortOrder:d});var p=JSON.parse(localStorage.getItem("filterTitles"));null!==p&&this.setState({filterTitles:p});var g=JSON.parse(localStorage.getItem("filterPlayercount"));null!==g&&this.setState({filterPlayercount:g});var b=JSON.parse(localStorage.getItem("filterWeight"));null!==b&&this.setState({filterWeight:b}),this.updateDimensions(),window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"updateDimensions",value:function(){var e="undefined"!==typeof window?window.innerWidth:0,t="undefined"!==typeof window?window.innerHeight:0;this.setState({windowWidth:e,windowHeight:t})}},{key:"extractYearFromTitle",value:function(e){if("string"===typeof e&&e.length){var t=e.match(/(( +)\((-?)\d{1,4}\))$/);if(null!==t)return t[0].replace(/[^0-9-]/g,"");var a=e.match(/(( +)\(#\d{1,6}\))$/);return null!==a?a[0].replace(/[^#0-9-]/g,""):null}}},{key:"getCachedGameTitles",value:function(){var e={},t=this;return this.state.allGameData.forEach(function(a){if(a.hasOwnProperty("unambiguous_name")){var n={id:a.id,name:a.name,unambiguous_name:a.unambiguous_name,year_published:a.year_published,active:!!t.state.activeGameList.includes(a.id)};e[a.unambiguous_name]=n}}),e}},{key:"gameHasBeenAdded",value:function(e,t){var a=!0,n=!1,r=void 0;try{for(var l,i=t[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){if(l.value.id===parseInt(e))return!0}}catch(s){n=!0,r=s}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return!1}},{key:"gameSupportsPlayercount",value:function(e,t){var a=t.slice(0,-1);return a<=e.attributes.max_players&&a>=e.min_players}},{key:"onDeleteTitle",value:function(e,t){var a=this;"local"!==this.state.activePoll.id?this.deleteTitleInPoll(this.state.activePoll.id,t,this.state.user):this.setState(function(e){var n=e.activeGameList.slice();n=n.filter(function(e){return e!==parseInt(t)});var r=e.localGameList.slice();r=r.filter(function(e){return e!==parseInt(t)});var l=JSON.parse(JSON.stringify(e.allGameData));l=l.filter(function(e){return e.id!==parseInt(t)});var i=JSON.parse(JSON.stringify(e.activeThumbs));for(var s in i.titles.hasOwnProperty(t)&&delete i.titles[t],i.attributes)if("players"===s)for(var o in i.attributes[s]){var c=!1,u=!0,m=!1,h=void 0;try{for(var d,p=l[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var g=d.value;if(a.gameSupportsPlayercount(g,o)){c=!0;break}}}catch($){m=!0,h=$}finally{try{u||null==p.return||p.return()}finally{if(m)throw h}}c||delete i.attributes[s][o]}else if("weight"===s)for(var b in i.attributes[s]){var v=!1,f=!0,y=!1,E=void 0;try{for(var w,O=l[Symbol.iterator]();!(f=(w=O.next()).done);f=!0){if(w.value.weight===b){v=!0;break}}}catch($){y=!0,E=$}finally{try{f||null==O.return||O.return()}finally{if(y)throw E}}v||delete i.attributes[s][b]}else if("category"===s)for(var N in i.attributes[s]){var S=!1,k=!0,A=!1,_=void 0;try{for(var P,I=l[Symbol.iterator]();!(k=(P=I.next()).done);k=!0){var j=P.value;if("undefined"!==typeof j.attributes){var C=!0,T=!1,x=void 0;try{for(var J,G=j.attributes.categories[Symbol.iterator]();!(C=(J=G.next()).done);C=!0){var L=J.value;if(N.hasOwnProperty(L)&&N[L].hasOwnProperty("thumbsup")&&N[L].thumbsup.length){S=!0;break}}}catch($){T=!0,x=$}finally{try{C||null==G.return||G.return()}finally{if(T)throw x}}}}}catch($){A=!0,_=$}finally{try{k||null==I.return||I.return()}finally{if(A)throw _}}S||delete i.attributes[s][N]}else if("mechanic"===s)for(var R in i.attributes[s]){var F=!1,W=!0,V=!1,D=void 0;try{for(var B,Y=l[Symbol.iterator]();!(W=(B=Y.next()).done);W=!0){var z=B.value;if("undefined"!==typeof z.attributes){var U=!0,H=!1,M=void 0;try{for(var Z,X=z.attributes.mechanics[Symbol.iterator]();!(U=(Z=X.next()).done);U=!0){var K=Z.value;if(R.hasOwnProperty(K)&&R[K].hasOwnProperty("thumbsup")&&R[K].thumbsup.length){F=!0;break}}}catch($){H=!0,M=$}finally{try{U||null==X.return||X.return()}finally{if(H)throw M}}}}}catch($){V=!0,D=$}finally{try{W||null==Y.return||Y.return()}finally{if(V)throw D}}F||delete i.attributes[s][R]}localStorage.setItem("activeGameList",JSON.stringify(n)),localStorage.setItem("localGameList",JSON.stringify(r)),localStorage.setItem("activeThumbs",JSON.stringify(i));var q=JSON.parse(JSON.stringify(e.allThumbs)),Q=JSON.parse(JSON.stringify(i));return q[e.activePoll.id]=Q,localStorage.setItem("allThumbs",JSON.stringify(q)),{activeGameList:n,localGameList:r,allThumbs:q,activeThumbs:i}})}},{key:"clearMyTitleVotesInPoll",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L(t,a);case 1:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"onDeleteAllTitles",value:function(e){this.setState(function(e){var t=[],a=[],n={attributes:{players:{},weight:{},category:{},mechanic:{}},titles:{},total_title_votes:0,total_attribute_votes:0};localStorage.setItem("activeGameList",JSON.stringify(t)),localStorage.setItem("localGameList",JSON.stringify(a)),localStorage.setItem("activeThumbs",JSON.stringify(n));var r=JSON.parse(JSON.stringify(e.allThumbs)),l=JSON.parse(JSON.stringify(n));return r[e.activePoll.id]=l,localStorage.setItem("allThumbs",JSON.stringify(r)),{activeGameList:t,localGameList:a,allThumbs:r,activeThumbs:n}})}},{key:"totalTitleVotes",value:function(e,t,a){var n=0;return Object.entries(e).forEach(function(e){e[1].hasOwnProperty("thumbsup")&&(t?e[1].thumbsup.filter(function(e){return e.user===a}).length&&(n+=1):n+=e[1].thumbsup.length)}),n}},{key:"totalAttributeVotes",value:function(e){var t=0;return Object.entries(e).forEach(function(e){t+=Object.values(e[1]).filter(function(e){return e.hasOwnProperty("thumbsup")&&e.thumbsup.length}).length}),t}},{key:"voteTitleInPoll",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n,r){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:G(t,a,n,r);case 1:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"deleteTitleInPoll",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:R(t,a,n);case 1:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"onNewVote",value:function(e){var t=this,a=Object.assign({},e.currentTarget.dataset),n=a.votingtype,r=a.votingon,l=a.newvote;"title"===n&&"local"!==this.state.activePoll.id?this.voteTitleInPoll(this.state.activePoll.id,r,l,this.state.user):this.setState(function(e){var a=JSON.parse(JSON.stringify(e.activeThumbs));if("title"===n)if(e.activeThumbs.titles.hasOwnProperty(r.toString()))if(e.activeThumbs.titles[r.toString()].hasOwnProperty(l)){if(JSON.parse(JSON.stringify(e.activeThumbs.titles[r.toString()][l])).filter(function(t){return t.user===e.user}).length>0){var i=JSON.parse(JSON.stringify(e.activeThumbs.titles[r.toString()][l])).filter(function(t){return t.user!==e.user});a.titles[r.toString()][l]=i}else{var s={user:e.user,rank:null},o=JSON.parse(JSON.stringify(e.activeThumbs.titles[r.toString()][l]));o.push(s),a.titles[r.toString()][l]=o}}else{var c={user:e.user,rank:null};a.titles[r.toString()][l]=[c]}else{var u={},m={user:e.user,rank:1};u[l]=[m],a.titles[r.toString()]=u}else if(a.attributes[n].hasOwnProperty(r)){var h=JSON.parse(JSON.stringify(a.attributes[n][r]));if(h.hasOwnProperty(l)&&h[l].includes(e.user)){var d=h[l].filter(function(t){return t!==e.user});h[l]=d}else{var p=[e.user];h[l]=p}a.attributes[n][r]=h}else{var g={};g[l]=[e.user],a.attributes[n][r]=g}var b="local"===t.state.activePoll.id;a.total_title_votes=t.totalTitleVotes(a.titles,b,t.state.user),a.total_attribute_votes=t.totalAttributeVotes(a.attributes),localStorage.setItem("activeThumbs",JSON.stringify(a));var v=JSON.parse(JSON.stringify(e.allThumbs)),f=JSON.parse(JSON.stringify(a));return v.local=f,localStorage.setItem("allThumbs",JSON.stringify(v)),{activeThumbs:a,allThumbs:v}})}},{key:"onViewPoll",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n,r,l,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,"local"!==t.id){e.next=5;break}this.addValidatedGamesWithPollContext(null,t,null,a),e.next=13;break;case 5:return n=Object.keys(t.pollThumbs.titles).map(function(e){return parseInt(e)}),r=this.getCachedGameTitles(),e.next=9,z(r,n);case 9:l=e.sent,this.state.routedGames.hasOwnProperty("new_list")&&this.state.routedGames.new_list.length||this.state.routedGames.hasOwnProperty("pollid")&&null!==this.state.routedGames.pollid?(a=!0,l.routed_games_treatment="replace"):this.state.routedGames.hasOwnProperty("addto_list")&&this.state.routedGames.addto_list.length&&(a=!0,l.routed_games_treatment="append"),i=JSON.parse(JSON.stringify(t.pollThumbs)),this.addValidatedGamesWithPollContext(l.gameValidations,t,i,a);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onClearSectionVotes",value:function(e){var t=this,a=Object.assign({},e.target.dataset).votingtype;if("all_titles"===a&&"local"!==this.state.activePoll.id)this.clearMyTitleVotesInPoll(this.state.activePoll.id,this.state.user);else{var n={};this.setState(function(e){var r=JSON.parse(JSON.stringify(e.activeThumbs));if("all_titles"===a){var l="local"===t.state.activePoll.id;r.titles=n,r.total_title_votes=t.totalTitleVotes(r.titles,l,t.state.user)}else"all_attributes"===a?(r.attributes.players=n,r.attributes.weight=n,r.attributes.category=n,r.attributes.mechanic=n):r.attributes[a]=n,r.total_attribute_votes=t.totalAttributeVotes(r.attributes);localStorage.setItem("activeThumbs",JSON.stringify(r));var i=JSON.parse(JSON.stringify(r)),s=JSON.parse(JSON.stringify(r));return i[e.activePoll.id]=s,localStorage.setItem("allThumbs",JSON.stringify(i)),{activeThumbs:r,allThumbs:i}})}}},{key:"addValidatedGames",value:function(e){this.addValidatedGamesWithPollContext(e,this.state.activePoll,this.state.allThumbs[this.state.activePoll.id],!1)}},{key:"addValidatedGamesWithPollContext",value:function(e,t,a,n){var r=this;this.setState(function(n){var l,i,s,o=[],c={},u=Object(h.a)(n.localGameList),m=JSON.parse(JSON.stringify(n.allGameData)),d=null!==e?e.routed_games_treatment:"none",p=JSON.parse(JSON.stringify(t)),g=n.activePoll.id!==t.id;if("replace"===d||"append"===d||g&&"local"===t.id)p.id="local",o="replace"===d?[]:Object(h.a)(n.localGameList),c=JSON.parse(JSON.stringify(n.allThumbs.local));else if(g)o=[],(c=JSON.parse(JSON.stringify(a))).total_title_votes=a.total_title_votes;else{o=Object(h.a)(n.localGameList),c=JSON.parse(JSON.stringify(n.allThumbs.local));var b="local"===t,v=r.totalTitleVotes(n.allThumbs.local,b,r.state.user);c.total_title_votes=v}if(null!==e&&(e.new_gamedata_to_activate.length||e.new_gamedata_to_cache)){var f=new Date;Object.values(e.new_gamedata_to_activate).forEach(function(e){var a=JSON.parse(JSON.stringify(e));a.updated_at=f.getTime(),o.push(a.id),"local"===t.id&&u.push(a.id),m.push(a)}),Object.values(e.new_gamedata_to_cache).forEach(function(e){var t=JSON.parse(JSON.stringify(e));t.updated_at=f.getTime(),m.push(t)})}return c.attributes=JSON.parse(JSON.stringify(n.allThumbs.local.attributes)),c.total_attribute_votes=n.allThumbs.local.total_attribute_votes,null!==e&&e.cached_games_to_activate.length&&e.cached_games_to_activate.forEach(function(e){var a=n.allGameData.filter(function(t){return t.unambiguous_name===e})[0].id;o.push(a),"local"===t.id&&u.push(a)}),g&&"local"!==t.id?(l=!1,i=!1,s=!1):(l=JSON.parse(localStorage.getItem("filterPlayercount")),i=JSON.parse(localStorage.getItem("filterTitles")),s=JSON.parse(localStorage.getItem("filterWeight"))),localStorage.setItem("activeGameList",JSON.stringify(o)),localStorage.setItem("localGameList",JSON.stringify(u)),localStorage.setItem("allGameData",JSON.stringify(m)),localStorage.setItem("activePoll",JSON.stringify(p)),localStorage.setItem("activeThumbs",JSON.stringify(c)),{activePoll:p,activeGameList:o,activeThumbs:c,localGameList:u,allGameData:m,routedGames:{new_list:[],addto_list:[],pollid:null},filterPlayercount:l,filterTitles:i,filterWeight:s}}),null!==e&&n&&this.props.history.push("/boardgameinator")}},{key:"handleSortChange",value:function(e,t){this.setState(function(e){return localStorage.setItem("sortOrder",JSON.stringify(t)),{sortOrder:t}})}},{key:"handleFilterChange",value:function(e,t){var a=this;if("local"===this.state.activePoll.id)switch(t){case"titles":this.setState(function(e){var t=!e.filterTitles;return localStorage.setItem("filterTitles",JSON.stringify(t)),{filterTitles:!a.state.filterTitles}});break;case"playercount":this.setState(function(e){var t=!e.filterPlayercount;return localStorage.setItem("filterPlayercount",JSON.stringify(t)),{filterPlayercount:!a.state.filterPlayercount}});break;case"weight":this.setState(function(e){var t=!e.filterWeight;return localStorage.setItem("filterWeight",JSON.stringify(t)),{filterWeight:!a.state.filterWeight}})}}},{key:"handleUserChange",value:function(e){var t=this;this.setState(function(a){var n="local"===t.state.activePoll.id,r=JSON.parse(JSON.stringify(a.activeThumbs)),l=t.totalTitleVotes(a.activeThumbs.titles,n,e);return r.total_title_votes=l,localStorage.setItem("user",JSON.stringify(e)),{user:e,activeThumbs:r}})}},{key:"onHamburger",value:function(e){}},{key:"render",value:function(){var e=this,t={reallyNarrow:this.state.windowWidth<650},a=this.state.allGameData.filter(function(t){return e.state.activeGameList.includes(t.id)}),n=this.getCachedGameTitles(),l=null!==this.state.filterTitles&&"local"===this.state.activePoll.id&&this.state.filterTitles,i=null!==this.state.filterPlayercount&&"local"===this.state.activePoll.id&&this.state.filterPlayercount,s=null!==this.state.filterWeight&&"local"===this.state.activePoll.id&&this.state.filterWeight;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"page-header"},r.a.createElement("div",{id:"buttonrow-left"},r.a.createElement("button",{className:"fa fa-button"},r.a.createElement(k.a,{icon:A.a})),r.a.createElement("img",{src:w.a,alt:"Boardgameinator logo"}),r.a.createElement(ge,{poll:this.state.activePoll}),r.a.createElement(pe,{poll:this.state.activePoll,gamedata:this.state.allGameData,user:this.state.user}),r.a.createElement(be,{poll:this.state.activePoll})),r.a.createElement(_,{user:this.state.user,activepoll:this.state.activePoll,sortby:this.state.sortOrder,onsortchange:this.handleSortChange,filtertitles:l,filterplayercount:i,filterweight:s,onfilterchange:this.handleFilterChange,onuserchange:this.handleUserChange})),r.a.createElement("div",{id:"content-wrapper"},r.a.createElement(de,{routedgames:this.state.routedGames,activegamedata:a,cachedgametitles:n,addvalidatedgames:this.addValidatedGames,activethumbs:this.state.activeThumbs,sortby:this.state.sortOrder,filtertitles:l,filterplayercount:i,filterweight:s,ondelete:this.onDeleteTitle,ondeleteall:this.onDeleteAllTitles,onnewvote:this.onNewVote,onclearsectionvotes:this.onClearSectionVotes,activepoll:this.state.activePoll,onviewpoll:this.onViewPoll,reallynarrow:t.reallyNarrow,user:this.state.user})))}}]),t}(r.a.Component),fe=r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(o.a,{path:"/",component:ve})));i.a.render(fe,document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.c1198b96.chunk.js.map