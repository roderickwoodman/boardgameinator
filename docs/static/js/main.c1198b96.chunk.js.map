{"version":3,"sources":["img/purple-meeple-64.png","img/bgg-logo-50.png","ViewControls.js","ImportPoll.js","Api.js","GameLibrary.js","AddGames.js","VotingSection.js","VoteAttributes.js","VoteTitles.js","MainControls.js","Thumbnail.js","GameCardFront.js","GameCardBack.js","GameList.js","PollInfo.js","Boardgameinator.js","index.js"],"names":["module","exports","ViewControls","props","_useState","useState","_useState2","Object","slicedToArray","sortIsOpen","setSortIsOpen","_useState3","_useState4","filterIsOpen","setFilterIsOpen","_useState5","_useState6","userIsOpen","setUserIsOpen","_useState7","_useState8","usernameInput","setUsernameInput","_useState9","_useState10","validatedUsername","setValidatedUsername","_useState11","_useState12","errorMessage","setErrorMessage","inputEl","useRef","useEffect","current","focus","hideSortModal","hideFilterModal","hideUserModal","react_default","a","createElement","Fragment","id","className","user","onClick","event","onuserchange","index_es","icon","faUserSlash","faUser","Modal","size","show","onHide","ModalBody","ref","value","onChange","preventDefault","userInput","target","sanitizedInput","replace","validated","match","length","trim","placeholder","required","ModalFooter","faSortAmountDown","concat","sortby","e","onsortchange","faFilter","activepoll","filtertitles","onfilterchange","filterplayercount","filterweight","hardcoded_polls","updatedAt","closesAt","name","pollThumbs","titles","175914","thumbsup","rank","266192","31481","199478","169786","9209","winners","total_title_votes","126163","28023","218603","237182","298065","73761","141791","162886","ImportPoll","toString","inputValue","setInputValue","loading","setLoading","handleChange","onviewpoll","imported_poll","importpollApi","parseInt","htmlFor","type","checked","map","poll","i","gamecount","keys","votecount","key","Spinner","animation","searchApi","title","url","replaceAll","fetch","then","searchResponse","text","searchText","parseSearchApiXml","gamedataApi","gameId","gamedataResponse","gamedataText","str","game","attributes","categories","mechanics","gamesHtmlCollection","DOMParser","parseFromString","getElementsByTagName","childNodes","forEach","node","nodeType","Node","ELEMENT_NODE","tagName","getAttribute","innerHTML","split","push","childNode","grandchildNode","weight","parseFloat","average_weight","weightname","comment","author","newComment","hasOwnProperty","link","newVideo","parseGamedataApiXml","resp_str","games","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_loop","matchedGame","_iterator","Symbol","iterator","next","done","err","return","poll_id","console","log","filter","voteinpollApi","game_id","newvote","clearmyvotesApi","deletetitleinpollApi","withoutYear","extractYearFromTitle","matchesDate","matchesId","getNonexactSearchResults","_ref","asyncToGenerator","regenerator_default","mark","_callee","titleData","wrap","_context","prev","Promise","all","gameTitle","sent","abrupt","stop","_x","apply","this","arguments","getGamedataResults","_ref2","_callee2","game_ids","gamedata","_context2","_x2","getGamedataForIds","_ref3","_callee3","_context3","_x3","collectGamedataForTitles","_ref4","_callee4","cachedgametitles","game_titles","status","titles_to_api_lookup","get_gamedata_and_activate","get_gamedata_still_ambiguous","all_cached_ids","uncached_game_titles_that_are_numbers","game_titles_that_are_strings","uncached_game_titles_that_are_strings","cached_basetitle_hashmap","all_cached_disambiguous_titles","all_potential_titles","ids_for_gamedata_api","all_new_gamedata","_context4","does_not_exist","already_active","games_byid_not_in_cache","games_byid_dict","games_withdisambig_not_in_cache","ambiguous_cached_games","ambiguous_new_gamedata","new_gamedata_to_activate","new_gamedata_to_cache","cached_games_to_activate","entries","cachedgame","isNaN","Number","includes","cache_entry","unambiguous_name","active","idx","game_title","toConsumableArray","cached_title","entry","ambiguous_name","title_info","JSON","parse","stringify","user_title","disambiguation","ambiguous_entry","sort","b","year_published","all_results_for_title","all_versions_of_this_title","one_similar_result","new_disambiguation","toLowerCase","this_title_version","this_gamedata","new_gamedata","target_year","my_title_gamedata","ambiguous_new_gamedata_bundle","_x4","_x5","validateUserTitles","_ref5","_callee5","cached_titles","user_titles","displayNameForMessages","validation_result","keep_modal_open","collection_result","new_messages","game_id_txt","title_count_already_active","append_titles_alreadyactive","active_title","message_txt","prepend_titles_alreadyactive","title_count_does_not_exist","append_titles_doesnotexist","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","nonexistent_title","_message_txt","prepend_titles_doesnotexist","title_count_to_add","append_titles_toadd","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","inactive_title","_i","_Object$keys","unambiguous_new_title","_message_txt2","prepend_titles_toadd","other_txt","_context5","values","ambiguous_cached_title_info","ambiguous_cachedids_arr","message_str","ambiguous","error_flag","ambiguous_title_info","selected_games_to_activate","ambiguous_gamedata_arr","t0","finish","prepend_titles","append_titles","t1","t2","_x6","_x7","doAddGames","raw_validated_games","add_fn","ambiguous_title_count","selected_base_names","updated_new_gamedata_to_activate","updated_new_gamedata_to_cache","possible_versions","game_version","AddGames","userTitlesInput","setUserTitlesInput","statusMessages","setStatusMessages","gameValidations","setGameValidations","selectedGamesToActivate","setSelectedGamesToActivate","_addRoutedGames","validation_list","routing_treatment","routedgames","pollid","new_list","addto_list","newMessages","messages","updategamevalidations","addRoutedGames","newStatusMessages","handleGetMeStarted","processAddGamesRequest","handleSubmit","requested_games","delimiter","num_nonblank_lines","userTitles","line","Array","from","Set","prependTitles","message","appendTitles","addButton","classes","new_classes","title_to_select","base_name_to_select","updated_selectedGamesToActivate","selected_title","updated_gameValidations","selectUnambiguousTitle","apply_button","active_title_count","cachedata","faLongArrowAltRight","VotableElement","vote","votingtype","preferences","votingon","elementStyle","votable_text","votingonlabel","attrcount","suppresslowcounts","faThumbsUp","data-votingtype","data-votingon","data-newvote","onnewvote","VotingSection","origVotables","counts","orderedVotables","alphabetize","attrCount","attrName","elementid","index","VotingSection_VotableElement","sectionthumbs","attrId","VoteAttributes","votingOn","setVotingOn","handleSectionChange","newSelection","attributestally","playercounts","countsObj","activegamedata","playercount","min_players","max_players","playerCountAttr","countsArray","elementTag","newCount","slice","tallyPlayerCounts","weightcounts","average_weight_name","_weights","tallyWeightCounts","categorycounts","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","category","tallyCategoryCounts","mechaniccounts","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","mechanic","tallyMechanicCounts","TransitionGroup","CSSTransition","in","appear","timeout","classNames","VotingSection_VotingSection","attrthumbs","VoteTitles","titlethumbs","MainControls","addIsOpen","setAddIsOpen","voteAttributesIsOpen","setVoteAttributesIsOpen","voteAttributesErrorIsOpen","setVoteAttributesErrorIsOpen","voteTitlesIsOpen","setVoteTitlesIsOpen","importPollIsOpen","setImportPollIsOpen","showAddModal","hideAddModal","showVoteAttributesModal","hideVoteAttributesModal","showVoteAttributesErrorModal","hideVoteAttributesErrorModal","showVoteTitlesModal","hideVoteTitlesModal","showImportPollModal","hideImportPollModal","updateGameValidations","validated_game_additions","addvalidatedgames","num_title_votes","activethumbs","num_attr_votes","players","handleCopyToClipboard","window","location","href","clipboardElement","document","getElementById","select","execCommand","inlineStyle","position","left","top","backdrop","AddGames_AddGames","VoteTitles_VoteTitles","ondeleteall","disabled","onclearsectionvotes","VoteAttributes_VoteAttributes","ImportPoll_ImportPoll","faClipboard","style","defaultValue","Thumbnail","getAttributeCountLabel","attributecount","reallynarrow","printVoteCount","ThumbsUpSolid","mythumbcounts","extra_text","my_rank","printTitleTally","src","alt","ThumbsUpRegular","GameCardFront","getClasses","section","weight_vote","getWeightVote","supported_players_vote","getPlayersVote","myminplayers","mymaxplayers","votedPlayercount","voted","myweight","votedWeight","thumbnail","yearpublished","ontoggleinspection","ondelete","upvoted_categories","upvoted_mechanics","upvoted_attributes","faTrash","faInfoCircle","Thumbnail_Thumbnail","faUserFriends","min_playtime","max_playtime","faClock","getWeightName","Description","paragraphs","description","paragraph","Comments","comments","Videos","videos","video","rel","GameCardBack","inspectingsection","oninspectionsectionchange","GameCardBack_Description","GameCardBack_Comments","GameCardBack_Videos","defaultProps","GameFooter","gameid","bggLogo","GamecardOverlay","poll_rank","Game","gamecard","gamecardClasses","idunderinspection","GameCardFront_GameCardFront","GameCardBack_GameCardBack","gamecard_overlay","GameList_GamecardOverlay","GameList_GameFooter","GameList","idUnderInspection","setIdUnderInspection","inspectingSection","setInspectingSection","stored_idunderinspection","localStorage","getItem","votecounts","handleInspectionChange","setItem","handleInspectionSectionChange","all_thumbcounts","all_vote_counts","new_vote_counts","myVote","getTotalVotes","sortedFilteredGames","favoredWeights","weights","getThumbedWeights","filterWeight","favoredPlayercounts","getThumbedPlayercounts","filterPlayercount","favoredTitleIds","_Object$entries","getThumbedTitleIds","filterTitles","MainControls_MainControls","GameList_Game","PollInfo","pollInfoIsOpen","setPollInfoIsOpen","hidePollInfoModal","epochToLocal","epoch","d","Date","toLocaleDateString","day","month","year","voteTally","thumbsupVotes","sortedVoteTally","rankStr","endsWith","j","comma","TitleString","Clock","delta","setDelta","deltaDays","setDeltaDays","deltaHours","setDeltaHours","deltaMins","setDeltaMins","deltaSecs","setDeltaSecs","timerId","setInterval","now","getTime","Math","floor","clearInterval","Boardgameinator","_React$Component","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","gamedataVersion","state","activeGameList","activePoll","allGameData","activeThumbs","total_attribute_votes","allThumbs","local","localGameList","routedGames","sortOrder","windowWidth","windowHeight","getCachedGameTitles","bind","assertThisInitialized","addValidatedGamesWithPollContext","addValidatedGames","deleteTitleInPoll","onNewVote","onDeleteTitle","onDeleteAllTitles","onClearSectionVotes","onViewPoll","handleSortChange","handleFilterChange","handleUserChange","updateDimensions","inherits","createClass","routed_new_list","routed_addto_list","routed_pollid","path","search","stored_user","setState","query_string","qs","updated_routedGames","stored_localGameList","stored_activeGameList","stored_activePoll","stored_allThumbs","stored_activeThumbs","stored_sortorder","stored_filtertitles","stored_filterplayercount","stored_filterweight","addEventListener","removeEventListener","innerWidth","innerHeight","self","new_cache_info","gameSet","number","_this2","prevState","votedplayercount","attributeStillOccurs","gameSupportsPlayercount","votedweight","votedcategory","votedmechanic","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","updated_allThumbs","updated_pollThumbs","_clearMyTitleVotesInPoll","all_title_thumbs","mineOnly","whoAmI","count","all_attribute_thumbs","_voteTitleInPoll","_deleteTitleInPoll","title_id","_x8","_x9","_this3","_Object$assign","assign","currentTarget","dataset","voteTitleInPoll","updated_activeThumbs","updatedMyTitleVote","newUserVote","newVotingOn","updated_thisattribute","updated_vote","myCountsOnly","totalTitleVotes","totalAttributeVotes","_onViewPoll","wasRouted","poll_game_ids","cachedGameTitles","poll_thumbs","_x10","_this4","clearMyTitleVotesInPoll","clearVotes","active_poll","_this5","updated_filterPlayercount","updated_filterTitles","updated_filterWeight","updated_activeGameList","updated_localGameList","updated_allGameData","routed_games_treatment","updated_active_poll","poll_is_changing","updatedTitleCount","each_newGameData","cached_game_name","id_to_activate","game_data","history","_this6","new_username","_this7","_this8","styles","reallyNarrow","activeGameData","gameData","faBars","purpleMeeple","Boardgameinator_TitleString","PollInfo_PollInfo","Boardgameinator_Clock","ViewControls_ViewControls","GameList_GameList","React","Component","routing","react_router_dom","react_router","component","ReactDOM","render"],"mappings":"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","file":"static/js/main.c1198b96.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAAbEAAAGxAGo1xHEAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAAMeUlEQVR4Ad2beYzVVxXHz3vAsO/7WkptQaah0oFh1UwshlgltrHY2j/UgokmVq2pVRJFG0hMrFqNIfEPm6gxmhr+qUtsTSOhKoIDRFOkqGUTodSyl51Znt/P773zm/t+83sz7w0/ZpB78ube313OPds9d52c9VJYYkvmFKzwiH4r2q0wR93mUro+YFZ4pc7qfrHNtu1KKc88K42ITDtpsIbJdTbw6VZr/bgQD6wSeUH1Nrdb29d32+5/VNmmR9VuqAAabPG9eWvfLMpmJamTJZRl5VINwo4XrH3tLtv1YlnlDD9umAAW2ILZOcu/LFqnO70w3S7ICwYIiAnktwjaBOQlhHFNRK5otuY/Op4s4xsigCZrGnTJLu2Rjt/hxMI4TI+3CTbaRtkgQT/rHxVTdlVw1s7YW4Irgn6CIJyRmObutJ1vBnmZJMt6yQSjkIy3SetE8EOOD82OFNOzBRMFMJ8Xg2gbgNmBgtElaLFrdtEuqSTWz2BZxZhjduxXjjOrOHMBLLNls6XR50VghBvtjhD77xTAOMJIjn+Y8eGBlYwVXJYALgoQUCnMn2HT9xy1o/s8I4s4xp4FMnBoLH9MzNSRhqn+YugOAYzBfHcBgeEDZqnNUEEoLJV9tLv2tZZnKoBFtmiExv0jTgTMYPLDBNUwH7ZjSEwRgKMj5N691JZO6Pi+/lSmAhCxs0XSLCerv/SPOZcz4aVdx7QZrsGD5bgVKJ6o9cTSrlvWVpqpAAqWv827h4EhJeipAAbb4EgIifb13kcWcaYCyFk7S9wooDWtAEMn5kVVx/iCIRJCGDQg7gu/rzedmQC05B2p6axMO4z9xKKmZnqZQUIcInhIln6guBKpmaxigyYteC7YlcU5a9Ocn1vVZu0zQlSJxUxYVFUaKwJHKAA52cYWa927wBp/KWH8Tj7iJW2czleFMKVSvNJIKauYtdAW3lew3EMirEmTXWz2YQM5K7vT7rJJglpmgBAHa4C3BX+3PV0NpYNqs1v0/Pisnfr9ftt/NcTRXbpqAcjEx4mgldL0h4X0wTTEaMxBW1qba/XRXJ5wYmlNU/O0l9Ca8Krts9eiRRGVEEpoEYmGW8TQz1tswIt/tW1vJMpSP7sVgLQ9SR0+KtP7ojBM7oyFDU6RbaY9PP+YaPIbKxc4MCrp3Kb6HJjFmtgnnLRTdl4WwcaJfIcUbGelqE3t1vpDbaePpJTHWRUFUG/1dUNs2Cdk4l9T7alxi1ICrcI2Y3SwmGa+Z5NDmjzKeqr5ZF8wiubBeVlwRnBawtCGKxYG5SnhpDZcm85b3Xf22tYLKeXCnBK0j1+kffwPVDQ/Wcx4hiA0DdNjBIPENtrPkulkv/7tQwA62EGejgDLOB/17+Ven1hM7lf0lLbUL4T5pbLyrAW26ImcFTYod3hYQododoRgrI2LmPdVGowDvR2cWc0+kU2ctBMaKmejIeNl5TQVNsy0mRs22+Z4U1JmAY3W+IzYeCpshBmjcbazUwUjS/OyD4Gwbl+lwyFy0S7YG3ZcA+RkNAQRRBjE8E9lvWu22tZW8mMBLLRF39Z4fzKsjNbZkU3Toc44AR2RdzMH1zyW8B87Ek2j0A0E4Wc6b3xMDrIl2rNrUfG4ijd6BTfpKdI4c/lwwc2kcaczLXba8VHjBf01bFlL4JIDIcyToAbpgOXlnI6rp2qaaZYxTAEhCKg4026PFjGOMK2zmz0PPjhvYjgckB9kOnUhSOEXdDq5qt80m/E5MfkhZwaGb9eOlr34zW7uTnNXMZpnT8JpFJOnK1ht6uTsh+bbrOUBR4CZM9ZZviKtWyXAC3xNThywyArmy0Xm4pNbHAiV3ExuFQHAhyvXp27yNOONZY7QFrs49lm/YypUvtUCpg9/AOlSKJRNkhQEhV7plonT+EMAkRAw+2sCLiWSi4dbQQLwxyYKHoMhnstronjdGURC/7Xi5UtQyYv/b2N4YRl/SsDM5rwpPpUvWFt88YjmTwr+bYcjP0AjgHyAhiHcTBIJ6SINvdDOJo2gCxUtkY9F9DvdmiJ35Rbb4pnaTOxW5hgvwAkWd3vjojkUJAAetLh6Li6WyKNuX/kNZxStFh23JjZRw7TnwP0SO0ZWgy6kEp9cur6fFlbaAX63VBBFzph3gkQRAN8wjHzZGLFBQhC9LQTogPHjAs4H2sQyeQS/aYYm+HAeosLSH80Dz+6y5iejvYBMY4cY4fx5uVfyRo4URCAGkC7uhI6ZNhFEbwsA80azLHE7aCrSBy3QneTBeVP8Ew39z0t47fE0uNOa12mUr1bhn/XrtOVzZEVvUPwLEb3NeMBElAzp8TS0Vgi75NEeE6/RTpA6qTUbbNFySWalmGtUhdtUb7x+CIVDkkH6xaHe7o53i3FmLyRwc1d0PLbHXhVhHZ5dXbfop/cEGpdm5/Q7JL/wquItM23mb8PDEOWlC4ACD5wN6hRo2BXLDR9gra9o7CCQqFMOSVQeVe0LS0Dj/7J/6hzohGwxGs3Qcl6j/v46y7+m9OXttv1yRGCFP8U5okIh2Xtt7zVFp+UoP+DMe/WJeu0BEWigrwJnFvgid3aiY7is9wEx/qdqaIp9QFeVufaW7/+q16EzHB9ng6T7KtA3hzWd6Sis0T3GHdXQVZUA9KbjC0J2V4hwqg7KbgYnyNDj7CIxFY+WZX4zpLdSulsBcGIkR/i4I8DcecszStCX2nd6oIFzywl6iFFOT+5BvVRb5vUqxd0KQAx/T43HOQK0Pt1myHsWF0Se35cxjLMgY00SOGPtc/o9u9pWx94xjcYuBaBj8nvk+OJ7QLTPQaMfkqYh7Is8mOYabpKOc8qtoNB42A7f3xVNXQpADTfqF0nQO2HsB1LuCnevlsH4BAFXc+VCyD9Tb03DKhFTUQC6FF0h7X/QG4IU7fNspbwDr9G3MUrhtAeHWK6gwpzBdvmTlahLFYAcH/sCvGi0UoRhGE8eKlZC2lf50MmrtFFy0qGS5K3Wcb2fRleqALTZ0Uus3L1hAxYcWVx3hzhJd7FuT1bt9hvNszDDISbwTsxZ/4fTEKQJQHl5PXUtBiTJQyXMP5Sql/c0hlCIBCfprAKOmimahRppD7KCL7Gg82+PO/Wssf+oNg8rvAJSnSj/mlhoeHGPYhjmnn+fYK8ewHBYkaUQECzDNYFzhnj5bJLgMgE0WRN7g7VeCe1wq9J5keE1ao8hjvOE17WN4ZED9/psaLI8jEXzxYfXY8qsQAJ4OLkuKBOAiLhTo/I9IVs3Qvu6lIwYx6pYWPHQQfN15L0TYzckpaY0eHCI5VaQqz9oR5aEiMoEII1/RIVRHqaP5+dKKauxD7NcWx/X8SRpD6S5wOR/BcoJ9hq1x9DMYw7ONgP683p09+kQWygATXm5sntCHEl4lRQ2rDXtps+dve7mOzWnnFNbrCELK0CBWBj/oEG6IxTepylxiH/HAtDG4V2qOLujIB9tM8sbe2ntMVpGw+cEHKgmA5rn0RNCyM4KCpEvCJUofsaKlvd6/7EAJHWNf9m8AiaD+WM+WQgAhi4IjulsPmROJrdfuuG4KgqUvSnggCMcIl5ea8yZMBsk9i4BH0h/ruOKBaAMLX6KgcpsMRMXiV7coxjTT5g3dvkpzc9sti6CFNNH+Ed0NcNMkcVQQKjMZIEAhDffaPZ0xHssAHXWABEeEEAWAU3yMAEItSrt/0jP1rboH6EOShLf8r4gmKnxhIZLWN/La41hfJgsIBSmhDyvwX4djcNYACKizDNxqQQxNOwp4ISY3w8JQg2IiTN6zrremdEZPQI44N/0e0RwTjMGOHraP+3A5Rc6jl+2FvMaC0CFb3sFGrJIYdzyVpeFRS2AGXNFgSb1eDla9UFIRyh8OXzLq9dalzReWaVFhNE/Q+CgAKcJLnDWSgM3wTjWt3TlGwZZX/ygWuli0OHHWlnBc/6NxiDaJej51cYQ64SHzIvRF/SfoPEhS4hPr9W+L4Li5So0IAw02JPh0BqJrDUSHng86HLkGztsx1f4ZukbBXXwkhoc1cc0MmiA1F2bUaUa/niHIfMi4YT+i+QzldBoKKzXMRYr0Xuo4zjQZGIIVUJRlu/tPS4VXtRT6+e9Yjwh6/r4/HSbtl1WsEqF0QkKDa8XvCPhOaTfGp3X/83zkrHu6q5Os6nbJai7VTbDy7OiQfguygJX77bmbR24PVWK+Ydn3fg9oc/lkvrIRHHNn2LmtPD8JWeD1zfbHw5Vg2CezRuq+XujlLFS9SdV06abOrwU3ydaNmnm+U1Y93/8NV0lond+WAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAGIRJREFUeNrcmnmYnVWZ4H/fdre6a+1bUlWpVJLKvu/BgCSBEAK4YIfFkR5x0JHRnnEcbRe01X6ku8clIorQ6vSoEEQgC4GwhJAEklT2pVKVpPZ9uXX35bvfdvqPCgKiLTLT88ec53n/uc95vnt+533Pe97lSEII/n8Y0p+bMH/+Qr75rW8Sj8eZ3tiE7TgMDQ0S8PuZO3c+o6MjWJZFoVBwe73eqYlEYr7H622WoFY4TpkjCEgSSBJpSZLGbcseSKXTbcFg8FwikehzuVwFy7IIh8OcOnWSWCxOSUkpplmgpaWF4kgxO3Y8TiaT+TfXqb4vfCFwHIEkS6iqWi+Es9nl9t5oOepCfyBSLcvIXq8Xl9uDoihIgOM46AWdfC4LkuwYpjHkdrvPKIr8vCzLe4UQPbbtvG+NqH85gwBJkoKh4JpMOvWZgmFszutqaGioG7swSKS4gXBpHZe6homODWGZJqoqE/D7aGiop6q6mlAwJEsStfFYrHZkZHhLPpdLSpK0NxKJPJyIx18X78Pe3zOIABzh4HF7FsycMePrhmHeksqaSt4oIjb4c+aWPQN6igvnNXrSXvoHs3T1pukcLDAeF4wmAMVHKBxi7uzprFq9lk0bb2DhooU4QoQ6r3Rsq69vuL20pHTn4PDQ3+nJ/Nm/hOc9gTiOwHEcT3lZ2RezufwXdMMKhCI19Pf1I6Lf4KZF5yjyB8GpYl6zTTZjkUxHSCaKScbBMUCWoLUrzw8fj3L40CEOHzrED3/wPebPX8Add97FHXfciSwrSnvbxQ+5ve4NyUTin44eOfoPjuPo72WNyp+bEAqF2Lx5c0Nzc/NvMpncf9RcHreQ/Tz5+CPUeb/O5tXjuKQQGBIIgaLIeHwK4ZBMRYVEeYWE4nMYijvMr/Nw30eKaWmFvpE8tm0zNDTIvhee57e/fZKamlo2btoEkuy2bfvaKbU1K0ZGRw6fPn0qYVnW/xnIxk03LNl2x7bd8URqaaS4nNa2Ph7Z/jm2XbeXTdeGQfeACo4qkcoJJtIOWV3g9kgokoQGRCIKUxoUfr07z6JpLkZiJtdXl7GmPMtQ1CZuKSQTcXY++zTtl9r58Ic/TE1NNYWC0VhTU3vz2TNnXh8bGxt+3yDXX79h1cMPP7xzaGh0SjBcwc5d+3jiZ5/mn76UYeWycshL2BJc7rM4fdFkdMLByMBgr+DwSQNvUKa0WEYUBFqRxOVem2INfncgzz3f3s1d993Nf5hpUJ3v4sJQgZSl0HbxAvv2vcD6D6xnwcKFxKLRyJo1a7e2HG95Ix6PD/xFIC63m9s+9OF523/0o2fHo7FqSStm764djLY/wE8ejFBX4wfDYSzhcOy8iWPDolkuqgMqflRKihQqAiovHy5Q3yDj90ogoKdTkIjGuZC8hs/e/1+QfLV4FtzGii23ck+TjjJ2gRODDkOjozzxxOOsXruGlatWEY8n/YsWLdr06oFXX9Z1few9g1RWVpU9+tijv0P2zByPO4z1PE1j4Pvcd1cJPlUDCS712gyMOyyepdFYp+KWwOWWcIVAc4Nblgi6ZS71W8yYoRJLChKjBic6Anzkr7dTP6Xyqi8EPGV4Fmzlg+uWsDR/lINtccazJnv27OLGGzcza9ZMdL0QrKqqWvnagQNPA7n3BPL1B77xk5Wrrrnhjdd+S73/x6ya/RxN84JIQkEAB1oK6CasXejCLU+uJ2PA+Q6LY6dMhqIWWhBqwirpjE1trcTIiMNgd4ac/04+9ld3gp0HqwC2CbYBjgnls5l+zSY2itd57ewwfQmdI2+8zrZt2/B4PUQixVXpbLai7WLrs38WZP211935ne9865vdPQPohsUX//YhXjpg8PJBk2P7C+x61aCpUWX9cjcYAmSIJh0u91mEZJXaoEaJR2VgwKJrJMfshiCBkENqPIesXEc+W8zZSx1Mra3Aq4IwC5MglgFGGryllK/awgbtNC8e76VtYIyu7m7uvfdexsejNNQ3LDh4+FCHkU6fLwJcgPsPQTTNVfLoo4/+i8vtKRGSyhNP/Jbdu1+jvdOk60KBW+f4uPuTRSxZ6AJdgALxjGBswmF6hYadUfB6JEZiBpmsiTd8E57gTbi1pbhcy9E8c8ikE5w6c4HFK5YS8Kqg5ye1YV8VIw2Kj5IF61iYOcxvjo1zoa2NqVOncu2115LJZHGEmHvl2NHHqyAfAIJ/CHLz1q2fv+++/3T74HCU7u4uvvaVL+LYDoqq8bX/XMrnvhIhUiyTGndwgFQeeoYtmqaopMdkVFniTIdB10CBWfNupXWgGkX1omll+HyVaLJAqB4oaeLchXYaKn34vG4w9UkYxwTHAiMHWpC6mVMJde7l+U6bM2fPcc8nPoFlO4RC4ZKD+/cntGz2sKooKLL8DpCSBx/87k+D4eKI5ah851vfpvNKG1s3FfOL/1nJtrv89HVbvHHWYCThMB4TdPdZNDdqWEkZ25DoGrIZHEty08Yb6Eqvo3lmJUGvi3CRgs+j4hTy9GS83PTRO/jH7b/gyInzbFk3F8k0wHqbVmwTjCxSeBrLquDU0WOc6E1QUVnOxg2bSKdSjKYS0145e/ZXKSHyMSGQ36SY1th028qV6xpGxk1OnjpDxHWQV39Tz9OPVLFytZuO8yZ79xdwqzKlEZnaSpn1y93IWRkjJ9E5ZJLIGWxYEyYw5SM01EQwXFPIhRfyuyNDXOroJppzGM5pHD50jKjppq92M3tfPgKSBWb+XSLSUeS5W/nybXORgF/9egeWZeLxuFm3bn1DeVHRbQ0eD40+31sgy5bM+uhw317GLv8t1zd+k6ceq2T9dX6cgsOZFoN4WnDPh72sn68xp0aloVJBNiX0tMTpDoO847Bshkw0Wwq+OtKpDJGKqcyY2URfNMvN9/4dxwccJmJxDr32KiXNK7GnLuKXx0chFUUydTDy7xQ9DUJh9YabuXkanD19mmNHj1JVXcWU2hrqZ826PWYYZBxnEkRW5GmrFkVWFEZ+yIzK44xFMzz3vM1zL+TYdaCA6cCShRpev4QakHCFJIQmMZpxONiaJ1AiWDTNTV6Hp/bpFJDQ9TzRiThX2ts50d7PvM/+Mz/95a+5tirJ7ECSoZ4ruEWOC6Mqw2NjIAoIM/8ucXIJmDKfe9ZPB2z2PPcckUgYn9fLvMVLVsiOM121bVSgJhAIrth029dCqZybo+dP88beT3HrZjdzZ3lxuSRSSYeXDhUAiKcFhilQJNBkWDTXRbFbRTjQ1muiyBaJVJb98VIqc/1ENAvX9DVULdtAT18LIZ+L2poyvlWSprNwkF8zwcHjST62eRWYBn80cPf4WLNkLsGfd/D8vhf5+7//Dh6Ph6amGcGs5lqZNg1DBWaVl5evCEdCjPX+iqbQPpo/5sOwFVovmQgDQgGZxioFv0cimXEwbKgslQn7FBKDErKAA6cLqIpELFpgx/Ekl0ZSBEU30eAMnPJGookYybLZXO5pZfmKebhcCp7jl3no9gYOn+3j8ImLrJ1Xh10w351GSIKy+gaumwa7B0YZHhomFApRWl5OeTi0XKRSo2pFReWsefPmzdA0F3jn8tKBk5w7dog7P1rO2pUaVRUy2CrYAiSoVN5ydBM9go4+m10teSJehY2LC5zILGTGcIZ7l6jMjzRx//9uZXTqDIpxoY8N4Z+lkU/r5AQMxzPYkkw0maRnwGJtUxmSZb9LK8KywF/Mtc0hnu2KcbH9IiuWryIUCEAg2DyUSPSooXCovrKyshoE/nADw/FSdu7PcfDQAL/5H3PoWqCBPIwwPeRNQJ5kSiYdcnlBKiVYPEPj5uUSP95biW/+nQS6XmDJ3Z9GSU3wN+uKebzrOH29Pm5pnKB+6jQKxmRuMb9pCj6vm96RBKKQJp1KUOTSeFdmKEmgasytLQWSjI+N4/a4cbvd+IPBasnlqlNdmlbj8XjKhePg2CaZdByACr/DkkgFun0Nu0/tob5pjEhI/j2AR4ZIqcryeo2Ay2Hv0RQHzXsoG/wR5XUL0C0bFYmqYj9filgUjBiKqwndEr8PFv1FHmzLIRIqIjoYp5BN45d94Ih3F3mESiRcBEAqnUVVFTRVxePxlGiqVqnKshxWFDngCIFAYJkGAEG3jNul4Q2m2Lyyitc7o4yl8yyd7aUspOLygMjJ9LWneaZnCYs33M89E0Mke5uJ5iJYRgGXomKYFjnL4ULHCMvmTkMIC/HmEgUks3kMx8axHcx8Dtzy20DephHZg9+t4QV0w0BGQpZlFFX1y7IUVG3HkWzblmRJRpZkXC43V10yci5GLmti533MDszlSOcgPz83xJQpglCRhldTsFI5KiobSCcmONNyiiVL1+IvZMnn8oRKgvgDRTz25Mucae+jNBJkamUxmjZ5zmQkzl0ZYP78Bl7sHCSXzSEFXAjLeSvER4DiBj2NlE+iAC6XhnO1JGVZluI4jqoahpHK5/SMJElFCIGvaFJ9hqNSSAxQluyhLFSH8JYxZ+FUrownODbcTnljjEXzwYWPb/xymGW+HP6gnyut57lx01qKQ34kWcJdWkZdVRnL5zbRPzZBe+8wFcUhXJrCwFiMsppiplUUEwgUkc2OgeVBmM4f1BAlRP9JCtkUeSAYCGBZNqZpoOt53TStnBqPx0cGhgYnkESFrEhEIhEARnMOsYJEJDWMkRhFrpyNhGBOmYum8CI6R5IMDES5YriJlW1luOMkH7zxA4z1dOBz8mDoFBwVze9ny9YPkBwcplmuJFcwmUhl0U2L1UtmUBIoIp3MU19dwkRPF1QXwZsgkgSOgxPrRcrGiBdkbKC6shJdz6MXCqTi8YSTz0Xl6Ph43/nz50dMw0ASUN8wDRSFwYzNREpH9hXhpIawhy7gmDqFfB6sFLPKVVbUVtLkqSQc9lOXOM5A+0XitofhnERecbNj1yHS6SxaOIinvBS9YCIDVcVBplWW4JNVMqk8jnAoLomQcWREIYuw8ghLR9gG9kgropADWaI/rlMULmFW8ywSiQTpbAY7FhuNCDGoAh2xiYnuiYkJNE2jrn4akXCY+ESctqjBSltHClUjxjtwzCxySQNCdmEIHbci8DoJLNlNXUkRzZnDnM5HyI5qvH4ow5lehwXzp7M47MEXCaKpCsnBMUzDQlImPZIkS9iWTVkkQJvjJZdJo2oukGScRD8iG0WuqoZ8D691FyirbKKqopILrRcZGhqGTKavGK7IQGsqmTx+8sRJgkE/5eUVNDXNBBwO9ApIj6GEakHRELk49vBFnMwYwtJxzAIuO0lGt+jMeil2F1jvG2adq5fNoXH+dmGekeF+hsdTqBJoPhfF9eW4/G4cx3lHFdOtySjhMpLpDLKt48R6ELFe5EgDsmOQ0w0OdufZcuMmZEUmr+tcudSOW4iWEJyRgS7g2Cuv7rd8XjeaprFm7TUAHOg1GJlIoyoqUrgWhADbRMR7cRKDWHqWKjcsaPtnprtiOLqBYZrYloVpC0r1Cco7XuPwhR5iqSyapqIoMsU1xRSFixC28/vLz6UqBENh4sk0UqIfkRkDRYPiOlzpPlrHLC5nNG65+UYmJmJksznOnTpJuKjouLektEtGURyg9dVXXjmdy+UQjsm6a9bj8njpixXYe9lATnUiVy6Y3Dtp0ouQT2DF+3Ebcb4wrYvlkTyFgg5W/qrksIRDs9FJKHqJ/ecGOdPejSNLaD4vgdpygnWVyJ4iHNnDleEMJ08dp8wZxdbTYBlIFY1gpcCY4MlzaZrnL2b50mUMD4/SP9DPaFdXW9jrPelSlexk7VeWzf7+/meOHjmybOnylUxrnM6WLVt5+qkdPHLK4I55vaglcxC1i3F6j4IrAJI82V7IpzAkGUlxgapN/i5N2r8DuGWHad3Pk1y4lrbLvXz7wV8xtdzDjc0hXJqEyOskRiaw4v3cXZyjrMiHbZmowTBy7UKk1p2MZjV+eyHHf33wrwEoFHRefulFfLr+vObzZRwhUBBi0mRgOJfPf/yObX/lGRkdp3F6E3v27KJnPMP8Ci/z/KPYjddBZhjyCZBdb7lIBDj21WrI29JVx8JxbIJ2mvMdfXzwU/czvyxIb3sHq5Ivskj0UVPoY3ZRjDk1MkGPxHAyw3DGJlq1ieRoN55sJ9tfz3DGmcaPt3+f3t5++gf7+flDDxWqJekLsiwP2kK8I2ePd3Z2Nqxbt27plNpavP4QODYtx47QNgEfmg5BKwpzbkHEeiGfmrThNy+tN03uzeMrnMkNchzcLpVszxW6iqaz+gNLaCit4vJQnHK9j7TloS+v8OD+JE+NzuNQ8LMc9G7jcGo2R/Xl7B6s5bFdL/OPP/w+s5vn0Nffz1NPP8XlQ6/tmeL3f8+5qggF+aopSBLCcTq7urruvOeeT3ii0QkWL11Oy7EjnO/oI2q6uXVqGscwkOfdhkgOQmZkMnz4c109IVPhNzk+UKBx4xbCGASKp3DGKOdfBkv5+ehGOgObOXp5kMGBDtwlTUiBWnRDsPPJ73L7tpt54GsPcOrUaQYGB3n4+98z6gWf8SpKrzQZkL8TBFmODvT1eUOR8PoNGz5IIplh0eIl7Nz5DCd7UxQVFXFN6QRWvoA8/xYwc4hYz+SnZOWPNodcMuCkeG3Eyw9e6OORX++jo3+Uxopilq5YwgdXN3LojQsoFRuYMW81XtNg5v7HkFOjHDq5k7Jwjid+s4O+gUESiSQ/eeRhxk+f/kVNUdFDthCIq/LWGXnrrJxsaWm57vrrN9QWR0KEIyU0zZjJSy++wL5LWUr9XlaHR7En+pBmb0Yub0KkRkBPTJrT2w67W4GkrvPD6FZ2e/8GpWod3d3jvLDnWZ556Q2G02FiejkjeoiE4UPFwl3dTInLRfuBn9Krpnj+uefxeIvo7e3lhZdeZNdjj3U1FRV9wpbllCUENmD/idqvYRjG6TOnT9++bdsdnmwmw/QZs5k5cxYHDrzCrtY4HpeXa8ozSEOnsQNTUZo3IUWmINk2opAGM4fiWFhWhgf6NtJZez9lRSqqK0jtjLVU1i/h8oWDHDl5hgFtNZ7SRWgYyKoHybbYfexxUkGDPTt3U1dXz8XWi7S1t/PdB75uTbOsT7ocp0WYJrxN/lR/ZHh0dGT43Pnzt919993EEzFmNc9l/sIFvLr/FfZejNGZlFk11UUk04Y90gWBapTGVShTlyGVNuEuq+B/nSlw0PdJasM+svk8Wd3AsQuESqYSiNTS27qbWP8pqusXEy5vJDHew8tPfpW64hx7du+lurqW8+fOMxYd55tf/QqBaPSrxbL8mHAc+AP5040eSTrb092dPnvmzKaPfuyjpBIJGhqa2HLzVrq6u9hz7BI7zmZxu73MDev44q2IgfM4mWEUt0JCDfMPZxoor1uFsHTS+lsJlW0ViFQ2Yeh5RnuOER2+zMRYL6f2b+eWG5ez46lnAIW2tosMDA7xwFe+jNXd/f0aj+drtiwjVPVd8udab0e6u7tTLceObdyyZYukINA0Fx+5fRtT6xs4eraNHS2DPHk+h6q6qCpyiJhjKMnLnHzjOAeUj1FZVUe+YGDaoCgaiupCVlwgCWTVTW/bK+jpUabXqPz4oYf4b//9S/R09zA0OMiF1la++qUvIg8MfG+K2/0F502n9EdEeo/d37uampq2f+vb34ksW76CsbEogVAEy7LYvftZfvazx+jvvkxYhRW1KjfMcHMl46d96pepqqghrVsYhkFBT5NLR4mP9zDYdRInP8KiBTO479OfYeutHyKdTNHX241pmezbt4/tP9qeEKnUl+eo6k81Rfm9E3lfTziuhjDgOItVVf3pXR//+LJPf/ozeNwe0tk8peWVSAiOn2jh1Vdf48Sp03R3XKGg59BUDUVzgzT5+kE4BgGfi1mzZrF48SJu2nILCxYtIZfN0tXVgWPbdHd38+ijj/D64cMnhRD3ByXpSJOi4P6/BjLpmgMI8fnKqqrP3/upTxXfsOkGNM2NadkEQyGK/EFs2yaTyZBMxMnlsphGAUmW8Hg8BIMhiktKCQQCyMDExAQT0XEMQycanWDv3ud4cscTsXw+/xDwAyAelCT+PUDefMfRBHxual3dHTfdtCWyZvUaamtrcXu8IEkoioosy6iqhiRftV8hsB0Hy7YwCwUMo0AymaSnu5tDhw+x/5WXY7FY7ElgO9D25l/9+4K8BVQPfMTtcd82ZcrUhQsWLPQ11DdQVVNNWVkZHrcHTZssuJmmSS6XZWBggNGRUS5fvsT58+dy49Hxs5ZpPQP87mpu9I7x/wbk6k5fDXdmAUuBFUjSNLfbXe52uYoVVfUhBJZl5fVCIWYaxujVBbcAJ4D2q5fzHx3vFeT9PXN6953jIMQlIAmMIMT0gq7XFnS9HPBfnZUBxoEBoAO4CAz/WxB/yfjXAQCmtB0gQCgyfAAAAABJRU5ErkJggg==\"","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport Modal from 'react-bootstrap/Modal'\nimport ModalBody from 'react-bootstrap/ModalBody'\nimport ModalFooter from 'react-bootstrap/ModalFooter'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faSortAmountDown } from '@fortawesome/free-solid-svg-icons'\nimport { faFilter } from '@fortawesome/free-solid-svg-icons'\nimport { faUser, faUserSlash } from '@fortawesome/free-solid-svg-icons'\n\nexport const ViewControls = (props) => {\n\n    const [sortIsOpen, setSortIsOpen] = useState(false)\n    const [filterIsOpen, setFilterIsOpen] = useState(false)\n    const [userIsOpen, setUserIsOpen] = useState(false)\n    const [usernameInput, setUsernameInput] = useState('')\n    const [validatedUsername, setValidatedUsername] = useState(null)\n    const [errorMessage, setErrorMessage] = useState('')\n\n    const inputEl = useRef(null)\n\n    useEffect(() => {\n        if (userIsOpen) {\n            inputEl.current.focus()\n        }\n    })\n\n    const showSortModal = () => {\n        setFilterIsOpen(false)\n        setUserIsOpen(false)\n        setSortIsOpen(true)\n    }\n\n    const hideSortModal = () => {\n        setSortIsOpen(false)\n    }\n\n    const showFilterModal = () => {\n        setSortIsOpen(false)\n        setUserIsOpen(false)\n        setFilterIsOpen(true)\n    }\n\n    const hideFilterModal = () => {\n        setFilterIsOpen(false)\n    }\n\n    const showUserModal = () => {\n        setSortIsOpen(false)\n        setFilterIsOpen(false)\n        setUserIsOpen(true)\n    }\n\n    const hideUserModal = () => {\n        setUserIsOpen(false)\n    }\n\n    const handleChange = (event) => {\n        event.preventDefault()\n        const userInput = event.target.value\n        setUsernameInput(userInput)\n        const sanitizedInput = userInput.replace(/[^A-Za-z.-]/g,\" \")\n        let validated = null\n        if (userInput.match(/[ ]{2}/g,)) {\n            setErrorMessage('ERROR: repeated spaces are not allowed')\n        } else if (userInput.length < 3 && userInput.length > 0) {\n            setErrorMessage('ERROR: username must be at least 3 characters')\n        } else if (sanitizedInput !== userInput) {\n            setErrorMessage('ERROR: invalid characters were detected')\n        } else if (userInput.length > 16) {\n            setErrorMessage('ERROR: username cannot be more than 16 characters')\n        } else if (userInput.length !== 0) {\n            setErrorMessage('')\n            validated = userInput.trim()\n        }\n        setValidatedUsername(validated)\n    }\n\n    const handleSubmit = (event) => {\n        if (validatedUsername !== null) {\n            props.onuserchange(usernameInput)\n        }\n    }\n\n    const userIcon = (user) => {\n        if (user === null) {\n            return (\n                <span>\n                    <FontAwesomeIcon icon={faUserSlash} />\n                </span>\n            )\n        } else {\n            return (\n                <span>\n                    {props.user} <FontAwesomeIcon icon={faUser} />\n                </span>\n            )\n        }\n    }\n\n    const handleUserClick = (event) => {\n        if (props.user === null) {\n            showUserModal()\n        } else {\n            setUsernameInput('')\n            props.onuserchange(null)\n        }\n    }\n\n    return (\n        <React.Fragment>\n        <div id=\"view-controls\">\n\n            <button className={(props.user === null) ? \"fa fa-button user loggedout\" : \"fa fa-button user\"} onClick={handleUserClick}>{userIcon(props.user)}</button>\n            <Modal size=\"md\" show={userIsOpen} onHide={hideUserModal}>\n                <ModalBody>\n                    <h4>Enter a username for yourself:</h4>\n                    <section id=\"input-username\">\n                        <section className=\"buttonrow\">\n                            <input ref={inputEl} size=\"30\" value={usernameInput} onChange={handleChange} placeholder=\"(your username)\" required/>\n                            <button onClick={handleSubmit} className=\"default-primary-styles\">OK</button>\n                        </section>\n                        <p className=\"error\">{errorMessage}</p>\n                    </section>\n                </ModalBody>\n                <ModalFooter> \n                    <button className=\"default-primary-styles\" onClick={hideUserModal}>Close</button>\n                </ModalFooter>\n            </Modal>\n\n            <button className=\"fa fa-button\" onClick={showSortModal}><FontAwesomeIcon icon={faSortAmountDown}/></button>\n            <Modal size=\"md\" show={sortIsOpen} onHide={hideSortModal}>\n                <ModalBody>\n                    <div id=\"gamesorting-controls\">\n                        <h4>Order the board games by the...</h4>\n                        <button className={`default-secondary-styles ${(props.sortby === 'alphabetical') ? 'active-button' : ''}`} onClick={ (e) => props.onsortchange(e, \"alphabetical\") }>alphabetical order</button>\n                        <button className={`default-secondary-styles ${(props.sortby === 'maxtitlevotes') ? 'active-button' : ''}`} onClick={ (e) => props.onsortchange(e, \"maxtitlevotes\") }>most title votes</button>\n                        <button className={`default-secondary-styles ${(props.sortby === 'maxattrvotes') ? 'active-button' : ''}`} onClick={ (e) => props.onsortchange(e, \"maxattrvotes\") }>most attribute votes</button>\n                        <button className={`default-secondary-styles ${(props.sortby === 'minplaytime') ? 'active-button' : ''}`} onClick={ (e) => props.onsortchange(e, \"minplaytime\") }>shortest playtime</button>\n                        <button className={`default-secondary-styles ${(props.sortby === 'maxplayers') ? 'active-button' : ''}`} onClick={ (e) => props.onsortchange(e, \"maxplayers\") }>most players</button>\n                    </div>\n                </ModalBody>\n                <ModalFooter> \n                    <button className=\"default-primary-styles\" onClick={hideSortModal}>Close</button>\n                </ModalFooter>\n            </Modal>\n\n            <button className=\"fa fa-button\" onClick={showFilterModal}><FontAwesomeIcon icon={faFilter}/></button>\n            <Modal size=\"md\" show={filterIsOpen} onHide={hideFilterModal}>\n                <ModalBody>\n                    <div id=\"gamefiltering-controls\">\n                        { props.activepoll.id !== 'local' &&\n                        <p className=\"warning\">INFO: Filtering is disabled while a poll is selected.</p>\n                        }\n                        <h4>Show me only the board games matching an...</h4>\n                        <button className={`default-secondary-styles ${(props.filtertitles) ? 'active-button' : ''}`} onClick={ (e) => props.onfilterchange(e, \"titles\") }>upvoted title</button>\n                        <button className={`default-secondary-styles ${(props.filterplayercount) ? 'active-button' : ''}`} onClick={ (e) => props.onfilterchange(e, \"playercount\") }>upvoted player count</button>\n                        <button className={`default-secondary-styles ${(props.filterweight) ? 'active-button' : ''}`} onClick={ (e) => props.onfilterchange(e, \"weight\") }>upvoted weight</button>\n                    </div>\n                </ModalBody>\n                <ModalFooter> \n                    <button className=\"default-primary-styles\" onClick={hideFilterModal}>Close</button>\n                </ModalFooter>\n            </Modal>\n\n        </div>\n        </React.Fragment>\n    )\n}\n\nViewControls.propTypes = {\n    user: PropTypes.string,\n    activepoll: PropTypes.object.isRequired,\n    sortby: PropTypes.string.isRequired,\n    onsortchange: PropTypes.func.isRequired,\n    filtertitles: PropTypes.bool.isRequired,\n    filterplayercount: PropTypes.bool.isRequired,\n    filterweight: PropTypes.bool.isRequired,\n    onfilterchange: PropTypes.func.isRequired,\n    onuserchange: PropTypes.func.isRequired,\n}","import React, { useState } from 'react'\nimport { importpollApi } from './Api.js'\nimport PropTypes from 'prop-types'\nimport Spinner from 'react-bootstrap/Spinner'\n\nexport const hardcoded_polls = [\n    {\n        id: 1610263515000, // createdAt\n        updatedAt: 1610263515000,\n        closesAt: 1619301600000,\n        name: 'Fake Poll A, VOTING DISABLED',\n        pollThumbs: {\n            titles: {\n                175914: { // Food Chain Magnate\n                    'thumbsup': [{user:'Fran', rank:1}, {user:'Filipe', rank:1}, {user:'Fiona', rank:1}, {user:'Mendy', rank:1}]\n                },\n                266192: { // Wingspan\n                    'thumbsup': [{user:'Wesley', rank:1}, {user:'Will', rank:1}]\n                },\n                31481: { // Galaxy Trucker\n                    'thumbsup': [{user:'Gary', rank:1}]\n                },\n                199478: { // Flamme Rouge\n                    'thumbsup': [{user:'Fred', rank:1}]\n                },\n                169786: { // Scythe\n                    'thumbsup': [{user:'Sue', rank:1}]\n                },\n                9209: { // Ticket To Ride\n                    'thumbsup': [{user:'Tina', rank:1}, {user:'Timothy', rank:1}]\n                },\n            },\n            winners: [],\n            total_title_votes: 11,\n        }\n    },\n    {\n        id: 1608456120000, // createdAt\n        updatedAt: 1608456120000,\n        closesAt: 1610263498000,\n        name: 'Fake Poll B, VOTING DISABLED',\n        pollThumbs: {\n            titles: {\n                126163: { // Tzolk'in\n                    'thumbsup': [{user:'Terry', rank:1}, {user:'Tina', rank:1}, {user:'Mendy', rank:1}]\n                },\n                266192: { // Wingspan\n                    'thumbsup': [{user:'Wendy', rank:1}, {user:'Wally', rank:1}, {user:'Mendy', rank:1}]\n                },\n                28023: { // Jamaica\n                    'thumbsup': [{user:'Jerry', rank:1}]\n                },\n                218603: { // Photosynthesis\n                    'thumbsup': [{user:'Patty', rank:1}]\n                },\n                237182: { // Root\n                    'thumbsup': [{user:'Randy', rank:1}, {user:'Mendy', rank:2}]\n                },\n            },\n            winners: [126163, 266192],\n            total_title_votes: 10,\n        }\n    },\n\n    {\n        id: 1610263992000, // createdAt\n        updatedAt: 1610263992000,\n        closesAt: 1612941797000,\n        name: 'Fake Poll C, VOTING DISABLED',\n        pollThumbs: {\n            titles: {\n                298065: { // Santa Monica\n                    'thumbsup': [{user:'Santa', rank:1}, {user:'Mendy', rank:1}]\n                },\n                73761: { // K2\n                    'thumbsup': [{user:'Santa', rank:2}, {user:'Mendy', rank:1}, {user:'Keith', rank:1}, {user:'Karl', rank:1}]\n                },\n                141791: { // Pinata\n                    'thumbsup': []\n                },\n                169786: { // Scythe\n                    'thumbsup': [{user:'Santa', rank:3}]\n                },\n                162886: { // Spirit Island\n                    'thumbsup': [{user:'Sue', rank:1}]\n                },\n            },\n            winners: [],\n            total_title_votes: 8,\n        }\n    }\n]\n\nexport const ImportPoll = (props) => {\n\n    const [ inputValue, setInputValue ] = useState(props.activepoll.id.toString())\n    const [ loading, setLoading ] = useState(false)\n\n    const handleChange = (event) => {\n        if (!loading) {\n            setInputValue(event.target.value)\n            if (event.target.value === 'local') {\n                const no_poll = {\n                    id: 'local',\n                    name: 'local',\n                }\n                props.onviewpoll(no_poll)\n            } else {\n                setLoading(true)\n                const imported_poll = importpollApi(parseInt(event.target.value))\n                props.onviewpoll(imported_poll)\n                setLoading(false)\n            }\n        }\n    }\n\n    return (\n        <React.Fragment>\n        <h4>Select a group poll</h4>\n        <h6 className=\"warning\">(UNDER CONSTRUCTION)</h6>\n        <div id=\"import-poll\">\n\n            <label \n                htmlFor=\"poll-local\">\n                <input \n                    type=\"radio\" \n                    id=\"poll-local\" \n                    name=\"gamelist\" \n                    value=\"local\"\n                    checked={inputValue === 'local'}\n                    onChange={handleChange} />\n                &nbsp;No poll</label>\n\n            { hardcoded_polls\n                .map( (poll,i) => {\n                    const gamecount = Object.keys(poll.pollThumbs.titles).length + ' ' + ((Object.keys(poll.pollThumbs.titles).length === 1) ? 'game' : 'games')\n                    const votecount = poll.pollThumbs.total_title_votes + ' ' + ((poll.pollThumbs.total_title_votes === 1) ? 'vote' : 'votes')\n                    return (\n                        <label \n                            key={i}\n                            htmlFor={\"poll-\" + i}>\n                            <input \n                                type=\"radio\" \n                                id={\"poll-\" + i} \n                                name=\"gamelist\" \n                                value={poll.id}\n                                checked={inputValue === poll.id.toString()}\n                                onChange={handleChange} />\n                            &nbsp;{poll.name} ({gamecount}, {votecount})&nbsp;\n                            { loading && inputValue === poll.id.toString() &&\n                            <Spinner animation=\"border\" size=\"sm\" />\n                            }\n\n                            </label>\n                    )})\n            }\n\n        </div>\n        </React.Fragment>\n    )\n}\n\nImportPoll.propTypes = {\n    activepoll: PropTypes.object.isRequired,\n    onviewpoll: PropTypes.func.isRequired,\n}","import { hardcoded_polls } from './ImportPoll'\n\nexport function exactSearchApi(title) {\n    const url = 'https://boardgamegeek.com/xmlapi2/search?type=boardgame&exact=1&query=' + title.replaceAll(' ', '+').replaceAll(':', '+')\n    return (\n        fetch(url)\n        .then(exactSearchResponse => exactSearchResponse.text())\n        .then(exactSearchText => parseSearchApiXml(exactSearchText))\n    )\n}\n\nexport function searchApi(title) {\n    const url = 'https://boardgamegeek.com/xmlapi2/search?type=boardgame&query='+ title.replaceAll(' ', '+').replaceAll(':', '+')\n    return (\n        fetch(url)\n        .then(searchResponse => searchResponse.text())\n        .then(searchText => parseSearchApiXml(searchText))\n    )\n}\n\nexport function gamedataApi(gameId) {\n    const url =  'https://boardgamegeek.com/xmlapi2/thing?type=boardgame&stats=1&ratingcomments=1&videos=1&id=' + gameId\n    return (\n        fetch(url)\n        .then(gamedataResponse => gamedataResponse.text())\n        .then(gamedataText => parseGamedataApiXml(gamedataText))\n    )\n}\n\nfunction parseSearchApiXml(resp_str) {\n    let games = []\n    const responseDoc = new DOMParser().parseFromString(resp_str, 'application/xml')\n    const gamesHtmlCollection = responseDoc.getElementsByTagName(\"item\")\n    for (const matchedGame of gamesHtmlCollection) {\n        let game = {}\n        game['id'] = parseInt(matchedGame.id)\n        matchedGame.childNodes.forEach(\n            function (node) {\n                if (node.nodeType === Node.ELEMENT_NODE) {\n                    if ( (node.tagName === \"name\") && (node.getAttribute(\"type\") === \"primary\") ) {\n                        game[\"name\"] = node.getAttribute(\"value\")\n                    }\n                    if (node.tagName === \"yearpublished\") {\n                        game[\"year_published\"] = parseInt(node.getAttribute(\"value\"))\n                    }\n                }\n            }\n        )\n        if (\"name\" in game) {\n            games.push(game)\n        }\n        if (!(\"year_published\" in game)) {\n            game[\"year_published\"] = null\n        }\n    }\n    return games\n}\n\nfunction parseGamedataApiXml(str) {\n    let game = {\n        \"attributes\": {\n            \"categories\": [], \n            \"mechanics\": []\n        }\n    }\n    const responseDoc = new DOMParser().parseFromString(str, \"application/xml\")\n    const gamesHtmlCollection = responseDoc.getElementsByTagName(\"item\")\n    if (gamesHtmlCollection.length) {\n        game[\"id\"] = parseInt(gamesHtmlCollection[0].id)\n        gamesHtmlCollection[0].childNodes.forEach(\n            function (node) {\n                if (node.nodeType === Node.ELEMENT_NODE) {\n                    if ( (node.tagName === \"name\") && (node.getAttribute(\"type\") === \"primary\") ) {\n                        game[\"name\"] = node.getAttribute(\"value\")\n                    }\n                    if (node.tagName === \"thumbnail\") {\n                        game[\"thumbnail\"] = node.innerHTML\n                    }\n                    if (node.tagName === \"description\") {\n                        game[\"description\"] = makeReadable(node.innerHTML)\n                    }\n                    if (node.tagName === \"yearpublished\") {\n                        game[\"year_published\"] = parseInt(node.getAttribute(\"value\"))\n                    }\n                    if (node.tagName === \"minplayers\") {\n                        game.attributes[\"min_players\"] = parseInt(node.getAttribute(\"value\"))\n                    }\n                    if (node.tagName === \"maxplayers\") {\n                        game.attributes[\"max_players\"] = parseInt(node.getAttribute(\"value\"))\n                    }\n                    if (node.tagName === \"minplaytime\") {\n                        game.attributes[\"min_playtime\"] = parseInt(node.getAttribute(\"value\"))\n                    }\n                    if (node.tagName === \"maxplaytime\") {\n                        game.attributes[\"max_playtime\"] = parseInt(node.getAttribute(\"value\"))\n                    }\n                    if ( (node.tagName === \"link\")\n                        && (node.getAttribute(\"type\") === \"boardgamecategory\") ) {\n                        game.attributes.categories.push(node.getAttribute(\"value\"))\n                    }\n                    if ( (node.tagName === \"link\")\n                        && (node.getAttribute(\"type\") === \"boardgamemechanic\") ) {\n                        game.attributes.mechanics.push(node.getAttribute(\"value\"))\n                    }\n                    if ( node.tagName === \"statistics\") {\n                        node.childNodes.forEach(\n                            function (childNode) {\n                                if (childNode.tagName === \"ratings\") {\n                                    childNode.childNodes.forEach(\n                                        function (grandchildNode) {\n                                            if (grandchildNode.tagName === \"numweights\") {\n                                                game[\"num_weights\"] = grandchildNode.getAttribute(\"value\")\n                                            }\n                                            if (grandchildNode.tagName === \"averageweight\") {\n                                                game.attributes[\"average_weight\"] = grandchildNode.getAttribute(\"value\")\n                                                const weight = parseFloat(game.attributes.average_weight)\n                                                let weightname = null\n                                                if (weight < 1.5) {\n                                                    weightname = \"light\"\n                                                } else if (weight < 2.5) {\n                                                    weightname = \"medium light\"\n                                                } else if (weight < 3.5) {\n                                                    weightname = \"medium\"\n                                                } else if (weight < 4.5) {\n                                                    weightname = \"medium heavy\"\n                                                } else {\n                                                    weightname = \"heavy\"\n                                                }\n                                                game.attributes[\"average_weight_name\"] = weightname\n                                            }\n                                        }\n                                    )\n                                }\n                            }\n                        )\n                    }\n                    if ( node.tagName === \"comments\") {\n                        node.childNodes.forEach(\n                            function (childNode) {\n                                if (childNode.tagName === \"comment\") {\n                                    const comment = childNode.getAttribute(\"value\")\n                                    if (comment.length > 30 && comment.length < 800) {\n                                        const author = childNode.getAttribute(\"username\")\n                                        const newComment = {\"comment\": comment, \"author\": author}\n                                        if (game.hasOwnProperty(\"comments\")) {\n                                            game[\"comments\"].push(newComment)\n                                        } else {\n                                            game[\"comments\"] = [newComment]\n                                        }\n                                    }\n                                }\n                    })}\n                    if ( node.tagName === \"videos\") {\n                        node.childNodes.forEach(\n                            function (childNode) {\n                                if ((childNode.tagName === \"video\") \n                                    && (childNode.getAttribute(\"language\") === \"English\")\n                                    && (childNode.getAttribute(\"category\") === \"review\")) {\n                                    const title = childNode.getAttribute(\"title\")\n                                    const link = childNode.getAttribute(\"link\")\n                                    const author = childNode.getAttribute(\"username\")\n                                    const newVideo = {\"title\": title, \"link\": link, \"author\": author}\n                                    if (game.hasOwnProperty(\"videos\")) {\n                                        game[\"videos\"].push(newVideo)\n                                    } else {\n                                        game[\"videos\"] = [newVideo]\n                                    }\n                                }\n                    })}\n                }\n            }\n        )\n    }\n    if ( Object.keys(game) && (!game.hasOwnProperty(\"year_published\") || game[\"year_published\"] === 0) ) {\n        game[\"year_published\"] = null\n    }\n    return game\n}\n\nfunction makeReadable(str) {\n    const paragraphs = str\n      .replace(/&amp;/g, '&')\n      .replace(/&rsquo;/g, \"'\")\n      .replace(/&quot;/g, '\"')\n      .replace(/&ldquo;/g, '“')\n      .replace(/&rdquo;/g, '”')\n      .replace(/&ndash;/g, '–')\n      .replace(/&mdash;/g, '–')\n      .replace(/&bull;/g, '∙')\n      .replace(/&nbsp;/g, ' ')\n      .split('&#10;');\n    return paragraphs;\n}\n\nexport function importpollApi(poll_id) {\n    console.log(`FIXME (WIP): implement the fetching of poll #${poll_id}.`)\n    return hardcoded_polls.filter( poll => poll.id === poll_id )[0]\n}\n\nexport function voteinpollApi(poll_id, game_id, newvote, user) {\n    console.log(`FIXME (WIP): implement a \"${newvote}\" vote by ${user} in poll #${poll_id} for game #${game_id}.`)\n    return { }\n}\n\nexport function clearmyvotesApi(poll_id, user) {\n    console.log(`FIXME (WIP): implement clearing all title votes by ${user} in poll #${poll_id}.`)\n    return { }\n}\n\nexport function deletetitleinpollApi(poll_id, game_id, user) {\n    console.log(`FIXME (WIP): implement deleting game #${game_id} in poll #${poll_id} by user ${user}.`)\n    return { }\n}\n","import { searchApi, gamedataApi } from './Api.js'\n\nconst withoutYear = (title) => {\n    if (typeof title === 'string' && title.length) {\n        return title.replace(/(( +)\\(([-#]?)\\d{1,6}\\))$/, '')\n    } else {\n        return title\n    }\n}\n\n// for disambiguation of titles, the game ID will be put in parentheses when the API does not provide yearpublished info\nconst extractYearFromTitle = (title) => {\n    if (typeof title === 'string' && title.length) {\n        const matchesDate = title.match(/(( +)\\((-?)\\d{1,4}\\))$/)\n        if (matchesDate !== null) {\n            return matchesDate[0].replace(/[^0-9-]/g, \"\")\n        } else {\n            const matchesId = title.match(/(( +)\\(#\\d{1,6}\\))$/)\n            if (matchesId !== null) {\n                return matchesId[0].replace(/[^#0-9-]/g, \"\")\n            } else {\n                return null\n            }\n        }\n    }\n}\n\nconst getNonexactSearchResults = async function (titles) {\n    const titleData = await Promise.all(\n        titles.map( function(gameTitle) {\n            return (\n                searchApi(withoutYear(gameTitle)) // query the API without the disambiguation\n    )}))\n    return titleData\n}\n\nconst getGamedataResults = async function (game_ids) {\n    const gamedata = await Promise.all(\n        game_ids.map( function(game_id) {\n            return (\n                gamedataApi(game_id) // query the API with the BGG game ID\n    )}))\n    return gamedata\n}\n\n// for gamedata requests by ID, get gamedata for all games with the same title\nconst getGamedataForIds = async function (game_ids) {\n    return await getGamedataResults(game_ids)\n}\n\n// This is a helper function for the data collection needed to check and to add games to the \n// library/cache. It will do the following:\n//\n//   - VERIFY TITLE EXISTENCE (API)\n//   - VERIFY TITLE PRESENCE IN CACHE\n//   - VERIFY TITLE ACTIVE STATUS\n//   - COLLECT GAME DATA FOR UNCACHED TITLES (API)\n//\n// This function does not update either the library/cache or the active games list, so that these\n// operations can be coordinated by the calling function instead. This is necessary since many of\n// the titles in this function's input list may not be ready to be added because the numerous\n// accepted user input formats and multiple games having the same title can lead to ambiguity in\n// which games the user really wants to make active. \nexport const collectGamedataForTitles = async (cachedgametitles, game_titles) => {\n\n    const status = {\n\n        // intermediate data\n        does_not_exist: [],               // INPUT ERROR: bad title string\n        already_active: [],               // INPUT ERROR: title is already active\n        games_byid_not_in_cache: {},      // input title string is actually an ID\n        games_byid_dict: {},              // mapping of all input IDs to titles\n        games_withdisambig_not_in_cache: {},  // input title string includes year disambiguation\n        ambiguous_cached_games: {},       // cannot activate the game yet\n        ambiguous_new_gamedata: {},       // add this new game data to cache, but cannot activate the game yet\n\n        // final data needed\n        new_gamedata_to_activate: [],     // add this new game data to cache and activate the game\n        new_gamedata_to_cache: [],        // add this new game data to cache\n        cached_games_to_activate: [],     // activate this game from already-cached data\n\n    }\n    let titles_to_api_lookup = []\n    let get_gamedata_and_activate = []\n    let get_gamedata_still_ambiguous = []\n\n\n    // CHECK CACHE FOR TITLES THAT ARE IDS (for all user title strings)\n\n    const all_cached_ids = Object.entries(cachedgametitles).map( cachedgame => parseInt(cachedgame[1].id) )\n    let uncached_game_titles_that_are_numbers = [], game_titles_that_are_strings = []\n    game_titles.forEach(function(title) {\n\n        if (!isNaN(Number(title))) {\n\n            // user title is actually an ID that was found in the cache \n            if (all_cached_ids.includes(parseInt(title))) {\n                let cache_entry = Object.entries(cachedgametitles).filter( game =>  game[1].id===parseInt(title))[0][1]\n                status.games_byid_dict[cache_entry.unambiguous_name] = cache_entry.id\n                if (cache_entry.active) {\n                    status.already_active.push(cache_entry.unambiguous_name)\n                } else { \n                    status.cached_games_to_activate.push(cache_entry.unambiguous_name)\n                }\n            }\n\n            // user title is an unknown number, need to convert it to a title string\n            else  {\n                uncached_game_titles_that_are_numbers.push(title)\n            }\n\n        } else {\n            game_titles_that_are_strings.push(title)\n        }\n\n    })\n\n\n    // API LOOKUP TO CONVERT ALL REMAINING IDS TO TITLES\n\n    let uncached_game_titles_that_are_strings = []\n    let gamedata_for_uncached_titles_that_are_numbers = await getGamedataForIds(uncached_game_titles_that_are_numbers)\n    gamedata_for_uncached_titles_that_are_numbers.forEach(function(gamedata, idx) {\n        if (gamedata.hasOwnProperty('name')) {\n            const game_id = parseInt(gamedata.id)\n            status.games_byid_not_in_cache[gamedata.name] = game_id\n            uncached_game_titles_that_are_strings.push(gamedata.name)\n        } else {\n            const game_title = uncached_game_titles_that_are_numbers[idx]\n            status.does_not_exist.push(game_title)\n        }\n    })\n    game_titles_that_are_strings = [ ...game_titles_that_are_strings, ...uncached_game_titles_that_are_strings]\n\n\n    // CACHE LOOKUP FOR ALL TITLES\n\n    // build the hashmap of cached base names\n    let cached_basetitle_hashmap = {}\n    let cached_basetitle_hashmap_entries = Object.entries(cachedgametitles).filter(cached_title => cached_title[0] !== cached_title[1].name)\n    cached_basetitle_hashmap_entries.forEach(function(entry) {\n        const ambiguous_name = withoutYear(entry[0])\n        const title_info = JSON.parse(JSON.stringify(entry[1]))\n        if (cached_basetitle_hashmap.hasOwnProperty(ambiguous_name)) {\n            cached_basetitle_hashmap[ambiguous_name].push(title_info)\n        } else {\n            cached_basetitle_hashmap[ambiguous_name] = [ title_info ]\n        }\n    })\n\n    // lookup in the hashmap for each input name\n    const all_cached_disambiguous_titles = Object.keys(cachedgametitles)\n    game_titles_that_are_strings.forEach(function(user_title) {\n\n        // user_title was found verbatim in the cache\n        if (all_cached_disambiguous_titles.includes(user_title)) {\n            if (cachedgametitles[user_title].active) {\n                status.already_active.push(user_title)\n            } else { \n                status.cached_games_to_activate.push(user_title)\n            }\n\n        // user_title with its year disambiguation removed was found in the cache\n        } else if (all_cached_disambiguous_titles.includes(withoutYear(user_title))) {\n            if (cachedgametitles[withoutYear(user_title)].active) {\n                status.already_active.push(withoutYear(user_title))\n            } else { \n                status.cached_games_to_activate.push(withoutYear(user_title))\n            }\n\n        // user_title base name is in cache, may have incorrect disambiguation\n        } else if (Object.keys(cached_basetitle_hashmap).includes(withoutYear(user_title))) {\n            const disambiguation = JSON.parse(JSON.stringify(cached_basetitle_hashmap[withoutYear(user_title)]))\n            status.ambiguous_cached_games[withoutYear(user_title)] = disambiguation\n\n        // user_title is not immediately known, collect title info via API\n        } else {\n\n            // disambiguation was supplied, but cannot validate it yet for uncached titles\n            if (withoutYear(user_title) !== user_title) {\n                status.games_withdisambig_not_in_cache[withoutYear(user_title)] = parseInt(extractYearFromTitle(user_title))\n            }\n\n            titles_to_api_lookup.push(withoutYear(user_title))\n        }\n    })\n    // sort ambiguous cached titles by year published, for their eventual displaying\n    Object.entries(status.ambiguous_cached_games).forEach(function(ambiguous_entry) {\n        status.ambiguous_cached_games[ambiguous_entry[0]] = ambiguous_entry[1].sort( (a,b) => (a.year_published < b.year_published) ? -1 : 1 )\n    })\n\n\n    // API LOOKUP FOR VERSIONS OF ALL UNCACHED TITLES\n    //   example disambiguation generated in \"all_potential_titles\" variable:\n    //     [ [{id: 2411, name:'Mount Everest', year_published: 1980},\n    //     {id: 147624, name:'Mount Everest', year_published: 2013}] ]\n    const all_potential_titles = await getNonexactSearchResults(titles_to_api_lookup)\n    all_potential_titles.forEach(function (all_results_for_title, idx) {\n        let all_versions_of_this_title = []\n        all_results_for_title.forEach(function (one_similar_result) {\n            let new_disambiguation\n            if (one_similar_result.name.toLowerCase() === titles_to_api_lookup[idx].toLowerCase()) {\n                new_disambiguation = JSON.parse(JSON.stringify(one_similar_result))\n                all_versions_of_this_title.push(new_disambiguation)\n            }\n        })\n        all_potential_titles[idx] = all_versions_of_this_title\n    })\n    // bundle each title into one and only one status bucket \n    titles_to_api_lookup.forEach(function (user_title, idx) {\n\n        // title exists\n        if (all_potential_titles[idx].length > 0) {\n\n            // convert to IDs for the upcoming game data API call\n            all_potential_titles[idx].forEach(function (this_title_version) {\n                const game_id = parseInt(this_title_version.id)\n                if (all_potential_titles[idx].length === 1) {\n                    get_gamedata_and_activate.push(game_id)\n                } else {\n                    get_gamedata_still_ambiguous.push(game_id)\n                }\n            })\n\n        // title does not exist\n        } else {\n            status.does_not_exist.push(user_title)\n        }\n\n    })\n\n\n    // API RETRIEVAL OF GAME DATA FOR ALL TITLE VERSIONS\n\n    const ids_for_gamedata_api = [ ...get_gamedata_and_activate, ...get_gamedata_still_ambiguous ]\n    const all_new_gamedata = await getGamedataResults(ids_for_gamedata_api)\n    all_new_gamedata.forEach(function (this_gamedata) {\n        let new_gamedata = JSON.parse(JSON.stringify(this_gamedata))\n\n        // collect game data for titles to activate\n        if (get_gamedata_and_activate.includes(this_gamedata.id)) {\n            new_gamedata['unambiguous_name'] = this_gamedata.name\n            status.new_gamedata_to_activate[this_gamedata.name] = new_gamedata\n\n        // collect game data for other titles\n        } else if (get_gamedata_still_ambiguous.includes(this_gamedata.id)) {\n            const unambiguous_name = `${this_gamedata.name} (${this_gamedata.year_published})`\n            new_gamedata['unambiguous_name'] = unambiguous_name\n\n            // if user supplied a game ID originally, but its title was ambiguous, apply that disambiguation\n            if (status.games_byid_not_in_cache.hasOwnProperty(this_gamedata.name)) {\n                if (status.games_byid_not_in_cache[this_gamedata.name] === this_gamedata.id) {\n                    status.games_byid_dict[unambiguous_name] = this_gamedata.id\n                    status.new_gamedata_to_activate.push(new_gamedata)\n                } else {\n                    status.new_gamedata_to_cache.push(new_gamedata)\n                }\n\n            // if user supplied year disambiguation originally, but its title was ambiguous, apply that disambiguation\n            } else if (status.games_withdisambig_not_in_cache.hasOwnProperty(this_gamedata.name)) {\n                const target_year = status.games_withdisambig_not_in_cache[this_gamedata.name]\n                const gamedata_for_target_year = all_new_gamedata.filter( my_title_gamedata => my_title_gamedata.year_published === target_year )\n                // the given year does exist in the gamedata\n                if (gamedata_for_target_year.length === 1) {\n                    if (status.games_withdisambig_not_in_cache[this_gamedata.name] === this_gamedata.year_published) {\n                        status.new_gamedata_to_activate.push(new_gamedata)\n                    } else {\n                        status.new_gamedata_to_cache.push(new_gamedata)\n                    }\n                // the given year is bogus \n                } else {\n                    if (status.ambiguous_new_gamedata.hasOwnProperty(this_gamedata.name)) {\n                        status.ambiguous_new_gamedata[this_gamedata.name].push(new_gamedata)\n                    } else {\n                        let ambiguous_new_gamedata_bundle = []\n                        ambiguous_new_gamedata_bundle.push(new_gamedata) \n                        status.ambiguous_new_gamedata[this_gamedata.name] = ambiguous_new_gamedata_bundle\n                    }\n                }\n\n            // if user supplied an ambiguous title originally, game data remains ambiguous for now\n            } else {\n                if (status.ambiguous_new_gamedata.hasOwnProperty(this_gamedata.name)) {\n                    status.ambiguous_new_gamedata[this_gamedata.name].push(new_gamedata)\n                } else {\n                    let ambiguous_new_gamedata_bundle = []\n                    ambiguous_new_gamedata_bundle.push(new_gamedata) \n                    status.ambiguous_new_gamedata[this_gamedata.name] = ambiguous_new_gamedata_bundle\n                }\n            }\n        }\n\n    })\n    Object.entries(status.ambiguous_new_gamedata).forEach(function(ambiguous_entry) {\n        status.ambiguous_new_gamedata[ambiguous_entry[0]] = ambiguous_entry[1].sort( (a,b) => (a.year_published < b.year_published) ? -1 : 1 )\n    })\n\n    return status\n\n}\n\nexport const validateUserTitles = async (cached_titles, user_titles) => { \n\n    const displayNameForMessages = function (title) {\n        const all_cached_ids = Object.entries(cached_titles).map( cachedgame => parseInt(cachedgame[1].id) )\n        if (all_cached_ids.includes(parseInt(title))) {\n            const unambiguous_name = Object.values(cached_titles).filter( cachedgame => cachedgame.id === parseInt(title) )[0].unambiguous_name\n            return `[#${title}] ${unambiguous_name}`\n        } else {\n            return title\n        }\n    }\n\n    let validation_result = {}, keep_modal_open = false\n    let collection_result = await collectGamedataForTitles(cached_titles, user_titles)\n\n    collection_result['selected_games_to_activate'] = []\n    collection_result['ambiguous_title_count'] = Object.keys(collection_result.ambiguous_cached_games).length + Object.keys(collection_result.ambiguous_new_gamedata).length\n\n    // Prompt the user for disambiguation\n    let new_messages = []\n    Object.entries(collection_result.ambiguous_cached_games).forEach(function(ambiguous_cached_title_info) {\n        let ambiguous_cachedids_arr = JSON.parse(JSON.stringify(ambiguous_cached_title_info[1]))\n        new_messages.push({ message_str: `Which version of \"${ambiguous_cached_title_info[0]}\"? `, ambiguous: ambiguous_cachedids_arr, error_flag: false })\n        keep_modal_open = true\n    })\n    Object.entries(collection_result.ambiguous_new_gamedata).forEach(function(ambiguous_title_info) {\n        // it was tagged as \"ambiguous\", but this title has user-supplied ID for disambiguation\n        if (collection_result.games_byid_not_in_cache.hasOwnProperty(ambiguous_title_info[0])) {\n            if (collection_result.games_byid_not_in_cache[ambiguous_title_info[0]] === ambiguous_title_info[1].id) {\n                collection_result.selected_games_to_activate.push(ambiguous_title_info[1].unambiguous_name)\n            }\n        // this title was a user-supplied name string and still requires user disambiguation\n        } else {\n            let ambiguous_gamedata_arr = JSON.parse(JSON.stringify(ambiguous_title_info[1]))\n            new_messages.push({ message_str: `Which version of \"${ambiguous_title_info[0]}\"? `, ambiguous: ambiguous_gamedata_arr, error_flag: false })\n            keep_modal_open = true\n        }\n    })\n\n    collection_result['routed_games_treatment'] = 'none'\n    validation_result['gameValidations'] = collection_result\n\n    // Prepend the game title with the game ID, when the ID was supplied by the user\n    let game_id_txt = ''\n\n    // Inform the user of all other games that could not be added\n    let title_count_already_active = 0, append_titles_alreadyactive = []\n    for (let active_title of collection_result.already_active) {\n        title_count_already_active += 1\n        if (collection_result.games_byid_dict.hasOwnProperty(active_title)) {\n            game_id_txt = `[#${collection_result.games_byid_dict[active_title]}] `\n        } else {\n            game_id_txt = ''\n        }\n        append_titles_alreadyactive.push(game_id_txt + active_title)\n        keep_modal_open = true\n    }\n    if (title_count_already_active > 0) {\n        let message_txt, prepend_titles_alreadyactive\n        if (title_count_already_active === 1) {\n            prepend_titles_alreadyactive = [...append_titles_alreadyactive]\n            append_titles_alreadyactive = []\n            message_txt = 'is already active'\n        } else {\n            prepend_titles_alreadyactive = []\n            message_txt = `${title_count_already_active} titles are already active`\n        }\n        new_messages.push({ \n          error_flag: true,\n          message_str: message_txt,\n          prepend_titles: prepend_titles_alreadyactive,\n          append_titles: append_titles_alreadyactive\n        })\n        keep_modal_open = true\n    }\n    let title_count_does_not_exist = 0, append_titles_doesnotexist = []\n    for (let nonexistent_title of collection_result.does_not_exist) {\n        title_count_does_not_exist += 1\n        append_titles_doesnotexist.push(nonexistent_title)\n        keep_modal_open = true\n    }\n    if (title_count_does_not_exist > 0) {\n        let message_txt, prepend_titles_doesnotexist\n        if (title_count_does_not_exist === 1) {\n            prepend_titles_doesnotexist = [...append_titles_doesnotexist]\n            append_titles_doesnotexist = []\n            message_txt = 'does not exist'\n        } else {\n            prepend_titles_doesnotexist = []\n            message_txt = `${title_count_does_not_exist} titles do not exist`\n        }\n        new_messages.push({ \n          error_flag: true,\n          message_str: message_txt,\n          prepend_titles: prepend_titles_doesnotexist,\n          append_titles: append_titles_doesnotexist\n        })\n    }\n\n    // Inform the user of all other games that will be added\n    let title_count_to_add = 0, append_titles_toadd = []\n    for (let inactive_title of collection_result.cached_games_to_activate) {\n        title_count_to_add += 1\n        if (collection_result.games_byid_not_in_cache.hasOwnProperty(inactive_title)) {\n            game_id_txt = `[#${collection_result.games_byid_not_in_cache[inactive_title]}] `\n        } else {\n            game_id_txt = ''\n        }\n        append_titles_toadd.push(game_id_txt + displayNameForMessages(inactive_title))\n    }\n    for (let unambiguous_new_title of Object.keys(collection_result.new_gamedata_to_activate)) {\n        title_count_to_add += 1\n        if (collection_result.games_byid_not_in_cache.hasOwnProperty(unambiguous_new_title)) {\n            game_id_txt = `[#${collection_result.games_byid_not_in_cache[unambiguous_new_title]}] `\n        } else {\n            game_id_txt = ''\n        }\n        append_titles_toadd.push(game_id_txt + displayNameForMessages(unambiguous_new_title))\n    }\n    if (title_count_to_add > 0) {\n        let message_txt, prepend_titles_toadd\n        let other_txt = ( (Object.keys(collection_result.ambiguous_cached_games).length > 0) \n                            || (Object.keys(collection_result.ambiguous_new_gamedata).length > 0) \n                            || (collection_result.does_not_exist.length > 0)\n                            || (collection_result.already_active.length > 0) )\n                            ? ' other' : ''\n        if (title_count_to_add === 1) {\n            prepend_titles_toadd = [...append_titles_toadd]\n            append_titles_toadd = []\n            message_txt = 'Adding'\n\n        } else {\n            prepend_titles_toadd = []\n            message_txt = `Adding ${title_count_to_add}${other_txt} titles`\n        }\n        new_messages.push({ \n          error_flag: false,\n          message_str: message_txt,\n          prepend_titles: prepend_titles_toadd,\n          append_titles: append_titles_toadd\n        })\n    }\n    validation_result['messages'] = new_messages\n    validation_result['keep_modal_open'] = keep_modal_open\n\n    return validation_result\n}\n","import React, { useState, useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faLongArrowAltRight } from '@fortawesome/free-solid-svg-icons'\nimport { importpollApi } from './Api.js'\nimport { validateUserTitles } from './GameLibrary'\nimport Spinner from 'react-bootstrap/Spinner'\n\n\nconst withoutYear = (title) => {\n    if (typeof title === 'string' && title.length) {\n        return title.replace(/(( +)\\(([-#]?)\\d{1,6}\\))$/, '')\n    } else {\n        return title\n    }\n}\n\nconst doAddGames = (raw_validated_games, add_fn) => {\n\n    // apply selected games to the ambiguous gamedata\n    if (raw_validated_games.ambiguous_title_count !== 0) {\n\n        const selected_base_names = raw_validated_games.selected_games_to_activate.map( unambiguous_name => withoutYear(unambiguous_name) )\n        let updated_new_gamedata_to_activate = []\n        let updated_new_gamedata_to_cache = []\n        Object.entries(raw_validated_games.ambiguous_new_gamedata).forEach(function(possible_versions) {\n            possible_versions[1].forEach(function(game_version) {\n                const new_gamedata = JSON.parse(JSON.stringify(game_version))\n                if (selected_base_names.includes(game_version.name)) {\n                    if (raw_validated_games.selected_games_to_activate.includes(game_version.unambiguous_name)) {\n                        updated_new_gamedata_to_activate.push(new_gamedata)\n                    } else {\n                        updated_new_gamedata_to_cache.push(new_gamedata)\n                    }\n                    delete raw_validated_games.ambiguous_new_gamedata[possible_versions[0]]\n                    raw_validated_games.selected_games_to_activate = raw_validated_games.selected_games_to_activate.filter( game => game.name !== possible_versions[0] )\n                }\n            })\n        })\n        raw_validated_games.new_gamedata_to_activate = updated_new_gamedata_to_activate\n        raw_validated_games.new_gamedata_to_cache = updated_new_gamedata_to_cache\n\n        // apply selected games to the ambiguous cached games\n        Object.entries(raw_validated_games.ambiguous_cached_games).forEach(function(possible_versions) {\n            possible_versions[1].forEach(function(game_version) {\n                if (raw_validated_games.selected_games_to_activate.includes(game_version.unambiguous_name)) {\n                    raw_validated_games.cached_games_to_activate.push(game_version.unambiguous_name)\n                    delete raw_validated_games.ambiguous_cached_games[possible_versions[0]]\n                }\n            })\n        })\n\n        raw_validated_games.ambiguous_title_count -= selected_base_names.length\n        raw_validated_games.selected_games_to_activate = []\n\n        add_fn(raw_validated_games)\n\n    } else {\n        add_fn(raw_validated_games)\n    }\n}\n\nexport const AddGames = (props) => {\n\n    const [ userTitlesInput, setUserTitlesInput ] = useState('')\n    const [ statusMessages, setStatusMessages ] = useState([])\n    const [ gameValidations, setGameValidations ] = useState({})\n    const [ selectedGamesToActivate, setSelectedGamesToActivate ] = useState([])\n    const [ loading, setLoading ] = useState(false)\n\n    const inputEl = useRef(null)\n\n    useEffect( () => {\n\n        if (inputEl.current !== null) {\n            inputEl.current.focus()\n        }\n\n        async function addRoutedGames() {\n\n            // routing by poll ID\n            if (props.routedgames.hasOwnProperty('pollid') && props.routedgames.pollid !== null) {\n                const imported_poll = importpollApi(props.routedgames.pollid)\n                props.onviewpoll(imported_poll)\n\n            // routing by game ID(s)\n            } else {\n                let validation_list = [], routing_treatment = 'none'\n                if (props.routedgames.hasOwnProperty('new_list') && props.routedgames.new_list.length > 0) {\n                    validation_list = [...props.routedgames.new_list]\n                    routing_treatment = 'replace'\n                } else if (props.routedgames.hasOwnProperty('addto_list') && props.routedgames.addto_list.length > 0) {\n                    validation_list = [...props.routedgames.addto_list]\n                    routing_treatment = 'append'\n                }\n                if (validation_list.length > 0) {\n                    setLoading(true)\n                    let validation_result = await validateUserTitles(props.cachedgametitles, validation_list)\n                    validation_result.gameValidations['routed_games_treatment'] = routing_treatment\n                    setGameValidations(validation_result.gameValidations)\n                    newMessages(validation_result.messages)\n                    if (!validation_result.keep_modal_open) {\n                        doAddGames(validation_result.gameValidations, props.updategamevalidations)\n                        return null\n                    } else {\n                        setLoading(false)\n                    }\n                }\n            }\n        }\n        addRoutedGames()\n    }, [props])\n\n    const newMessages = (new_messages) => {\n        const newStatusMessages = [...new_messages]\n        setStatusMessages(newStatusMessages)\n    }\n\n    const selectUnambiguousTitle = function (title_to_select) { \n\n        // only one title with the same base name can be selected\n        let base_name_to_select = withoutYear(title_to_select)\n        let updated_selectedGamesToActivate = [...selectedGamesToActivate]\n        updated_selectedGamesToActivate = updated_selectedGamesToActivate.filter( selected_title => withoutYear(selected_title) !== base_name_to_select )\n        updated_selectedGamesToActivate.push(title_to_select)\n        setSelectedGamesToActivate(updated_selectedGamesToActivate)\n\n        // merge the updated title selections in with the rest of the game data\n        let updated_gameValidations = JSON.parse(JSON.stringify(gameValidations))\n        updated_gameValidations['selected_games_to_activate'] = JSON.parse(JSON.stringify(updated_selectedGamesToActivate))\n\n        setGameValidations(updated_gameValidations)\n\n    }\n\n    const handleChange = (event) => {\n        event.preventDefault()\n        setUserTitlesInput(event.target.value)\n    }\n\n    const handleGetMeStarted = async (event) => {\n        event.preventDefault()\n        processAddGamesRequest('148228, 199478, 172081, 175914, 126163, 178900, 251678, 6830, 93, 73439, 132531, 194655')\n    }\n\n    const handleSubmit = async (event) => {\n        event.preventDefault()\n        processAddGamesRequest(userTitlesInput)\n    }\n\n    const processAddGamesRequest = async (requested_games) => {\n        let delimiter, num_nonblank_lines = requested_games.split(/\\r\\n|\\r|\\n/).filter(line => line !== '').length\n        if (num_nonblank_lines > 1) {\n            delimiter = '\\n'\n        } else {\n            delimiter = ','\n        }\n        const userTitles = requested_games\n            .split(delimiter)\n            .map(str => str.trim())\n            .map(str => str.replace(/[^0-9a-zA-Z:.()&!–#' ]/g, \"\"))\n            .filter( function(e){return e} )\n        setLoading(true)\n        const validation_result = await validateUserTitles(props.cachedgametitles, Array.from(new Set(userTitles)))\n        setGameValidations(validation_result.gameValidations)\n        newMessages(validation_result.messages)\n        if (!validation_result.keep_modal_open) {\n            doAddGames(validation_result.gameValidations, props.updategamevalidations)\n            return null\n        } else {\n            setLoading(true)\n        }\n    }\n\n    const prependTitles = (message) => {\n        if (message.hasOwnProperty('prepend_titles') && message.prepend_titles.length) {\n            return (\n                message.prepend_titles.map( (title, idx) => \n                    (idx === 0)\n                    ? <span key={idx} className=\"title\">{title}</span>\n                    : <span>, <span key={idx} className=\"title\">{title}</span></span>\n                )\n            )\n        } else {\n            return null\n        }\n    }\n\n    const appendTitles = (message) => {\n        if (message.hasOwnProperty('append_titles') && message.append_titles.length) {\n            return (\n                message.append_titles.map( (title, idx) => \n                    (idx === 0)\n                    ? <span key={idx}> - <span className=\"title\">{title}</span></span>\n                    : <span key={idx}>, <span className=\"title\">{title}</span></span>\n                )\n            )\n        } else {\n            return null\n        }\n    }\n\n    const addButton = (message) => {\n        if (message.hasOwnProperty('ambiguous')) {\n            let classes = {}\n            message.ambiguous.forEach(function(game) {\n                let new_classes = 'default-secondary-styles'\n                if (selectedGamesToActivate.includes(game.unambiguous_name)) {\n                    new_classes += ' active-button'\n                }\n                classes[game.unambiguous_name] = new_classes\n            })\n            return (\n                message.ambiguous.map( disambiguation => \n                    <button key={disambiguation.id} className={classes[disambiguation.unambiguous_name]} onClick={ (e) => selectUnambiguousTitle(disambiguation.unambiguous_name) }>{disambiguation.year_published}</button>\n                )\n            )\n        } else {\n            return null\n        }\n    }\n\n    const clickApply = () => {\n        doAddGames(gameValidations, props.updategamevalidations)\n        return null\n    }\n\n    const apply_button = ( (gameValidations.hasOwnProperty('ambiguous_title_count') && gameValidations.ambiguous_title_count > 0)\n                       || (gameValidations.hasOwnProperty('cached_games_to_activate') && gameValidations.cached_games_to_activate.length > 0)\n                       || (gameValidations.hasOwnProperty('new_gamedata_to_activate') && Object.keys(gameValidations.new_gamedata_to_activate).length > 0) )\n\n    const active_title_count = Object.values(props.cachedgametitles).filter( cachedata => cachedata.active ).length\n\n    const show_error = props.activepoll.id !== 'local'\n\n    if (show_error) {\n        return (\n            <div id=\"input-section\">\n                <p className=\"warning\">INFO: Adding of games is disabled while a poll is selected. Use \"Import Poll\" button to deselect it.</p>\n            </div>\n        )\n    } else {\n        return (\n            <React.Fragment>\n            <h4>Add board game by title:</h4>\n\n            <div id=\"input-section\">\n                    <section id=\"input-by-title\">\n                        <section className=\"buttonrow\">\n                            <input ref={inputEl} size=\"30\" value={userTitlesInput} onChange={handleChange} placeholder=\"(exact game titles or BGG IDs)\" required/>\n                            <button onClick={handleSubmit} className=\"default-primary-styles\">Add</button>\n                            { loading && !statusMessages.length &&\n                                <Spinner animation=\"border\" size=\"sm\" />\n                            }\n                        </section>\n                        { !statusMessages.length && !active_title_count ?\n                        <div>\n                            <section>\n                                OR\n                            </section>\n                            <section className=\"buttonrow\">\n                                <button onClick={handleGetMeStarted} className=\"default-primary-styles\">Show me some games!</button>\n                            </section>\n                        </div>\n                        : null\n                        }\n                        <div className=\"status-messages\">\n                            { statusMessages\n                                .map(\n                                    (message, i) => {\n                                        return (message.hasOwnProperty('error_flag') && message.error_flag)\n                                        ? <p key={i} className=\"message error\">ERROR: {prependTitles(message)} {message.message_str}{appendTitles(message)} {addButton(message)}</p>\n                                        : <p key={i} className=\"message\"><FontAwesomeIcon icon={faLongArrowAltRight} /> {prependTitles(message)} {message.message_str}{appendTitles(message)} {addButton(message)}</p>\n                                    }\n                                )\n                            }\n                        </div>\n                    </section>\n                    { apply_button &&\n                        <button className=\"default-primary-styles\" onClick={clickApply}>Apply</button>\n                    }\n            </div>\n            </React.Fragment>\n        )\n    }\n\n}\n\nAddGames.propTypes = {\n    activepoll: PropTypes.object.isRequired,\n    onviewpoll: PropTypes.func.isRequired,\n    routedgames: PropTypes.object.isRequired,\n    updategamevalidations: PropTypes.func.isRequired,\n    cachedgametitles: PropTypes.object.isRequired,\n}","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faThumbsUp } from '@fortawesome/free-solid-svg-icons'\n\nconst VotableElement = (props) => {\n\n    // props.votingtype === title : votingon:63888, votinglabel:Innovation, preferences: {63888: {thumbsup: [{rank:1, user:Nobody}]}}\n    // props.votingtype !== title : votingon:Card Game, votinglabel:Card Game, preferences: {Nobody}\n\n    let vote\n    if (props.votingtype === 'title') {\n        vote = (props.preferences.hasOwnProperty(props.votingon)\n        && props.preferences[props.votingon].hasOwnProperty('thumbsup')\n        && props.preferences[props.votingon].thumbsup.filter( vote => vote.user === props.user ).length) ? 'thumbsup' : 'novote'\n    } else {\n        vote = (props.preferences.hasOwnProperty(props.votingon)\n        && props.preferences[props.votingon].hasOwnProperty('thumbsup')\n        && props.preferences[props.votingon].thumbsup.includes(props.user)) ? 'thumbsup' : 'novote'\n\n    }\n    let elementStyle = \"voteable\"\n    elementStyle += ` ${vote}`\n    let votable_text = props.votingonlabel\n    if (props.attrcount > 1 || !props.suppresslowcounts) {\n        votable_text += ` (${props.attrcount})`\n    }\n    if (props.votingtype === 'category' || props.votingtype === 'mechanic') {\n        votable_text = votable_text.toLowerCase()\n    }\n    return (\n        <li \n            key={props.votingon} \n            className={elementStyle} \n        > \n            <div className=\"vote\">\n                { vote === 'thumbsup' &&\n                <FontAwesomeIcon icon={faThumbsUp} />\n                }\n            </div>\n            <div\n                className=\"clickable\"\n                data-votingtype={props.votingtype}\n                data-votingon={props.votingon}\n                data-newvote='thumbsup'\n                onClick={props.onnewvote}\n            >\n                {votable_text}\n            </div>\n        </li>\n    )\n}\n\nexport const VotingSection = (props) => {\n\n    const origVotables = JSON.parse(JSON.stringify(props.counts))\n    let orderedVotables = JSON.parse(JSON.stringify(props.counts))\n    // alphabetization is a 2nd-level sort, after the 1st sorting is by count \n    if (props.alphabetize) {\n\n        orderedVotables = origVotables\n            .sort(function(a,b) {\n\n                // 1st sort is by counts, \n                // and here the counts are different\n                if (a.attrCount < b.attrCount) {\n                    return 1\n                } else if (a.attrCount > b.attrCount) {\n                    return -1\n\n                // 2nd sort is by names\n                } else if (a.attrName < b.attrName) {\n                    return -1\n                } else if (a.attrName > b.attrName) {\n                    return 1\n\n                // both count and names are equal\n                } else {\n                    return 0\n                }\n\n            })\n    }\n    return (\n        <ul id={props.elementid}>\n            <li><b>{props.title}</b></li>\n            {orderedVotables.map((key, index) => {\n                return <VotableElement \n                    key={key.attrName}\n                    user={props.user}\n                    preferences={props.sectionthumbs}\n                    votingtype={props.type}\n                    votingon={key.attrId} \n                    votingonlabel={key.attrName} \n                    attrcount={key.attrCount} \n                    suppresslowcounts={props.suppresslowcounts}\n                    onnewvote={props.onnewvote}/>\n                })}\n        </ul>\n    )\n}\n\nVotingSection.propTypes = {\n    user: PropTypes.string,\n    counts: PropTypes.array.isRequired,\n    elementid: PropTypes.string.isRequired,\n    onnewvote: PropTypes.func.isRequired,\n    sectionthumbs: PropTypes.object.isRequired,\n    title: PropTypes.string.isRequired,\n    type: PropTypes.string.isRequired,\n    alphabetize: PropTypes.bool.isRequired,\n    suppresslowcounts: PropTypes.bool.isRequired,\n}","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { VotingSection } from './VotingSection';\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\n\nexport const VoteAttributes = (props) => {\n\n    const [ votingOn, setVotingOn ] = useState('players')\n\n    const handleSectionChange = (event) => {\n        const newSelection = event.target.id.replace(/select-/g, '')\n        setVotingOn(newSelection)\n    }\n\n    const emptyMessage = () => {\n        return (\n            <span className=\"message warning\">\n                <p>No board games to compare yet</p>\n                <p>Please add game titles by clicking on \"Add Games\".</p>\n            </span>\n        )\n    }\n\n    const tallyPlayerCounts = (props) => {\n        // tally each allowable player count occurrence across all games\n        let countsObj = {}\n        for (const game of props.activegamedata) {\n            for (let playercount=game.attributes.min_players; playercount<=game.attributes.max_players; playercount++) {\n                if (playercount <= 10) {\n                    const playerCountAttr = (playercount === 10) ? '10P+' : playercount + 'P'\n                    if (countsObj.hasOwnProperty(playerCountAttr)) {\n                        countsObj[playerCountAttr] = countsObj[playerCountAttr] + 1\n                    } else {\n                        countsObj[playerCountAttr] = 1\n                    }\n                }\n            }\n        }\n        // sort each attribute according to total occurrences\n        let countsArray = []\n        Object.keys(countsObj).forEach((elementTag) => {\n            const newCount = {'attrId': elementTag, 'attrName': elementTag, 'attrCount': countsObj[elementTag]}\n            countsArray.push(newCount)\n        })\n        countsArray.sort((a, b) => (parseInt(a.attrName.slice(0, -1)) < parseInt(b.attrName.slice(0, -1))) ? 1 : -1)\n        return countsArray\n    }\n\n    const tallyWeightCounts = (props) => {\n        // tally each weight occurrence across all games\n        let countsObj = {}\n        for (const game of props.activegamedata) {\n            if (countsObj.hasOwnProperty(game.attributes.average_weight_name)) {\n                countsObj[game.attributes.average_weight_name] = countsObj[game.attributes.average_weight_name] + 1\n            } else {\n                countsObj[game.attributes.average_weight_name] = 1\n            }\n        }\n        // sort weights into a predefined order\n        const weights = [\"light\", \"medium light\", \"medium\", \"medium heavy\", \"heavy\"]\n        let countsArray = []\n        for (const weight of weights) {\n            if (countsObj.hasOwnProperty(weight)) {\n                countsArray.push({'attrId': weight, 'attrName': weight, 'attrCount': countsObj[weight]})\n            } else {\n                countsArray.push({'attrId': weight, 'attrName': weight, 'attrCount': 0})\n            }\n        }\n        return countsArray\n    }\n\n    const tallyCategoryCounts = (props) => {\n        // tally each attribute's occurrence across all games\n        let countsObj = {}\n        for (const game of props.activegamedata) {\n            for (const category of game.attributes.categories) {\n                if (countsObj.hasOwnProperty(category)) {\n                    countsObj[category] = countsObj[category] + 1\n                } else {\n                    countsObj[category] = 1\n                }\n            }\n        }\n        // sort each attribute according to total occurrences\n        let countsArray = []\n        Object.keys(countsObj).forEach((elementTag) => {\n            countsArray.push({'attrId': elementTag, 'attrName': elementTag, 'attrCount': countsObj[elementTag]})\n        })\n        countsArray.sort((a, b) => (a.attrCount < b.attrCount) ? 1 : (a.attrCount === b.attrCount) && (a.attrName > b.attrName) ? 1 : -1)\n        return countsArray\n    }\n\n    const tallyMechanicCounts = (props) => {\n        // tally each attribute's occurrence across all games\n        let countsObj = {}\n        for (const game of props.activegamedata) {\n            for (const mechanic of game.attributes.mechanics) {\n                if (countsObj.hasOwnProperty(mechanic)) {\n                    countsObj[mechanic] = countsObj[mechanic] + 1\n                } else {\n                    countsObj[mechanic] = 1\n                }\n            }\n        }\n        // sort each attribute according to total occurrences\n        let countsArray = []\n        Object.keys(countsObj).forEach((elementTag) => {\n            countsArray.push({'attrId': elementTag, 'attrName': elementTag, 'attrCount': countsObj[elementTag]})\n        })\n        countsArray.sort((a, b) => (a.attrCount < b.attrCount) ? 1 : (a.attrCount === b.attrCount) && (a.attrName > b.attrName) ? 1 : -1)\n        return countsArray\n    }\n\n    const attributestally = {\n        playercounts: tallyPlayerCounts(props),\n        weightcounts: tallyWeightCounts(props),\n        categorycounts: tallyCategoryCounts(props),\n        mechaniccounts: tallyMechanicCounts(props),\n    }\n\n    return (\n        <React.Fragment>\n\n        <h4>Upvote board game attributes:</h4>\n\n        <ul id=\"votingsection-selector\">\n            <li id=\"select-players\" className={\"segmentedcontrol lightbg\" + ({ votingOn } === \"players\" ? \" selected\" : \"\")} onClick={handleSectionChange}>Players</li>\n            <li id=\"select-weights\" className={\"segmentedcontrol lightbg\" + ({ votingOn } === \"weights\" ? \" selected\" : \"\")} onClick={handleSectionChange}>Weights</li>\n            <li id=\"select-categories\" className={\"segmentedcontrol lightbg\" + ({ votingOn } === \"categories\" ? \" selected\" : \"\")} onClick={handleSectionChange}>Categories</li>\n            <li id=\"select-mechanics\" className={\"segmentedcontrol lightbg\" + ({ votingOn } === \"mechanics\" ? \" selected\" : \"\")} onClick={handleSectionChange}>Mechanics</li>\n        </ul>\n\n        <div id=\"voting-section\">\n            <TransitionGroup>\n            {votingOn === 'players' &&\n                <CSSTransition\n                    key={0}\n                    in={true}\n                    appear={false}\n                    timeout={2000}\n                    classNames={\"showsegment\"}\n                >\n                    <VotingSection \n                        user={props.user}\n                        type='players'\n                        elementid='supported-players'\n                        title='PLAYERS:'\n                        counts={attributestally.playercounts}\n                        sectionthumbs={props.attrthumbs['players']}\n                        onnewvote={props.onnewvote}\n                        alphabetize={false}\n                        suppresslowcounts={false}\n                    />\n                </CSSTransition>\n            }\n            {votingOn === 'weights' &&\n                <CSSTransition\n                    key={1}\n                    in={true}\n                    appear={false}\n                    timeout={2000}\n                    classNames={\"showsegment\"}\n                >\n                    <VotingSection \n                        user={props.user}\n                        type='weight'\n                        elementid='weight-counts'\n                        title='WEIGHT:'\n                        counts={attributestally.weightcounts}\n                        sectionthumbs={props.attrthumbs['weight']}\n                        onnewvote={props.onnewvote}\n                        alphabetize={false}\n                        suppresslowcounts={false}\n                    />\n                </CSSTransition>\n            }\n            {votingOn === 'categories' &&\n                <CSSTransition\n                    key={2}\n                    in={true}\n                    appear={false}\n                    timeout={2000}\n                    classNames={\"showsegment\"}\n                >\n                    <VotingSection \n                        user={props.user}\n                        type='category'\n                        elementid='category-counts'\n                        title='CATEGORY:'\n                        counts={attributestally.categorycounts}\n                        sectionthumbs={props.attrthumbs['category']}\n                        onnewvote={props.onnewvote}\n                        alphabetize={true}\n                        suppresslowcounts={true}\n                    />\n                </CSSTransition>\n            }\n            {votingOn === 'mechanics' &&\n                <CSSTransition\n                    key={3}\n                    in={true}\n                    appear={false}\n                    timeout={2000}\n                    classNames={\"showsegment\"}\n                >\n                    <VotingSection \n                        user={props.user}\n                        type='mechanic'\n                        elementid='mechanic-counts'\n                        title='MECHANIC:'\n                        counts={attributestally.mechaniccounts}\n                        sectionthumbs={props.attrthumbs['mechanic']}\n                        onnewvote={props.onnewvote}\n                        alphabetize={true}\n                        suppresslowcounts={true}\n                    />\n                </CSSTransition>\n            }\n            </TransitionGroup>\n            {attributestally.playercounts.length === 0 \n            && attributestally.weightcounts.length === 0 \n            && attributestally.categorycounts.length === 0\n            && attributestally.mechaniccounts.length === 0\n            &&\n                emptyMessage()\n            }\n        </div>\n\n        </React.Fragment>\n    )\n}\n\nVoteAttributes.propTypes = {\n    user: PropTypes.string,\n    activegamedata: PropTypes.array.isRequired,\n    attrthumbs: PropTypes.object.isRequired,\n    onnewvote: PropTypes.func.isRequired,\n}","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { VotingSection } from './VotingSection';\n\nexport const VoteTitles = (props) => {\n\n    let countsArray = []\n    props.activegamedata.forEach(function(game) {\n        countsArray.push({'attrId': game.id, 'attrName': game.unambiguous_name, 'attrCount': 1})\n    })\n\n    return (\n        <React.Fragment>\n        <h4>Upvote board game titles:</h4>\n        <VotingSection \n            user={props.user}\n            type='title'\n            elementid='game-titles'\n            title={'TITLES ('+countsArray.length+'):'}\n            counts={countsArray}\n            sectionthumbs={props.titlethumbs}\n            onnewvote={props.onnewvote}\n            alphabetize={true}\n            suppresslowcounts={true}\n        />\n        </React.Fragment>\n    )\n}\n\nVoteTitles.propTypes = {\n    user: PropTypes.string,\n    activegamedata: PropTypes.array.isRequired,\n    titlethumbs: PropTypes.object,\n    onnewvote: PropTypes.func.isRequired,\n    ondeleteall: PropTypes.func.isRequired,\n}","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { AddGames } from './AddGames'\nimport { VoteAttributes } from './VoteAttributes'\nimport { VoteTitles } from './VoteTitles'\nimport { ImportPoll } from './ImportPoll'\nimport Modal from 'react-bootstrap/Modal'\nimport ModalBody from 'react-bootstrap/ModalBody'\nimport ModalFooter from 'react-bootstrap/ModalFooter'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faClipboard } from '@fortawesome/free-solid-svg-icons'\n\n\nexport const MainControls = (props) => {\n\n    const [addIsOpen, setAddIsOpen] = useState(false)\n    const [voteAttributesIsOpen, setVoteAttributesIsOpen] = useState(false)\n    const [voteAttributesErrorIsOpen, setVoteAttributesErrorIsOpen] = useState(false)\n    const [voteTitlesIsOpen, setVoteTitlesIsOpen] = useState(false)\n    const [importPollIsOpen, setImportPollIsOpen] = useState(false)\n\n    const showAddModal = () => {\n        setVoteAttributesIsOpen(false)\n        setVoteAttributesErrorIsOpen(false)\n        setVoteTitlesIsOpen(false)\n        setImportPollIsOpen(false)\n        setAddIsOpen(true)\n    }\n\n    const hideAddModal = () => {\n        setAddIsOpen(false)\n    }\n\n    const showVoteAttributesModal = () => {\n        setAddIsOpen(false)\n        setVoteTitlesIsOpen(false)\n        setImportPollIsOpen(false)\n        setVoteAttributesErrorIsOpen(false)\n        setVoteAttributesIsOpen(true)\n    }\n\n    const hideVoteAttributesModal = () => {\n        setVoteAttributesIsOpen(false)\n    }\n\n    const showVoteAttributesErrorModal = () => {\n        setAddIsOpen(false)\n        setVoteTitlesIsOpen(false)\n        setImportPollIsOpen(false)\n        setVoteAttributesIsOpen(false)\n        setVoteAttributesErrorIsOpen(true)\n    }\n\n    const hideVoteAttributesErrorModal = () => {\n        setVoteAttributesErrorIsOpen(false)\n    }\n\n    const showVoteTitlesModal = () => {\n        setAddIsOpen(false)\n        setVoteAttributesIsOpen(false)\n        setVoteAttributesErrorIsOpen(false)\n        setImportPollIsOpen(false)\n        setVoteTitlesIsOpen(true)\n    }\n\n    const hideVoteTitlesModal = () => {\n        setVoteTitlesIsOpen(false)\n    }\n\n    const showImportPollModal = () => {\n        setAddIsOpen(false)\n        setVoteAttributesIsOpen(false)\n        setVoteAttributesErrorIsOpen(false)\n        setVoteTitlesIsOpen(false)\n        setImportPollIsOpen(true)\n    }\n\n    const hideImportPollModal = () => {\n        setImportPollIsOpen(false)\n    }\n\n    const updateGameValidations = (validated_game_additions) => {\n        hideAddModal()\n        props.addvalidatedgames(validated_game_additions)\n    }\n\n    useEffect( () => {\n        if (props.activegamedata.length === 0) {\n            showAddModal()\n        } else {\n            hideAddModal()\n        }\n    }, [props])\n\n    let num_title_votes = 0\n    for (const gameId in props.activethumbs.titles) {\n        for (const vote of Object.keys(props.activethumbs.titles[gameId])) {\n            num_title_votes += props.activethumbs.titles[gameId][vote].length\n        }\n    }\n\n    const num_attr_votes = Object.keys(props.activethumbs.attributes.players).length\n    + Object.keys(props.activethumbs.attributes.weight).length\n    + Object.keys(props.activethumbs.attributes.category).length\n    + Object.keys(props.activethumbs.attributes.mechanic).length\n\n    const handleCopyToClipboard = () => {\n        let games = \"?newlist=\"\n        if (props.activegamedata.length) {\n            props.activegamedata.forEach((game) => {\n                if (games === \"?newlist=\") {\n                    games += game.id\n                } else {\n                    games = games + \"+\" + game.id\n                }\n            })\n        } else {\n            games = \"\"\n        }\n        games = window.location.href + games\n        let clipboardElement = document.getElementById(\"games-clipboard\")\n        clipboardElement.value = games\n        clipboardElement.select()\n        document.execCommand(\"copy\")\n    }\n\n    const clipboardValue = \"\"\n    const inlineStyle = {\n        position: \"absolute\",\n        left: \"-1000px\",\n        top: \"-1000px\"\n    }\n\n    const AddModal = () => {\n        return (\n            <React.Fragment>\n            <button className=\"default-primary-styles\" onClick={showAddModal}>Add Games</button>\n            <Modal size=\"md\" backdrop=\"static\" show={addIsOpen} onHide={hideAddModal}>\n                <ModalBody>\n                    <div id=\"gameinput-controls\">\n                        <AddGames\n                            activepoll={props.activepoll}\n                            onviewpoll={props.onviewpoll}\n                            routedgames={props.routedgames}\n                            updategamevalidations={updateGameValidations}\n                            cachedgametitles={props.cachedgametitles} />\n                    </div>\n                </ModalBody>\n                <ModalFooter> \n                    <button className=\"default-primary-styles\" onClick={hideAddModal}>Close</button>\n                </ModalFooter>\n            </Modal>\n            </React.Fragment>\n        )\n    }\n\n    const VoteTitlesModal = () => {\n        return (\n            <React.Fragment>\n            <button className=\"default-primary-styles\" onClick={showVoteTitlesModal}>Vote Games</button>\n            <Modal size=\"md\" show={voteTitlesIsOpen} onHide={hideVoteTitlesModal}>\n                <ModalBody>\n                    <div id=\"title-voting-controls\">\n                        { (props.activepoll.id !== 'local') &&\n                        <p className=\"warning\">INFO: Voting on titles in a poll is not yet supported.</p>\n                        }\n                        <VoteTitles\n                            user={props.user}\n                            activegamedata={props.activegamedata} \n                            titlethumbs={props.activethumbs.titles} \n                            onnewvote={props.onnewvote}\n                            ondeleteall={props.ondeleteall} />\n                    </div>\n                </ModalBody>\n                <ModalFooter> \n                    { props.activepoll.id === 'local' && \n                        <React.Fragment>\n                            <button className=\"default-danger-styles\" onClick={props.ondeleteall} disabled={props.activegamedata.length===0}>Remove All Games</button>\n                            <button className=\"default-danger-styles\" data-votingtype=\"all_titles\" onClick={props.onclearsectionvotes} disabled={num_title_votes===0}>Remove All Title Votes</button>\n                        </React.Fragment>\n                    }\n                    { props.activepoll.id !== 'local' && \n                        <React.Fragment>\n                            <button className=\"default-danger-styles\" data-votingtype=\"all_titles\" onClick={props.onclearsectionvotes}>Remove All Title Votes</button>\n                        </React.Fragment>\n                    }\n                    <button className=\"default-primary-styles\" onClick={hideVoteTitlesModal}>Close</button>\n                </ModalFooter>\n            </Modal>\n            </React.Fragment>\n        )\n    }\n\n    const VoteAttributesModal = () => {\n        if (props.activepoll.id === 'local') {\n            return (\n                <React.Fragment>\n                <button className=\"default-primary-styles\" onClick={showVoteAttributesModal}>Vote Attributes</button>\n                <Modal size=\"md\" show={voteAttributesIsOpen} onHide={hideVoteAttributesModal}>\n                    <ModalBody>\n                        <div id=\"attribute-voting-controls\">\n                            <VoteAttributes \n                                user={props.user}\n                                activegamedata={props.activegamedata}\n                                attrthumbs={props.activethumbs.attributes} \n                                onnewvote={props.onnewvote} />\n                        </div>\n                    </ModalBody>\n                    <ModalFooter> \n                        <button className=\"default-danger-styles\" data-votingtype=\"all_attributes\" onClick={props.onclearsectionvotes} disabled={num_attr_votes===0}>Remove All Attribute Votes</button>\n                        <button className=\"default-primary-styles\" onClick={hideVoteAttributesModal}>Close</button>\n                    </ModalFooter>\n                </Modal>\n                </React.Fragment>\n            )\n        } else {\n            return (\n                <React.Fragment>\n                <button className=\"default-primary-styles\" onClick={showVoteAttributesErrorModal}>Vote Attributes</button>\n                <Modal size=\"md\" show={voteAttributesErrorIsOpen} onHide={hideVoteAttributesErrorModal}>\n                    <ModalBody>\n                        <div id=\"attribute-voting-controls\">\n                            <p className=\"warning\">INFO: Voting on attributes is for personal use only. Only title votes will be counted for games in a poll.</p>\n                            <VoteAttributes \n                                user={props.user}\n                                activegamedata={props.activegamedata}\n                                attrthumbs={props.activethumbs.attributes} \n                                onnewvote={props.onnewvote} />\n                        </div>\n                    </ModalBody>\n                    <ModalFooter> \n                        <button className=\"default-danger-styles\" data-votingtype=\"all_attributes\" onClick={props.onclearsectionvotes} disabled={num_attr_votes===0}>Remove All Attribute Votes</button>\n                        <button className=\"default-primary-styles\" onClick={hideVoteAttributesErrorModal}>Close</button>\n                    </ModalFooter>\n                </Modal>\n                </React.Fragment>\n            )\n        }\n    }\n\n    const ImportPollModal = () => {\n\n        const onViewPoll = (poll) => {\n            hideImportPollModal()\n            props.onviewpoll(poll)\n        }\n\n        return (\n            <React.Fragment>\n            <button className=\"default-primary-styles\" onClick={showImportPollModal}>Import Poll</button>\n            <Modal size=\"md\" show={importPollIsOpen} onHide={hideImportPollModal}>\n                <ModalBody>\n                    <div id=\"poll-import-controls\">\n                        <ImportPoll\n                            activepoll={props.activepoll}\n                            onviewpoll={onViewPoll} />\n                    </div>\n                </ModalBody>\n                <ModalFooter> \n                    <button className=\"default-primary-styles\" onClick={hideImportPollModal}>Close</button>\n                </ModalFooter>\n            </Modal>\n            </React.Fragment>\n        )\n    }\n\n    const CopyToClipboard = () => {\n        return (\n            <React.Fragment>\n            <button className=\"default-primary-styles\" onClick={handleCopyToClipboard} >Copy List <FontAwesomeIcon icon={faClipboard} /></button>\n            <section>\n                <form>\n                    <textarea id=\"games-clipboard\" style={inlineStyle} defaultValue={clipboardValue}></textarea>\n                </form>\n            </section>\n            </React.Fragment>\n        )\n    }\n\n    return (\n        <React.Fragment>\n        <div id=\"main-controls\">\n\n            <AddModal />\n\n            <VoteTitlesModal />\n\n            <VoteAttributesModal />\n\n            <ImportPollModal />\n\n            <CopyToClipboard />\n\n        </div>\n        </React.Fragment>\n    )\n}\n\nMainControls.propTypes = {\n    user: PropTypes.string,\n    routedgames: PropTypes.object.isRequired,\n    activegamedata: PropTypes.array.isRequired,\n    activethumbs: PropTypes.object.isRequired,\n    cachedgametitles: PropTypes.object.isRequired,\n    addvalidatedgames: PropTypes.func.isRequired,\n    ondeleteall: PropTypes.func.isRequired,\n    onnewvote: PropTypes.func.isRequired,\n    onclearsectionvotes: PropTypes.func.isRequired,\n    activepoll: PropTypes.object.isRequired,\n    onviewpoll: PropTypes.func.isRequired,\n}","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faThumbsUp as ThumbsUpSolid } from '@fortawesome/free-solid-svg-icons'\nimport { faThumbsUp as ThumbsUpRegular } from '@fortawesome/free-regular-svg-icons'\n\nexport const Thumbnail = (props) => {\n\n    const getAttributeCountLabel = (attributecount) => {\n        let label\n        if (props.reallynarrow) {\n            label = 'attr.'\n        } else if (attributecount !== 1) {\n            label = 'attrs. match'\n        } else {\n            label = 'attr. matches'\n        }\n        return label\n    }\n\n    const printAttributeTally = () => {\n        // display attribute votes with title votes\n        if (props.mythumbcounts.attributes && props.mythumbcounts.titles) {\n            return (\n                <span>& {props.mythumbcounts.attributes} {getAttributeCountLabel(props.mythumbcounts.attributes)}</span>\n            )\n        // display attribute votes without title votes\n        } else if (props.mythumbcounts.attributes && !props.mythumbcounts.titles) {\n            return (\n                <span>{props.mythumbcounts.attributes} {getAttributeCountLabel(props.mythumbcounts.attributes)}</span>\n            )\n        // no attribute votes to display\n        } else {\n            return null\n        }\n    }\n\n    const printTitleTally = () => {\n        if (props.activepoll.id !== 'local'\n          && props.activethumbs.total_title_votes \n          && typeof props.mythumbcounts !== 'undefined'\n          && props.mythumbcounts.hasOwnProperty('titles') ) {\n            let extra_text = null\n            if (props.mythumbcounts.my_rank > 0 && props.mythumbcounts.titles >= props.mythumbcounts.my_rank) {\n                extra_text = 'incl. You'\n                return (\n                    <React.Fragment>\n                        <div>&nbsp;{props.mythumbcounts.titles}</div>\n                        <div className=\"extra-text\">{extra_text}</div>\n                    </React.Fragment>\n                )\n            } else {\n                return (\n                    <div>&nbsp;{props.mythumbcounts.titles}</div>\n                )\n            }\n        } else {\n            return null\n        }\n    }\n\n    const printVoteCount = () => {\n        return (\n            <div className=\"vote-count\">\n                <div className=\"vote-count-heading\">\n                    <FontAwesomeIcon icon={ThumbsUpSolid} />\n                    { printTitleTally() }\n                </div>\n                <div className=\"vote-count-subheading\">\n                    { printAttributeTally() }\n                </div>\n            </div>\n            )\n    }\n\n    const printThumbnailOverlay = () => {\n\n        if (props.mythumbcounts.titles) {\n            return (\n                <React.Fragment>\n                { printVoteCount() }\n                </React.Fragment>\n            )\n        } else {\n            return (\n                <React.Fragment>\n                <div className=\"voting-affordance\">\n                    <div className=\"vote-count-heading\">\n                        <FontAwesomeIcon icon={ThumbsUpRegular} />\n                    </div>\n                </div>\n                { printVoteCount() }\n                </React.Fragment>\n            )\n        }\n\n    }\n\n    return (\n        <div className=\"thumbnail\">\n            <img src={props.url} alt=\"game box cover\" />\n            { printThumbnailOverlay() }\n        </div>\n    )\n}\n\nThumbnail.propTypes = {\n    activethumbs: PropTypes.object.isRequired,\n    activepoll: PropTypes.object.isRequired,\n    mythumbcounts: PropTypes.object,\n    id: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    reallynarrow: PropTypes.bool.isRequired,\n    url: PropTypes.string,\n}","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faInfoCircle } from '@fortawesome/free-solid-svg-icons'\nimport { faTrash } from '@fortawesome/free-solid-svg-icons'\nimport { faClock } from '@fortawesome/free-solid-svg-icons'\nimport { faUserFriends } from '@fortawesome/free-solid-svg-icons'\nimport { Thumbnail } from './Thumbnail'\n\nexport const GameCardFront = (props) => {\n\n    const getClasses = (section, attrName) => {\n        let classes = 'clickable attribute'\n        if (section === 'weight') {\n            let weight_vote = getWeightVote(attrName)\n            classes += ` weight ${weight_vote}`\n        } else if (section === 'supported-playercount') {\n            const supported_players_vote = getPlayersVote(props.attributes.min_players, props.attributes.max_players)\n            classes += ` supported-playercount ${supported_players_vote}`\n        } else {\n            classes += (props.activethumbs.attributes[section].hasOwnProperty(attrName) \n                        && props.activethumbs.attributes[section][attrName].hasOwnProperty('thumbsup')\n                        && props.activethumbs.attributes[section][attrName].thumbsup.length)\n                ? ' thumbsup'\n                : ' novote'\n        }\n        return classes\n    }\n\n    const getUpvotedCategories = () => {\n        return Object.entries(props.activethumbs.attributes['category'])\n          .filter( entry => entry[1].hasOwnProperty('thumbsup') && entry[1].thumbsup.length )\n          .map( entry => entry[0] )\n          .filter( category => props.attributes.categories.includes(category) )\n    }\n\n    const getUpvotedMechanics = () => {\n        return Object.entries(props.activethumbs.attributes['mechanic'])\n          .filter( entry => entry[1].hasOwnProperty('thumbsup') && entry[1].thumbsup.length )\n          .map( entry => entry[0] )\n          .filter( mechanic => props.attributes.mechanics.includes(mechanic) )\n    }\n\n    // player count section gets only one, aggregated vote; only one <li> (ex: \"2-6 players\") \n    const getPlayersVote = (myminplayers, mymaxplayers) => {\n        let vote = \"novote\"\n        Object.entries(props.activethumbs.attributes.players).forEach( (votedPlayercount) => {\n            const voted = parseInt(votedPlayercount[0].slice(0, -1))\n            if (voted >= myminplayers\n                && voted <= mymaxplayers\n                && votedPlayercount[1].hasOwnProperty('thumbsup')\n                && votedPlayercount[1].thumbsup.length) {\n                vote = \"thumbsup\"\n            }\n        })\n        return vote\n    }\n\n    // vote section gets only one, aggregated vote; only one <li> (ex: \"medium heavy\") \n    const getWeightVote = (myweight) => {\n        let vote = \"novote\"\n        Object.entries(props.activethumbs.attributes.weight).forEach( (votedWeight) => {\n            if (myweight === votedWeight[0]\n              && votedWeight[1].hasOwnProperty('thumbsup') \n              && votedWeight[1].thumbsup.length) {\n                vote = \"thumbsup\"\n            }\n        })\n        return vote\n    }\n\n    const getWeightName = (myweight) => {\n        if (props.reallynarrow) {\n            switch (myweight) {\n                case 'medium light':\n                    return 'm. light'\n                case 'medium heavy':\n                    return 'm. heavy'\n                default:\n                    return myweight\n            }\n        } else {\n            return myweight\n        }\n    }\n\n    const { id, thumbnail, activepoll, name, yearpublished, attributes, activethumbs, mythumbcounts, ontoggleinspection, onnewvote, ondelete, reallynarrow } = props\n    const upvoted_categories = getUpvotedCategories()\n    const upvoted_mechanics = getUpvotedMechanics()\n    let upvoted_attributes = [ ...upvoted_categories, ...upvoted_mechanics ].sort()\n    return (\n        <React.Fragment>\n        <section className=\"gamecard-header\">\n            <button className=\"fa fa-button\" onClick={ (e) => ondelete(e, id) }><FontAwesomeIcon icon={faTrash}/></button>\n            <button className=\"fa fa-button inspect\" onClick={ (e) => ontoggleinspection(e, id) }><FontAwesomeIcon icon={faInfoCircle}/></button>\n        </section>\n        <section className=\"gamecard-title\">\n            <h5 className=\"game-name\">{name}</h5>\n            {(yearpublished !== null) \n                ? <h6 className=\"game-yearpublished\">({yearpublished})</h6>\n                : <h6 className=\"game-yearpublished\">(#{id})</h6>\n            }\n        </section>\n        <section\n            className=\"gamecard-visual\"\n            data-votingtype=\"title\"\n            data-votingon={id}\n            data-newvote=\"thumbsup\"\n            onClick={onnewvote}\n            >\n            <Thumbnail \n              id={id} \n              name={name} \n              url={thumbnail} \n              activepoll={activepoll} \n              activethumbs={activethumbs} \n              mythumbcounts={mythumbcounts} \n              reallynarrow={reallynarrow} />\n            <div className=\"gamecardvisual-overlay\">\n                {(attributes.min_players !== attributes.max_players)\n                    ? <div className={getClasses('supported-playercount', null)}><FontAwesomeIcon icon={faUserFriends}/> {attributes.min_players}-{attributes.max_players}</div>\n                    : <div className={getClasses('supported-playercount', null)}><FontAwesomeIcon icon={faUserFriends}/> {attributes.min_players}</div>\n                }\n                {(attributes.min_playtime !== attributes.max_playtime)\n                    ? <div><FontAwesomeIcon icon={faClock}/> {attributes.min_playtime}-{attributes.max_playtime}'</div>\n                    : <div><FontAwesomeIcon icon={faClock}/> {attributes.min_playtime}'</div>\n                }\n            </div>\n        </section>\n        <div className=\"gamecard-weight\">\n            <div className=\"halfsized\">\n                {(attributes.min_players !== attributes.max_players)\n                    ? <div className={getClasses('supported-playercount', null)}><FontAwesomeIcon icon={faUserFriends}/> {attributes.min_players}-{attributes.max_players}</div>\n                    : <div className={getClasses('supported-playercount', null)}><FontAwesomeIcon icon={faUserFriends}/> {attributes.min_players}</div>\n                }\n                {(attributes.min_playtime !== attributes.max_playtime)\n                    ? <div className=\"estimated-playtime\"><FontAwesomeIcon icon={faClock}/> {attributes.min_playtime}-{attributes.max_playtime}'</div>\n                    : <div className=\"estimated-playtime\"><FontAwesomeIcon icon={faClock}/> {attributes.min_playtime}'</div>\n                }\n            </div>\n            <div \n              data-votingtype='weight'\n              data-votingon={attributes.average_weight_name}\n              data-newvote='thumbsup'\n              onClick={props.onnewvote}\n              className={getClasses('weight', attributes.average_weight_name)}>\n                  {getWeightName(attributes.average_weight_name)}\n              </div>\n        </div>\n        <div className=\"gamecard-upvoted-attributes\">\n            { upvoted_attributes.map( (value) =>\n                <div \n                  key={value} \n                  data-votingtype={ upvoted_categories.includes(value) ? 'category' : 'mechanic' }\n                  data-votingon={value}\n                  data-newvote='thumbsup'\n                  onClick={props.onnewvote}\n                  className=\"clickable attribute thumbsup\">\n                      {value.toLowerCase()}\n                  </div>\n            )}\n        </div>\n        <ul className=\"gamecard-categories\">\n            <li className=\"attribute-section-title\">Categories</li>\n            {(attributes.categories.length)\n                ? attributes.categories\n                  .map(value => \n                    <li \n                      key={value} \n                      data-votingtype='category'\n                      data-votingon={value}\n                      data-newvote='thumbsup'\n                      onClick={props.onnewvote}\n                      className={getClasses('category', value)}>\n                          {value.toLowerCase()}\n                      </li>)\n                : <li>(no categories)</li>\n            }\n        </ul>\n        <ul className=\"gamecard-mechanics\">\n            <li className=\"attribute-section-title\">Mechanics</li>\n            {(attributes.mechanics.length)\n                ? attributes.mechanics\n                  .map(value => \n                    <li \n                      key={value} \n                      data-votingtype='mechanic'\n                      data-votingon={value}\n                      data-newvote='thumbsup'\n                      onClick={props.onnewvote}\n                      className={getClasses('mechanic', value)}>\n                          {value.toLowerCase()}\n                      </li>)\n                : <li>(no mechanics)</li>\n            }\n        </ul>\n        </React.Fragment>\n    )\n}\n\nGameCardFront.propTypes = {\n    id: PropTypes.number.isRequired,\n    attributes: PropTypes.object.isRequired,\n    activepoll: PropTypes.object.isRequired,\n    activethumbs: PropTypes.object.isRequired,\n    mythumbcounts: PropTypes.object,\n    name: PropTypes.string.isRequired,\n    onnewvote: PropTypes.func.isRequired,\n    ondelete: PropTypes.func.isRequired,\n    ontoggleinspection: PropTypes.func.isRequired,\n    thumbnail: PropTypes.string,\n    yearpublished: PropTypes.number,\n    reallynarrow: PropTypes.bool.isRequired,\n}","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Thumbnail } from './Thumbnail'\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faInfoCircle } from '@fortawesome/free-solid-svg-icons'\nimport { faTrash } from '@fortawesome/free-solid-svg-icons'\n\nconst Description = (props) => {\n    const paragraphs = props.description.map ( (paragraph, idx) =>\n        <p key={idx}>{paragraph}</p>\n    )\n    return (\n        <section className=\"gamecard-description\">\n            { paragraphs }\n        </section>\n    )\n}\n\nDescription.propTypes = {\n    description: PropTypes.array.isRequired,\n}\n\nconst Comments = (props) => {\n    const comments = props.comments.map ( (comment, idx) =>\n        <li key={idx}><b>{comment.author}: </b>{comment.comment}</li>\n    )\n    return (\n        <ul className=\"gamecard-comments\">\n            { comments }\n        </ul>\n    )\n}\n\nComments.propTypes = {\n    comments: PropTypes.array.isRequired,\n}\n\nconst Videos = (props) => {\n    const videos = props.videos.map ( (video, idx) =>\n        <li key={idx}><b>{video.author}: </b><a href={video.link} target=\"_blank\" rel=\"noopener noreferrer\">{video.title}</a></li>\n    )\n    return (\n        <ul className=\"gamecard-videos\">\n            { videos }\n        </ul>\n    )\n}\n\nVideos.propTypes = {\n    videos: PropTypes.array.isRequired,\n}\n\nexport const GameCardBack = (props) => {\n\n    const { id, name, yearpublished, description, inspectingsection, comments, videos, activethumbs, activepoll, ontoggleinspection, oninspectionsectionchange, onnewvote, ondelete, reallynarrow, thumbnail, mythumbcounts } = props\n    return (\n        <React.Fragment>\n        <section className=\"gamecard-header\">\n            <button className=\"fa fa-button\" onClick={ (e) => ondelete(e, id) }><FontAwesomeIcon icon={faTrash}/></button>\n            <button className=\"fa fa-button inspect\" onClick={ (e) => ontoggleinspection(e, id) }><FontAwesomeIcon icon={faInfoCircle}/></button>\n        </section>\n        <section className=\"gamecard-collapse-control\">\n            <button className=\"fa fa-button inspect\" onClick={ (e) => ontoggleinspection(e, id) }><FontAwesomeIcon icon={faInfoCircle}/></button>\n        </section>\n        <section className=\"gamecard-title\">\n            <h5 className=\"game-name\">{name}</h5>\n            {(yearpublished !== null) \n                ? <h6 className=\"game-yearpublished\">({yearpublished})</h6>\n                : <h6 className=\"game-yearpublished\">(#{id})</h6>\n            }\n        </section>\n        <section \n            className=\"gamecard-visual\"\n            data-votingtype=\"title\"\n            data-votingon={id}\n            data-newvote=\"thumbsup\"\n            onClick={onnewvote}\n            >\n            <Thumbnail \n              id={id} \n              name={name} \n              url={thumbnail} \n              activepoll={activepoll} \n              activethumbs={activethumbs} \n              mythumbcounts={mythumbcounts} \n              reallynarrow={reallynarrow} />\n\n        </section>\n        <ul id=\"inspectionsection-selector\">\n            <li id=\"select-description\" className={\"segmentedcontrol darkbg\" + (inspectingsection === \"description\" ? \" selected\" : \"\")} onClick={oninspectionsectionchange}>{props.reallynarrow ? 'Desc.' : 'Description'}</li>\n            <li id=\"select-comments\" className={\"segmentedcontrol darkbg\" + (inspectingsection === \"comments\" ? \" selected\" : \"\")} onClick={oninspectionsectionchange}>Comments</li>\n            <li id=\"select-videos\" className={\"segmentedcontrol darkbg\" + (inspectingsection === \"videos\" ? \" selected\" : \"\")} onClick={oninspectionsectionchange}>Videos</li>\n        </ul>\n        <section className=\"gamecard-variable\">\n            <TransitionGroup>\n                {inspectingsection === \"description\" &&\n                    <CSSTransition \n                        key={0}\n                        in={true}\n                        appear={false}\n                        timeout={2000}\n                        classNames={\"showsegment\"}\n                    >\n                        <Description description={description} />\n                    </CSSTransition>\n                }\n                {inspectingsection === \"comments\" &&\n                    <CSSTransition \n                        key={1}\n                        in={true}\n                        appear={false}\n                        timeout={2000}\n                        classNames={\"showsegment\"}\n                    >\n                        <Comments comments={comments} />\n                    </CSSTransition>\n                }\n                {inspectingsection === \"videos\" &&\n                    <CSSTransition \n                        key={2}\n                        in={true}\n                        appear={false}\n                        timeout={2000}\n                        classNames={\"showsegment\"}\n                    >\n                        <Videos videos={videos} />\n                    </CSSTransition>\n                }\n            </TransitionGroup>\n        </section>\n        </React.Fragment>\n    )\n}\n\nGameCardBack.propTypes = {\n    id: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    activepoll: PropTypes.object.isRequired,\n    activethumbs: PropTypes.object.isRequired,\n    mythumbcounts: PropTypes.object,\n    yearpublished: PropTypes.number,\n    description: PropTypes.array.isRequired,\n    inspectingsection: PropTypes.string.isRequired,\n    comments: PropTypes.array,\n    videos: PropTypes.array,\n    ontoggleinspection: PropTypes.func.isRequired,\n    oninspectionsectionchange: PropTypes.func.isRequired,\n    onnewvote: PropTypes.func.isRequired,\n    ondelete: PropTypes.func.isRequired,\n    reallynarrow: PropTypes.bool.isRequired,\n}\n\nGameCardBack.defaultProps = {\n    comments: [{author: \"ERROR\", comment: \"(no comments for this game exist on BoardGameGeek.com)\"}],\n    videos: [{author: \"ERROR\", link: \"#\", title: \"(no videos for this game exist on BoardGameGeek.com)\"}]\n}","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { MainControls } from './MainControls'\nimport { GameCardFront } from './GameCardFront'\nimport { GameCardBack } from './GameCardBack'\nimport bggLogo from './img/bgg-logo-50.png'\n\nconst GameFooter = (props) => {\n    return (\n        <div className=\"footer\">\n            <a href={\"https://boardgamegeek.com/boardgame/\" + props.gameid } rel=\"noopener noreferrer\">\n                this game on BGG\n            </a>&nbsp;\n            <img src={bggLogo} alt=\"BoardGameGeek logo\" />\n        </div>\n    )\n}\n\nconst GamecardOverlay = (props) => {\n        if (props.mythumbcounts.poll_rank === 1) {\n            return (\n                <div className=\"gamecard-overlay\">WINNER!</div>\n\n            )\n        } else {\n            return null\n        }\n}\n\nconst Game = (props) => {\n        let gamecard\n        let gamecardClasses = 'game'\n\n        if (props.id === props.idunderinspection) {\n            gamecardClasses += ' inspecting'\n        } \n\n        if (typeof props.mythumbcounts !== 'undefined' \n          && props.mythumbcounts.poll_rank === 1) {\n            gamecardClasses += ' winner'\n        }\n\n        if (typeof props.mythumbcounts === 'undefined' \n          || !props.mythumbcounts.hasOwnProperty('titles') \n          || props.mythumbcounts.titles === 0) {\n            gamecardClasses += ' no-title-votes'\n        }\n\n        if (typeof props.mythumbcounts === 'undefined' \n          || !props.mythumbcounts.hasOwnProperty('attributes') \n          || props.mythumbcounts.attributes === 0) {\n            gamecardClasses += ' no-attribute-votes'\n        }\n\n        if (props.id !== props.idunderinspection) {\n            gamecard = <GameCardFront \n                id={props.id}\n                thumbnail={props.thumbnail}\n                activepoll={props.activepoll}\n                activethumbs={props.activethumbs} \n                mythumbcounts={props.mythumbcounts} \n                name={props.name}\n                yearpublished={props.yearpublished}\n                attributes={props.attributes}\n                ontoggleinspection={props.ontoggleinspection} \n                onnewvote={props.onnewvote}\n                ondelete={props.ondelete}\n                reallynarrow={props.reallynarrow} />\n        } else {\n            gamecard = <GameCardBack \n                id={props.id}\n                thumbnail={props.thumbnail}\n                activepoll={props.activepoll}\n                activethumbs={props.activethumbs}\n                mythumbcounts={props.mythumbcounts} \n                name={props.name}\n                yearpublished={props.yearpublished}\n                description={props.description}\n                inspectingsection={props.inspectingsection}\n                comments={props.comments}\n                videos={props.videos}\n                ontoggleinspection={props.ontoggleinspection} \n                oninspectionsectionchange={props.oninspectionsectionchange} \n                onnewvote={props.onnewvote}\n                ondelete={props.ondelete}\n                reallynarrow={props.reallynarrow} />\n        }\n        const gamecard_overlay = <GamecardOverlay mythumbcounts={props.mythumbcounts} />\n        return(\n            <section className={gamecardClasses}>\n                {gamecard_overlay}\n                {gamecard}\n                <section className=\"gamecard-footer\">\n                    <GameFooter gameid={props.id}/>\n                </section>\n            </section>\n        )\n    }\n\nexport const GameList = (props) => {\n\n    const [idUnderInspection, setIdUnderInspection] = useState(null)\n    const [inspectingSection, setInspectingSection] = useState('description')\n\n    useEffect( () => {\n        const stored_idunderinspection = JSON.parse(localStorage.getItem(\"idUnderInspection\"))\n        if (stored_idunderinspection !== null) {\n            setIdUnderInspection(stored_idunderinspection)\n        }\n    }, [])\n\n    const getThumbedTitleIds = (props) => {\n        // collect all of the voted titles\n        let titles = []\n        if (props.activethumbs.hasOwnProperty('titles')) {\n            for (let entry of Object.entries(props.activethumbs.titles)) {\n                if (entry[1].hasOwnProperty('thumbsup') && entry[1].thumbsup.length) {\n                    titles.push(parseInt(entry[0]))\n                }\n            }\n        }\n        return titles\n    } \n\n    const getThumbedPlayercounts = (props) => {\n        // collect all of the voted playercounts\n        let playercounts = []\n        if (props.activethumbs.attributes.hasOwnProperty('players')) {\n            for (let playercount in props.activethumbs.attributes.players) {\n                if (props.activethumbs.attributes.players[playercount].hasOwnProperty('thumbsup') \n                  && props.activethumbs.attributes.players[playercount].thumbsup.length) {\n                    playercounts.push(parseInt(playercount.slice(0, -1)))\n                }\n            }\n        }\n        return playercounts\n    } \n\n    const getThumbedWeights = (props) => {\n        // collect all of the voted weights\n        let weights = []\n        if (props.activethumbs.attributes.hasOwnProperty('weight')) {\n            for (let weight in props.activethumbs.attributes.weight) {\n                if (props.activethumbs.attributes.weight[weight].hasOwnProperty('thumbsup') \n                  && props.activethumbs.attributes.weight[weight].thumbsup.length) {\n                    weights.push(weight)\n                }\n            }\n        }\n        return weights\n    } \n\n    const getTotalVotes = () => {\n        // tally all votes for each game\n        let all_vote_counts = {}\n        if (props.activegamedata.length) {\n            for (const game of props.activegamedata) {\n                let new_vote_counts = {\n                    attributes: 0,\n                    titles: 0,\n                    poll_rank: 0,\n                    my_rank: 0\n                }\n                // playercount section of a game gets ONE TOTAL thumbsup if any of its supported playercounts gets a thumbsup\n                for (let playercount=game.attributes.min_players; playercount<=game.attributes.max_players; playercount++) {\n                    if (props.activethumbs.attributes.players.hasOwnProperty(playercount + 'P')\n                      && props.activethumbs.attributes.players[playercount + 'P'].hasOwnProperty('thumbsup')\n                      && props.activethumbs.attributes.players[playercount + 'P']['thumbsup'].length) {\n                        new_vote_counts.attributes++\n                        break\n                    }\n                }\n                // weight section of a game gets ONE TOTAL thumbsup if its weight has a thumbsup\n                if (props.activethumbs.attributes.weight.hasOwnProperty(game.attributes.average_weight_name)\n                  && props.activethumbs.attributes.weight[game.attributes.average_weight_name].hasOwnProperty('thumbsup')\n                  && props.activethumbs.attributes.weight[game.attributes.average_weight_name]['thumbsup'].length) {\n                    new_vote_counts.attributes++\n                }\n                // categories section of a game gets one thumbsup for each thumbed-up category\n                for (const category of game.attributes.categories) {\n                    if (props.activethumbs.attributes.category.hasOwnProperty(category)\n                      && props.activethumbs.attributes.category[category].hasOwnProperty('thumbsup')\n                      && props.activethumbs.attributes.category[category]['thumbsup'].length) {\n                        new_vote_counts.attributes++\n                    }\n                }\n                // mechanics section of a game gets one thumbsup for each thumbed-up mechanic\n                for (const mechanic of game.attributes.mechanics) {\n                    if (props.activethumbs.attributes.mechanic.hasOwnProperty(mechanic)\n                      && props.activethumbs.attributes.mechanic[mechanic].hasOwnProperty('thumbsup')\n                      && props.activethumbs.attributes.mechanic[mechanic]['thumbsup'].length) {\n                        new_vote_counts.attributes++\n                    }\n                }\n\n                // title votes\n                if (props.activethumbs.hasOwnProperty('titles') \n                  && props.activethumbs.titles.hasOwnProperty(game.id.toString())\n                  && props.activethumbs.titles[game.id].hasOwnProperty('thumbsup')) {\n\n                    if (props.activepoll.id !== 'local') {\n                        new_vote_counts.titles = props.activethumbs.titles[game.id.toString()].thumbsup.length\n                    } else {\n                        let myVote = JSON.parse(JSON.stringify(props.activethumbs.titles[game.id.toString()].thumbsup)).filter( vote => vote.user === props.user )\n                        new_vote_counts.titles = myVote.length\n                    }\n                    const myVote = JSON.parse(JSON.stringify(props.activethumbs.titles[game.id.toString()].thumbsup)).filter( (vote) => {\n                        if (props.user !== null) {\n                            if (vote.user === props.user) {\n                                return true\n                            } else {\n                                return false\n                            }\n                        } else {\n                            if (vote.user === null) {\n                                return true\n                            } else {\n                                return false\n                            }\n                        }\n                    })\n                    if (myVote.length === 1) {\n                        new_vote_counts.my_rank = myVote[0].rank\n                    } else {\n                        new_vote_counts.my_rank = null\n                    }\n                }\n\n                // poll winner\n                if (props.activepoll.id !== 'local'\n                  && props.activethumbs.hasOwnProperty('winners')\n                  && props.activethumbs.winners.includes(game.id)) {\n                    new_vote_counts.poll_rank = 1\n                }\n\n                all_vote_counts[game.id] = new_vote_counts\n            }\n        }\n        return all_vote_counts\n    } \n\n    const handleInspectionChange = (event, id) => {\n        const gameId = parseInt(id)\n        if (idUnderInspection === gameId) {\n            localStorage.setItem('idUnderInspection', JSON.stringify(null))\n            setIdUnderInspection(null)\n        } else {\n            localStorage.setItem('idUnderInspection', JSON.stringify(gameId))\n            setIdUnderInspection(gameId)\n        }\n    }\n\n    const handleInspectionSectionChange = (event) => {\n        const newSelection = event.target.id.replace(/select-/g, '')\n        setInspectingSection(newSelection)\n    }\n\n    // apply a title filter, if configured and if title votes exist\n    const filterTitles = (games) => {\n        const favoredTitleIds = getThumbedTitleIds(props)\n        const filtered = games.filter(function(game) {\n            if (!props.filtertitles || !favoredTitleIds.length) {\n                return true\n            } else if (favoredTitleIds.includes(game.id)) {\n                return true\n            } else {\n                return false\n            }\n        })\n        return filtered\n    }\n\n    // apply a playercount filter, if configured and if playercount votes exist\n    const filterPlayercount = (games) => {\n        const favoredPlayercounts = getThumbedPlayercounts(props)\n        const filtered = games.filter(function(game) {\n            if (!props.filterplayercount || !favoredPlayercounts.length) {\n                return true\n            } else {\n                for (let playercount=game.attributes.min_players; playercount<=game.attributes.max_players; playercount++) {\n                    if (favoredPlayercounts.includes(playercount)) {\n                        return true\n                    }\n                }\n                return false\n            }\n        })\n        return filtered\n    }\n\n    // apply a weight filter, if configured and if weight votes exist\n    const filterWeight = (games) => {\n        const favoredWeights = getThumbedWeights(props)\n        const filtered = games.filter(function(game) {\n            if (!props.filterweight || !favoredWeights.length) {\n                return true\n            } else if (favoredWeights.includes(game.attributes.average_weight_name)) {\n                return true\n            } else {\n                return false\n            }\n        })\n        return filtered\n    }\n\n    // order the games\n    const sortGames = (games, votecounts) => {\n        // SORTING OPTIONS:\n        //   sort by alphabetical...  FIRST: alphabetical\n        //   sort by maxtitlevotes... FIRST: most title votes,  SECOND: most attr votes\n        //   sort by maxattrvotes...  FIRST: most attr votes,   SECOND: most title votes\n        //   sort by minplaytime...   FIRST: shortest playtime, SECOND: most title votes, THIRD: most attr votes\n        //   sort by maxplayers...    FIRST: most players,      SECOND: most title votes, THIRD: most attr votes\n        const sorted = games.sort(function(a, b) {\n            if (props.sortby === 'alphabetical') {\n                if (a.unambiguous_name < b.unambiguous_name) {\n                    return -1\n                } else if (a.unambiguous_name < b.unambiguous_name) {\n                    return 1\n                } else {\n                    return 0\n                }\n            } else if (props.sortby === 'maxtitlevotes') {\n                if (votecounts[a.id].titles < votecounts[b.id].titles) {\n                    return 1\n                } else if (votecounts[a.id].titles > votecounts[b.id].titles) {\n                    return -1\n                } else {\n                    if (votecounts[a.id].attributes < votecounts[b.id].attributes) {\n                        return 1\n                    } else if (votecounts[a.id].attributes > votecounts[b.id].attributes) {\n                        return -1\n                    } else {\n                        if (a.attributes.max_playtime > b.attributes.max_playtime) {\n                            return 1\n                        } else if (a.attributes.max_playtime < b.attributes.max_playtime) {\n                            return -1\n                        } else {\n                            return 0\n                        }\n                    }\n                }\n            } else if (props.sortby === 'maxattrvotes') {\n                if (votecounts[a.id].attributes < votecounts[b.id].attributes) {\n                    return 1\n                } else if (votecounts[a.id].attributes > votecounts[b.id].attributes) {\n                    return -1\n                } else {\n                    if (votecounts[a.id].titles < votecounts[b.id].titles) {\n                        return 1\n                    } else if (votecounts[a.id].titles > votecounts[b.id].titles) {\n                        return -1\n                    } else {\n                        if (a.attributes.max_playtime > b.attributes.max_playtime) {\n                            return 1\n                        } else if (a.attributes.max_playtime < b.attributes.max_playtime) {\n                            return -1\n                        } else {\n                            return 0\n                        }\n                    }\n                }\n            } else if (props.sortby === 'minplaytime') {\n                if (a.attributes.max_playtime > b.attributes.max_playtime) {\n                    return 1\n                } else if (a.attributes.max_playtime < b.attributes.max_playtime) {\n                    return -1\n                } else {\n                    if (votecounts[a.id].titles < votecounts[b.id].titles) {\n                        return 1\n                    } else if (votecounts[a.id].titles > votecounts[b.id].titles) {\n                        return -1\n                    } else {\n                        if (votecounts[a.id].attributes < votecounts[b.id].attributes) {\n                            return 1\n                        } else if (votecounts[a.id].attributes > votecounts[b.id].attributes) {\n                            return -1\n                        } else {\n                            return 0\n                        }\n                    }\n                }\n            } else if (props.sortby === 'maxplayers') {\n                if (a.attributes.max_players < b.attributes.max_players) {\n                    return 1\n                } else if (a.attributes.max_players > b.attributes.max_players) {\n                    return -1\n                } else {\n                    if (votecounts[a.id].titles < votecounts[b.id].titles) {\n                        return 1\n                    } else if (votecounts[a.id].titles > votecounts[b.id].titles) {\n                        return -1\n                    } else {\n                        if (votecounts[a.id].attributes < votecounts[b.id].attributes) {\n                            return 1\n                        } else if (votecounts[a.id].attributes > votecounts[b.id].attributes) {\n                            return -1\n                        } else {\n                            return 0\n                        }\n                    }\n                }\n            } else {\n                return 0\n            }\n        })\n        return sorted\n    }\n\n    const getClasses = () => {\n        let classes = ''\n        if (props.activethumbs.total_title_votes !== 0) {\n            classes += 'deemphasize-nonvoted-titles'\n        }\n        return classes\n    }\n\n    const all_thumbcounts = getTotalVotes()\n    const sortedFilteredGames = sortGames(filterWeight(filterPlayercount(filterTitles(props.activegamedata))), all_thumbcounts)\n    return (\n        <React.Fragment>\n        <MainControls \n            user={props.user}\n            routedgames={props.routedgames}\n            activegamedata={props.activegamedata}\n            activethumbs={props.activethumbs}\n            cachedgametitles={props.cachedgametitles}\n            addvalidatedgames={props.addvalidatedgames}\n            ondeleteall={props.ondeleteall}\n            onnewvote={props.onnewvote}\n            onclearsectionvotes={props.onclearsectionvotes}\n            activepoll={props.activepoll}\n            onviewpoll={props.onviewpoll} />\n        <div id=\"resulting-games\" className={getClasses()}>\n            {sortedFilteredGames.length !== 0 && (\n                sortedFilteredGames\n                    .map(\n                        (game, i) => \n                            <Game\n                                key={i}\n                                id={game.id} \n                                idunderinspection={idUnderInspection}\n                                inspectingsection={inspectingSection}\n                                name={game.name} \n                                thumbnail={game.thumbnail} \n                                description={game.description} \n                                yearpublished={game.year_published} \n                                attributes={game.attributes}\n                                comments={game.comments}\n                                videos={game.videos}\n                                activepoll={props.activepoll}\n                                activethumbs={props.activethumbs} \n                                mythumbcounts={all_thumbcounts[game.id]}\n                                onnewvote={props.onnewvote}\n                                ondelete={props.ondelete}\n                                ontoggleinspection={handleInspectionChange}\n                                oninspectionsectionchange={handleInspectionSectionChange}\n                                reallynarrow={props.reallynarrow} />)\n            )}\n            {props.activegamedata.length === 0 && (\n                <span className=\"message warning\">\n                    <p>No board games to compare yet!</p>\n                    <p>Please add game titles by clicking \"Add Games\".</p>\n                </span>\n            )}\n        </div>\n        </React.Fragment>\n    )\n}\n\nGameList.propTypes = {\n    user: PropTypes.string,\n    routedgames: PropTypes.object.isRequired,\n    activegamedata: PropTypes.array.isRequired,\n    sortby: PropTypes.string.isRequired,\n    filtertitles: PropTypes.bool.isRequired,\n    filterplayercount: PropTypes.bool.isRequired,\n    filterweight: PropTypes.bool.isRequired,\n    cachedgametitles: PropTypes.object.isRequired,\n    addvalidatedgames: PropTypes.func.isRequired,\n    ondelete: PropTypes.func.isRequired,\n    ondeleteall: PropTypes.func.isRequired,\n    activethumbs: PropTypes.object.isRequired,\n    onnewvote: PropTypes.func.isRequired,\n    onclearsectionvotes: PropTypes.func.isRequired,\n    activepoll: PropTypes.object.isRequired,\n    onviewpoll: PropTypes.func.isRequired,\n    reallynarrow: PropTypes.bool.isRequired,\n}","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport Modal from 'react-bootstrap/Modal'\nimport ModalBody from 'react-bootstrap/ModalBody'\nimport ModalFooter from 'react-bootstrap/ModalFooter'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faInfoCircle } from '@fortawesome/free-solid-svg-icons'\n\n\nexport const PollInfo = (props) => {\n\n    const [pollInfoIsOpen, setPollInfoIsOpen] = useState(false)\n\n    const showPollInfoModal = () => {\n        setPollInfoIsOpen(true)\n    }\n\n    const hidePollInfoModal = () => {\n        setPollInfoIsOpen(false)\n    }\n\n    const epochToLocal = (epoch) => {\n        let d = new Date(epoch)\n        const dayName = d.toString().split(' ')[0]\n        return dayName + ' ' + d.toLocaleDateString('en-US', { \n            day: '2-digit',\n            month: '2-digit',\n            year:'numeric'\n        })\n    }\n\n    if (props.poll.id === 'local') {\n        return (\n            <p></p>\n        )\n    }  else {\n\n        // tally the votes\n        let voteTally = {}\n        Object.entries(props.poll.pollThumbs.titles).forEach( entry => {\n            let name = props.gamedata.filter( gamedata => gamedata.id === parseInt(entry[0]) )[0].unambiguous_name\n            if (entry[1].hasOwnProperty('thumbsup')) {\n                let thumbsupVotes = JSON.parse(JSON.stringify(entry[1].thumbsup)).map( vote => vote.user ).sort( (a,b) => {\n                    if (a === props.user) {\n                        return -1\n                    } else if (b === props.user) {\n                        return 1\n                    } else if (a < b) {\n                        return - 1\n                    } else if (a > b) {\n                        return 1\n                    } else {\n                        return 0\n                    }\n                })\n                voteTally[name] = thumbsupVotes \n            }\n        })\n\n\n        // sort the tallied votes\n        let sortedVoteTally = Object.entries(voteTally).sort( (a,b) => {\n            if (a[1].length > b[1].length) {\n                return -1\n            } else if (a[1].length < b[1].length) {\n                return 1\n            } else {\n                return 0\n            }\n        })\n\n        // tag each game with a ranking string\n        for (let idx=0; idx<sortedVoteTally.length; idx++) {\n            let rankStr = ''\n            if (idx === 0) {\n                rankStr = '1'\n            } else {\n                // if the previous vote count equals this one, use the previous rankStr\n                if (sortedVoteTally[idx][1].length === sortedVoteTally[idx-1][1].length) {\n                    if (!sortedVoteTally[idx-1][2].endsWith('T')) {\n                        sortedVoteTally[idx-1][2] += 'T'\n                    }\n                    rankStr = sortedVoteTally[idx-1][2]\n                } else {\n                    rankStr = (idx + 1).toString()\n                }\n            }\n            sortedVoteTally[idx].push(rankStr)\n        }\n\n        return (\n            <div id=\"poll-info\">\n                <button className={(props.poll.id !== 'local') ? \"fa fa-button poll-info\" : null} onClick={showPollInfoModal}><FontAwesomeIcon icon={faInfoCircle}/></button>\n                <Modal size=\"md\" show={pollInfoIsOpen} onHide={hidePollInfoModal}>\n                    <ModalBody>\n                        <h4>{props.poll.name}</h4>\n                        <table id=\"poll-metadata\">\n                            <tbody>\n                                <tr>\n                                    <th>ID:</th><td>{props.poll.id}</td>\n                                </tr>\n                                <tr>\n                                    <th>created:</th><td>{epochToLocal(props.poll.id)}</td>\n                                </tr>\n                                <tr>\n                                    <th>updated:</th><td>{epochToLocal(props.poll.updatedAt)}</td>\n                                </tr>\n                                <tr>\n                                    <th>closes:</th><td>{epochToLocal(props.poll.closesAt)}</td>\n                                </tr>\n                            </tbody>\n                        </table>\n                        <table id=\"poll-results\">\n                            <tbody>\n                                { sortedVoteTally.map( (game, i) =>\n                                    <tr key={i}>\n                                        <th>{game[2]}.</th>\n                                        <td>{game[0]}</td>\n                                        <td>\n                                            { game[1].map( (vote, j) => {\n                                                let comma = (j !== game[1].length - 1) ? ', ' : ''\n                                                if (vote === props.user) {\n                                                    return(\n                                                        <span key={j} className={'you'}>You{comma}</span>\n                                                    )\n                                                } else {\n                                                    return(\n                                                        <span key={j}>{vote}{comma}</span>\n                                                    )\n                                                }\n                                            })}\n                                        </td>\n                                    </tr>\n                                )}\n                            </tbody>\n                        </table>\n                    </ModalBody>\n                    <ModalFooter> \n                        <button className=\"default-primary-styles\" onClick={hidePollInfoModal}>Close</button>\n                    </ModalFooter>\n                </Modal>\n            </div>\n        )\n    }\n\n}\n\nPollInfo.propTypes = {\n    poll: PropTypes.object.isRequired,\n    gamedata: PropTypes.array.isRequired,\n    user: PropTypes.string,\n}","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport purpleMeeple from './img/purple-meeple-64.png'\nimport { ViewControls } from './ViewControls'\nimport { GameList } from './GameList'\nimport { PollInfo } from './PollInfo'\nimport { validateUserTitles } from './GameLibrary'\nimport { voteinpollApi, clearmyvotesApi, deletetitleinpollApi } from './Api.js'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faBars } from '@fortawesome/free-solid-svg-icons'\n\n\nconst TitleString = (props) => {\n    if (props.poll.id === 'local') {\n        return (\n            <h1 className=\"big\">Boardgameinator</h1>\n        )\n    }  else {\n        return (\n            <h1>{props.poll.name}</h1>\n        )\n    }\n}\n\nconst Clock = (props) => {\n\n    const [delta, setDelta] = useState(0);\n    const [deltaDays, setDeltaDays] = useState('-');\n    const [deltaHours, setDeltaHours] = useState('-');\n    const [deltaMins, setDeltaMins] = useState('-');\n    const [deltaSecs, setDeltaSecs] = useState('-');\n\n    useEffect( () => {\n\n        if (props.poll.id !== 'local') {\n\n            // Begin the countdown timer for the current poll\n            const timerId = setInterval( () => {\n\n                const now = new Date().getTime();\n                let deltaDays = 0, deltaHours = 0, deltaMins = 0\n                let delta = parseInt(props.poll.closesAt) - now\n                let deltaSecs = Math.floor(delta / 1000)\n                if (delta > 0) {\n                    if (deltaSecs > 59) {\n                        deltaMins = Math.floor(deltaSecs / 60)\n                        deltaSecs -= deltaMins * 60\n                        if (deltaMins > 59) {\n                            deltaHours = Math.floor(deltaMins / 60)\n                            deltaMins -= deltaHours * 60\n                            if (deltaHours > 23) {\n                                deltaDays = Math.floor(deltaHours / 24)\n                                deltaHours -= deltaDays * 24\n                            }\n                        }\n                    }\n                }\n                setDelta(delta)\n                setDeltaDays(deltaDays)\n                setDeltaHours(deltaHours)\n                setDeltaMins(deltaMins)\n                setDeltaSecs(deltaSecs)\n            }, 1000);\n\n            return () => clearInterval(timerId);\n        }\n\n    }, [props.poll.closesAt, props.poll.id]);\n\n    if (props.poll.id === 'local') {\n        return (\n            <p></p>\n        )\n    } else if (delta < 0) {\n        return (\n            <p id=\"countdown\">results final</p>\n        )\n    } else {\n        return (\n            <div id=\"clock\">\n                <p id=\"countdown-label\">\n                    voting closes:\n                </p>\n                <div id=\"countdown\">\n                    <div className=\"delta\">\n                        <div className=\"value\">{deltaDays}</div>\n                        <div className=\"units\">days</div>\n                    </div>\n                    <div className=\"delta\">\n                        <div className=\"value\">{deltaHours}</div>\n                        <div className=\"units\">hours</div>\n                    </div>\n                    <div className=\"delta\">\n                        <div className=\"value\">{deltaMins}</div>\n                        <div className=\"units\">mins</div>\n                    </div>\n                    <div className=\"delta\">\n                        <div className=\"value\">{deltaSecs}</div>\n                        <div className=\"units\">secs</div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport class Boardgameinator extends React.Component {\n\n    constructor(props) {\n        super(props)\n        this.state = { \n            activeGameList: [],\n            activePoll: { \n                id: 'local',\n                name: 'local',\n            },\n            allGameData: [],\n            activeThumbs: {\n                attributes: {\n                    players: {}, \n                    weight: {}, \n                    category: {}, \n                    mechanic: {}\n                },\n                total_attribute_votes: 0,\n                titles: {},\n                total_title_votes: 0,\n            },\n            allThumbs:  {\n                local: {\n                    attributes: {\n                        players: {}, \n                        weight: {}, \n                        category: {}, \n                        mechanic: {}\n                    },\n                    total_attribute_votes: 0,\n                    titles: {},\n                    total_title_votes: 0,\n                }\n            },\n            filterTitles: false,\n            filterPlayercount: true,\n            filterWeight: true,\n            localGameList: [],\n            routedGames: {},\n            sortOrder: 'alphabetical',\n            user: null,\n            windowWidth: 0,\n            windowHeight: 0\n        }\n        this.getCachedGameTitles = this.getCachedGameTitles.bind(this)\n        this.addValidatedGamesWithPollContext = this.addValidatedGamesWithPollContext.bind(this)\n        this.addValidatedGames = this.addValidatedGames.bind(this)\n        this.deleteTitleInPoll = this.deleteTitleInPoll.bind(this)\n        this.onNewVote = this.onNewVote.bind(this)\n        this.onDeleteTitle = this.onDeleteTitle.bind(this)\n        this.onDeleteAllTitles = this.onDeleteAllTitles.bind(this)\n        this.onClearSectionVotes = this.onClearSectionVotes.bind(this)\n        this.onViewPoll = this.onViewPoll.bind(this)\n        this.handleSortChange = this.handleSortChange.bind(this)\n        this.handleFilterChange = this.handleFilterChange.bind(this)\n        this.handleUserChange = this.handleUserChange.bind(this)\n        this.updateDimensions = this.updateDimensions.bind(this)\n    }\n\n    gamedataVersion = 1\n\n    componentDidMount() {\n\n        let allGameData = [], routed_new_list = [], routed_addto_list = [], routed_pollid = null\n        let path = this.props.location.search.slice(1).split('?')\n\n        const stored_user = JSON.parse(localStorage.getItem(\"user\"))\n        if (stored_user !== null) {\n            this.setState({ user: stored_user })\n        }\n\n        const query_strings = (path.length === 1) ? path[0] : path[1] \n        query_strings.split('&').forEach( function(query_string) {\n            const qs = query_string.split('=')\n            if (qs[0] === 'newlist') {\n                qs[1].split('+').forEach( function(game_id) {\n                  if (!routed_new_list.includes(parseInt(game_id))) {\n                    routed_new_list.push(parseInt(game_id))\n                  }\n                })\n            } else if (qs[0] === 'addtolist') {\n                qs[1].split('+').forEach( function(game_id) {\n                  if (!routed_addto_list.includes(parseInt(game_id))) {\n                    routed_addto_list.push(parseInt(game_id))\n                  }\n                })\n            } else if (qs[0] === 'poll' && !isNaN(parseInt(qs[1]))) {\n                routed_pollid = parseInt(qs[1])\n            }\n        })\n        if (routed_pollid !== null) {\n            routed_addto_list = [] // ignore addto_list and new_list if poll ID exists\n            routed_new_list = []\n        } else if (routed_new_list.length && routed_addto_list.length) {\n            routed_addto_list = [] // ignore addto_list if new_list exists\n        }\n        let updated_routedGames = {}\n        updated_routedGames['new_list'] = [...routed_new_list]\n        updated_routedGames['addto_list'] = [...routed_addto_list]\n        updated_routedGames['pollid'] = routed_pollid\n        this.setState({ routedGames: updated_routedGames })\n\n        const stored_localGameList = JSON.parse(localStorage.getItem(\"localGameList\"))\n        if (stored_localGameList !== null) {\n            this.setState({ localGameList: stored_localGameList })\n        }\n\n        const stored_activeGameList = JSON.parse(localStorage.getItem(\"activeGameList\"))\n        if (stored_activeGameList !== null && routed_new_list.length === 0 && routed_pollid === null) {\n            this.setState({ activeGameList: stored_activeGameList })\n        } else {\n            this.setState({ activeGameList: [] })\n        }\n\n        const stored_activePoll = JSON.parse(localStorage.getItem(\"activePoll\"))\n        if (stored_activePoll !== null) {\n            this.setState({ activePoll: stored_activePoll })\n        } else {\n            const default_poll = {\n                id: 'local',\n                name: 'local',\n            }\n            this.setState({ activePoll: default_poll })\n        }\n\n        const stored_gamedataVersion = JSON.parse(localStorage.getItem(\"gamedataVersion\"))\n        if (stored_gamedataVersion === this.gamedataVersion) {\n            allGameData = JSON.parse(localStorage.getItem(\"allGameData\"))\n        } else {\n            localStorage.setItem('gamedataVersion', JSON.stringify(this.gamedataVersion))\n            localStorage.setItem('allGameData', JSON.stringify(allGameData))\n        }\n        this.setState({ allGameData })\n\n        const stored_allThumbs = JSON.parse(localStorage.getItem(\"allThumbs\"))\n        if (stored_allThumbs !== null) {\n            this.setState({ allThumbs: stored_allThumbs })\n        }\n\n        const stored_activeThumbs = JSON.parse(localStorage.getItem(\"activeThumbs\"))\n        if (stored_activeThumbs !== null) {\n            this.setState({ activeThumbs: stored_activeThumbs })\n        }\n\n        const stored_sortorder = JSON.parse(localStorage.getItem(\"sortOrder\"))\n        if (stored_sortorder !== null) {\n            this.setState({ sortOrder: stored_sortorder })\n        }\n\n        const stored_filtertitles = JSON.parse(localStorage.getItem(\"filterTitles\"))\n        if (stored_filtertitles !== null) {\n            this.setState({ filterTitles: stored_filtertitles })\n        }\n\n        const stored_filterplayercount = JSON.parse(localStorage.getItem(\"filterPlayercount\"))\n        if (stored_filterplayercount !== null) {\n            this.setState({ filterPlayercount: stored_filterplayercount })\n        }\n\n        const stored_filterweight = JSON.parse(localStorage.getItem(\"filterWeight\"))\n        if (stored_filterweight !== null) {\n            this.setState({ filterWeight: stored_filterweight })\n        }\n\n        this.updateDimensions()\n        window.addEventListener('resize', this.updateDimensions)\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.updateDimensions)\n    }\n\n    updateDimensions() {\n        const windowWidth = typeof window !== 'undefined' ? window.innerWidth : 0\n        const windowHeight = typeof window !== 'undefined' ? window.innerHeight : 0\n        this.setState({ windowWidth, windowHeight })\n    }\n\n    // for disambiguation of titles, the game ID will be put in parentheses when the API does not provide yearpublished info\n    extractYearFromTitle(title) {\n        if (typeof title === 'string' && title.length) {\n            const matchesDate = title.match(/(( +)\\((-?)\\d{1,4}\\))$/)\n            if (matchesDate !== null) {\n                return matchesDate[0].replace(/[^0-9-]/g, \"\")\n            } else {\n                const matchesId = title.match(/(( +)\\(#\\d{1,6}\\))$/)\n                if (matchesId !== null) {\n                    return matchesId[0].replace(/[^#0-9-]/g, \"\")\n                } else {\n                    return null\n                }\n            }\n        }\n    }\n\n    getCachedGameTitles() {\n        const titles = {}, self = this\n        this.state.allGameData.forEach(function(gamedata) {\n            if (gamedata.hasOwnProperty('unambiguous_name')) {\n                const new_cache_info = {\n                    id: gamedata.id,\n                    name: gamedata.name,\n                    unambiguous_name: gamedata.unambiguous_name,\n                    year_published: gamedata.year_published,\n                    active: (self.state.activeGameList.includes(gamedata.id)) ? true : false,\n                }\n                titles[gamedata.unambiguous_name] = new_cache_info\n            }\n        })\n        return titles\n    }\n\n    gameHasBeenAdded(gameId, gameSet) {\n        for (let game of gameSet) {\n            if (game.id === parseInt(gameId)) {\n                return true\n            }\n        }\n        return false\n    }\n\n    gameSupportsPlayercount(game, playercount) {\n        const number = playercount.slice(0, -1)\n        if (number <= game.attributes.max_players && number >= game.min_players) {\n            return true\n        } else {\n            return false\n        }\n    }\n\n    onDeleteTitle(event, id) {\n\n        // title removals for polls are managed by the server\n        if (this.state.activePoll.id !== 'local') {\n\n            this.deleteTitleInPoll(this.state.activePoll.id, id, this.state.user)\n\n        // title removals for non-polls are kept on the client (state & local storage)\n        } else {\n\n            this.setState(prevState => {\n\n                // FIXME: Implement poll editing. May not want to update active list here if we are currently looking at a poll.\n                // remove the game from the active game list (but still keep its game data cached)\n                let activeGameList = prevState.activeGameList.slice()\n                activeGameList = activeGameList.filter(game_id => game_id !== parseInt(id))\n\n                // remove the game from the local game list (but still keep its game data cached)\n                let localGameList = prevState.localGameList.slice()\n                localGameList = localGameList.filter(game_id => game_id !== parseInt(id))\n\n                // remove the game from the game list\n                let allGameData = JSON.parse(JSON.stringify(prevState.allGameData))\n                allGameData = allGameData.filter(game => game.id !== parseInt(id))\n\n                let activeThumbs = JSON.parse(JSON.stringify(prevState.activeThumbs))\n\n                // remove any title upvotes\n                if (activeThumbs.titles.hasOwnProperty(id)) {\n                    delete activeThumbs.titles[id]\n                }\n\n                // remove any attribute upvotes for attributes no longer occurring in any other game\n                for (let attrName in activeThumbs.attributes) {\n                    if (attrName === 'players') {\n                        for (let votedplayercount in activeThumbs.attributes[attrName]) {\n                            let attributeStillOccurs = false\n                            for (let game of allGameData) {\n                                if (this.gameSupportsPlayercount(game, votedplayercount)) {\n                                    attributeStillOccurs = true\n                                    break\n                                }\n                            }\n                            if (!attributeStillOccurs) {\n                                delete activeThumbs.attributes[attrName][votedplayercount]\n                            }\n                        }\n                    } else if (attrName === 'weight') {\n                        for (let votedweight in activeThumbs.attributes[attrName]) {\n                            let attributeStillOccurs = false\n                            for (let game of allGameData) {\n                                if (game.weight === votedweight) {\n                                    attributeStillOccurs = true\n                                    break\n                                }\n                            }\n                            if (!attributeStillOccurs) {\n                                delete activeThumbs.attributes[attrName][votedweight]\n                            }\n                        }\n                    } else if (attrName === 'category') {\n                        for (let votedcategory in activeThumbs.attributes[attrName]) {\n                            let attributeStillOccurs = false\n                            for (let game of allGameData) {\n                                if (typeof game.attributes !== 'undefined') {\n                                    for (let category of game.attributes.categories) {\n                                        if (votedcategory.hasOwnProperty(category)\n                                          && votedcategory[category].hasOwnProperty('thumbsup')\n                                          && votedcategory[category].thumbsup.length) {\n                                            attributeStillOccurs = true\n                                            break\n                                        }\n                                    }\n                                }\n                            }\n                            if (!attributeStillOccurs) {\n                                delete activeThumbs.attributes[attrName][votedcategory]\n                            }\n                        }\n                    } else if (attrName === 'mechanic') {\n                        for (let votedmechanic in activeThumbs.attributes[attrName]) {\n                            let attributeStillOccurs = false\n                            for (let game of allGameData) {\n                                if (typeof game.attributes !== 'undefined') {\n                                    for (let mechanic of game.attributes.mechanics) {\n                                        if (votedmechanic.hasOwnProperty(mechanic)\n                                          && votedmechanic[mechanic].hasOwnProperty('thumbsup')\n                                          && votedmechanic[mechanic].thumbsup.length) {\n                                            attributeStillOccurs = true\n                                            break\n                                        }\n                                    }\n                                }\n                            }\n                            if (!attributeStillOccurs) {\n                                delete activeThumbs.attributes[attrName][votedmechanic]\n                            }\n                        }\n                    }\n                }\n\n                // NOTE: Update the active game list, but leave allGameData unchanged. It will serve as \n                // the cache of API data. Most downstream components only need to operate on game data \n                // for titles that are on the active list.\n\n                localStorage.setItem('activeGameList', JSON.stringify(activeGameList))\n                localStorage.setItem('localGameList', JSON.stringify(localGameList))\n                localStorage.setItem('activeThumbs', JSON.stringify(activeThumbs))\n\n                // update the master list of all preferences\n                let updated_allThumbs = JSON.parse(JSON.stringify(prevState.allThumbs))\n                let updated_pollThumbs = JSON.parse(JSON.stringify(activeThumbs))\n                updated_allThumbs[prevState.activePoll.id] = updated_pollThumbs\n                localStorage.setItem('allThumbs', JSON.stringify(updated_allThumbs))\n\n                return { \n                    activeGameList: activeGameList,\n                    localGameList: localGameList,\n                    allThumbs: updated_allThumbs,\n                    activeThumbs: activeThumbs,\n                }\n            })\n        }\n    }\n\n    async clearMyTitleVotesInPoll(poll_id, user) {\n        clearmyvotesApi(poll_id, user)\n            // .then(json => {\n            //     if (json.hasOwnProperty('id') === poll_id) {\n            //         this.onViewPoll(json)\n            //     }})\n    }\n\n    onDeleteAllTitles(event) {\n        this.setState(prevState => {\n            // FIXME: Implement poll editing. May not want to update active list here if we are currently looking at a poll.\n            let activeGameList = []\n            let localGameList = []\n            let activeThumbs = {\n                'attributes': {\n                    'players': {}, \n                    'weight': {}, \n                    'category': {}, \n                    'mechanic': {}\n                },\n                'titles': {\n                },\n                total_title_votes: 0,\n                total_attribute_votes: 0,\n            }\n            localStorage.setItem('activeGameList', JSON.stringify(activeGameList))\n            localStorage.setItem('localGameList', JSON.stringify(localGameList))\n            localStorage.setItem('activeThumbs', JSON.stringify(activeThumbs))\n\n            // update the master list of all preferences\n            let updated_allThumbs = JSON.parse(JSON.stringify(prevState.allThumbs))\n            let updated_pollThumbs = JSON.parse(JSON.stringify(activeThumbs))\n            updated_allThumbs[prevState.activePoll.id] = updated_pollThumbs\n            localStorage.setItem('allThumbs', JSON.stringify(updated_allThumbs))\n\n            return { \n                activeGameList: activeGameList,\n                localGameList: localGameList,\n                allThumbs: updated_allThumbs,\n                activeThumbs: activeThumbs,\n            }\n        })\n    }\n\n    totalTitleVotes(all_title_thumbs, mineOnly, whoAmI) {\n        let count = 0\n        Object.entries(all_title_thumbs)\n            .forEach( function(title) {\n                // title[0]: 27588\n                // title[1]: {thumbsup:[{rank:null, user:Bob}]}\n                if (title[1].hasOwnProperty('thumbsup')) {\n                    if (mineOnly) {\n                        let myVote = title[1].thumbsup.filter( vote => vote.user === whoAmI )\n                        if (myVote.length) {\n                            count += 1\n                        }\n                    } else {\n                        count += title[1]['thumbsup'].length\n                    }\n                }\n            })\n        return  count\n    }\n\n    totalAttributeVotes(all_attribute_thumbs) {\n        let count = 0\n        Object.entries(all_attribute_thumbs)\n            .forEach( function(category) {\n                count += Object.values(category[1]).filter( vote => vote.hasOwnProperty('thumbsup') && vote.thumbsup.length ).length\n            })\n        return  count\n    }\n\n    async voteTitleInPoll(poll_id, title, newvote, user) {\n        voteinpollApi(poll_id, title, newvote, user)\n            // .then(json => {\n            //     if (json.hasOwnProperty('id') === poll_id) {\n            //         this.onViewPoll(json)\n            //     }})\n    }\n\n    async deleteTitleInPoll(poll_id, title_id, user) {\n        deletetitleinpollApi(poll_id, title_id, user)\n            // .then(json => {\n            //     if (json.hasOwnProperty('id') === poll_id) {\n            //         this.onViewPoll(json)\n            //     }})\n    }\n\n    onNewVote(event) {\n        const { votingtype, votingon, newvote } = Object.assign({}, event.currentTarget.dataset)\n\n        // title votes for polls are managed by the server\n        if (votingtype === 'title' && this.state.activePoll.id !== 'local') {\n\n            this.voteTitleInPoll(this.state.activePoll.id, votingon, newvote, this.state.user)\n\n        // attribute votes and all non-poll votes are kept on the client (state & local storage)\n        } else {\n\n            this.setState(prevState => {\n                let updated_activeThumbs = JSON.parse(JSON.stringify(prevState.activeThumbs))\n                // record a title vote\n                //   ex: votingtype:title votingon:63888 newvote:thumbsup\n                if (votingtype === 'title') {\n                    // update voting info for this title (...behaves as a toggle: incoming newvote cancels out a previously recorded newvote)\n                    if (prevState.activeThumbs.titles.hasOwnProperty(votingon.toString())) {\n                        if (prevState.activeThumbs.titles[votingon.toString()].hasOwnProperty(newvote)) {\n                            let prevMyTitleVote = JSON.parse(JSON.stringify(prevState.activeThumbs.titles[votingon.toString()][newvote])).filter( vote => vote.user === prevState.user )\n                            // toggle the vote off\n                            if (prevMyTitleVote.length > 0) {\n                                let updatedMyTitleVote = JSON.parse(JSON.stringify(prevState.activeThumbs.titles[votingon.toString()][newvote])).filter( vote => vote.user !== prevState.user )\n                                updated_activeThumbs.titles[votingon.toString()][newvote] = updatedMyTitleVote\n                            // toggle the vote on\n                            } else {\n                                let newUserVote = {\n                                    user: prevState.user,\n                                    rank: null,\n                                }\n                                let updatedMyTitleVote = JSON.parse(JSON.stringify(prevState.activeThumbs.titles[votingon.toString()][newvote]))\n                                updatedMyTitleVote.push(newUserVote)\n                                updated_activeThumbs.titles[votingon.toString()][newvote] = updatedMyTitleVote\n                            }\n                        // add the first vote as on\n                        } else {\n                            let newUserVote = {\n                                user: prevState.user,\n                                rank: null,\n                            }\n                            updated_activeThumbs.titles[votingon.toString()][newvote] = [newUserVote]\n                        }\n                    // no voting exists for this title, create it\n                    } else {\n                        let newVotingOn = {}\n                        let newUserVote = {\n                            user: prevState.user,\n                            rank: 1,\n                        }\n                        newVotingOn[newvote] = [newUserVote]\n                        updated_activeThumbs.titles[votingon.toString()] = newVotingOn\n                    }\n                // record an attribute vote\n                //   ex: votingtype:category votingon:Card Game newvote:thumbsup\n                } else {\n                    if (updated_activeThumbs.attributes[votingtype].hasOwnProperty(votingon)) {\n                        let updated_thisattribute = JSON.parse(JSON.stringify(updated_activeThumbs.attributes[votingtype][votingon]))\n                        // clear this user's previous vote on this attribute\n                        if (updated_thisattribute.hasOwnProperty(newvote)\n                            && updated_thisattribute[newvote].includes(prevState.user)) {\n                            let updated_vote = updated_thisattribute[newvote].filter( user => user !== prevState.user )\n                            updated_thisattribute[newvote] = updated_vote\n                        // add this user's new vote to this attribute\n                        } else {\n                            let updated_vote = [prevState.user]\n                            updated_thisattribute[newvote] = updated_vote\n                        }\n                        updated_activeThumbs.attributes[votingtype][votingon] = updated_thisattribute\n                    } else {\n                        // add this user's new vote to this attribute\n                        let updated_vote = {}\n                        updated_vote[newvote] = [prevState.user]\n                        updated_activeThumbs.attributes[votingtype][votingon] = updated_vote\n                    }\n                }\n                const myCountsOnly = (this.state.activePoll.id === 'local') ? true : false;\n                updated_activeThumbs.total_title_votes = this.totalTitleVotes(updated_activeThumbs.titles, myCountsOnly, this.state.user)\n                updated_activeThumbs.total_attribute_votes = this.totalAttributeVotes(updated_activeThumbs.attributes)\n                localStorage.setItem('activeThumbs', JSON.stringify(updated_activeThumbs))\n\n                // update the master list of all preferences\n                let updated_allThumbs = JSON.parse(JSON.stringify(prevState.allThumbs))\n                let updated_pollThumbs = JSON.parse(JSON.stringify(updated_activeThumbs))\n                updated_allThumbs['local'] = updated_pollThumbs\n                localStorage.setItem('allThumbs', JSON.stringify(updated_allThumbs))\n\n                return { \n                    activeThumbs: updated_activeThumbs,\n                    allThumbs: updated_allThumbs,\n                }\n            })\n\n        }\n    }\n\n    async onViewPoll(poll) {\n\n        let wasRouted = false\n        if (poll.id === 'local') {\n            this.addValidatedGamesWithPollContext(null, poll, null, wasRouted)\n        } else {\n            let poll_game_ids = Object.keys(poll.pollThumbs.titles).map( title => parseInt(title) )\n            let cachedGameTitles = this.getCachedGameTitles()\n            let validation_result = await validateUserTitles(cachedGameTitles, poll_game_ids, )\n            if ( (this.state.routedGames.hasOwnProperty('new_list') && this.state.routedGames.new_list.length)\n              || (this.state.routedGames.hasOwnProperty('pollid') && this.state.routedGames.pollid !== null) ) {\n                wasRouted = true\n                validation_result['routed_games_treatment'] = 'replace'\n            } else if (this.state.routedGames.hasOwnProperty('addto_list') && this.state.routedGames.addto_list.length) {\n                wasRouted = true\n                validation_result['routed_games_treatment'] = 'append'\n            }\n            let poll_thumbs = JSON.parse(JSON.stringify(poll.pollThumbs))\n            this.addValidatedGamesWithPollContext(validation_result.gameValidations, poll, poll_thumbs, wasRouted)\n        }\n\n    }\n\n    onClearSectionVotes(event) {\n        const { votingtype } = Object.assign({}, event.target.dataset)\n\n        // title votes for polls are managed by the server\n        if (votingtype === 'all_titles' && this.state.activePoll.id !== 'local') {\n\n            this.clearMyTitleVotesInPoll(this.state.activePoll.id, this.state.user)\n\n        // attribute votes and all non-poll votes are kept on the client (state & local storage)\n        } else {\n\n            const clearVotes = {}\n            this.setState(prevState => {\n                let updated_activeThumbs = JSON.parse(JSON.stringify(prevState.activeThumbs))\n                if (votingtype === 'all_titles') {\n                    const myCountsOnly = (this.state.activePoll.id === 'local') ? true : false;\n                    updated_activeThumbs.titles = clearVotes\n                    updated_activeThumbs.total_title_votes = this.totalTitleVotes(updated_activeThumbs.titles, myCountsOnly, this.state.user)\n                } else {\n                    if (votingtype === 'all_attributes') {\n                        updated_activeThumbs.attributes['players'] = clearVotes\n                        updated_activeThumbs.attributes['weight'] = clearVotes\n                        updated_activeThumbs.attributes['category'] = clearVotes\n                        updated_activeThumbs.attributes['mechanic'] = clearVotes\n                    } else {\n                        updated_activeThumbs.attributes[votingtype] = clearVotes\n                    }\n                    updated_activeThumbs.total_attribute_votes = this.totalAttributeVotes(updated_activeThumbs.attributes)\n                }\n                localStorage.setItem('activeThumbs', JSON.stringify(updated_activeThumbs))\n\n                // update the master list of all preferences\n                let updated_allThumbs = JSON.parse(JSON.stringify(updated_activeThumbs))\n                let updated_pollThumbs = JSON.parse(JSON.stringify(updated_activeThumbs))\n                updated_allThumbs[prevState.activePoll.id] = updated_pollThumbs\n                localStorage.setItem('allThumbs', JSON.stringify(updated_allThumbs))\n\n                return { \n                    activeThumbs: updated_activeThumbs,\n                    allThumbs: updated_allThumbs,\n                }\n            })\n\n        }\n    }\n\n    addValidatedGames(validation_result) {\n        this.addValidatedGamesWithPollContext(validation_result, this.state.activePoll, this.state.allThumbs[this.state.activePoll.id], false)\n    }\n\n    // when the poll is \"local\"...\n    //   1) the incoming set of games to add will be combined with the local active list\n    //   2) any subsequent title votes will be recorded to the local set of title votes\n    //   3) any subsequent attribute votes will be recorded to the local set of attribute votes\n    //\n    // when the poll is not \"local\"...\n    //   1) the incoming set of games to add will replace the local active list\n    //   2) any subsequent title votes will be recorded to the remote/poll set of title votes\n    //   3) any subsequent attribute votes will be recorded to the local set of attribute votes\n    //\n    // when games are routed...\n    //   1) the incoming set of games to add will either replace or be combined with the local active list\n    //   2) the current active list will switch to the local set of games\n    //\n    addValidatedGamesWithPollContext(validation_result, active_poll, poll_thumbs, wasRouted) {\n\n        this.setState(prevState => {\n\n            let updated_activeGameList = [], updated_activeThumbs = {}, updated_localGameList = [...prevState.localGameList]\n            let updated_routedGames = { new_list: [], addto_list: [], pollid: null }\n            let updated_allGameData = JSON.parse(JSON.stringify(prevState.allGameData))\n            let routed_games_treatment = (validation_result !== null) ? validation_result.routed_games_treatment : 'none'\n            let updated_active_poll = JSON.parse(JSON.stringify(active_poll))\n            let poll_is_changing = (prevState.activePoll.id !== active_poll.id) ? true : false\n\n            // for routed and switching to local, set the poll and active game list to local before the adds happen\n            if (routed_games_treatment === 'replace'\n              || routed_games_treatment === 'append'\n              || (poll_is_changing && active_poll.id === 'local') ) {\n                updated_active_poll.id = 'local'\n                if (routed_games_treatment === 'replace') {\n                    updated_activeGameList = []\n                } else {\n                    updated_activeGameList = [...prevState.localGameList]\n                }\n                updated_activeThumbs = JSON.parse(JSON.stringify(prevState.allThumbs.local))\n\n            // for other poll switching, the active game list is cleared before the adds happen\n            } else if (poll_is_changing) {\n                updated_activeGameList = []\n                updated_activeThumbs = JSON.parse(JSON.stringify(poll_thumbs))\n                updated_activeThumbs.total_title_votes = poll_thumbs.total_title_votes\n\n            // else, the poll remains the same and adds can happen\n            } else {\n                updated_activeGameList = [...prevState.localGameList]\n                updated_activeThumbs = JSON.parse(JSON.stringify(prevState.allThumbs.local))\n                const myCountsOnly = (active_poll === 'local') ? true : false;\n                let updatedTitleCount = this.totalTitleVotes(prevState.allThumbs.local, myCountsOnly, this.state.user)\n                updated_activeThumbs.total_title_votes = updatedTitleCount\n            }\n\n            // now, add the new games\n            if (validation_result !== null && (validation_result.new_gamedata_to_activate.length || validation_result.new_gamedata_to_cache)) {\n\n                let now = new Date()\n\n                Object.values(validation_result.new_gamedata_to_activate).forEach(each_newGameData => {\n                    let new_gamedata = JSON.parse(JSON.stringify(each_newGameData))\n                    new_gamedata[\"updated_at\"] = now.getTime()\n                    updated_activeGameList.push(new_gamedata.id)\n                    if (active_poll.id === 'local') {\n                        updated_localGameList.push(new_gamedata.id)\n                    }\n                    updated_allGameData.push(new_gamedata)\n                })\n\n                Object.values(validation_result.new_gamedata_to_cache).forEach(each_newGameData => {\n                    let new_gamedata = JSON.parse(JSON.stringify(each_newGameData))\n                    new_gamedata[\"updated_at\"] = now.getTime()\n                    updated_allGameData.push(new_gamedata)\n                })\n\n            }\n\n            // for all polls, attribute votes are always kept locally\n            updated_activeThumbs.attributes = JSON.parse(JSON.stringify(prevState.allThumbs.local.attributes))\n            updated_activeThumbs.total_attribute_votes = prevState.allThumbs.local.total_attribute_votes\n\n            // now, add the cached games\n            if (validation_result !== null && validation_result.cached_games_to_activate.length) {\n\n                validation_result.cached_games_to_activate.forEach(cached_game_name => {\n                    let id_to_activate = prevState.allGameData.filter( game_data => game_data.unambiguous_name === cached_game_name )[0].id\n                    updated_activeGameList.push(id_to_activate)\n                    if (active_poll.id === 'local') {\n                        updated_localGameList.push(id_to_activate)\n                    }\n                })\n\n            }\n\n            // handle the disabling of filtering while a poll is active\n            let updated_filterPlayercount, updated_filterTitles, updated_filterWeight\n            if (poll_is_changing && active_poll.id !== 'local') {\n                updated_filterPlayercount = false\n                updated_filterTitles = false\n                updated_filterWeight = false\n            } else {\n                updated_filterPlayercount = JSON.parse(localStorage.getItem(\"filterPlayercount\"))\n                updated_filterTitles = JSON.parse(localStorage.getItem(\"filterTitles\"))\n                updated_filterWeight = JSON.parse(localStorage.getItem(\"filterWeight\"))\n            }\n\n            localStorage.setItem('activeGameList', JSON.stringify(updated_activeGameList))\n            localStorage.setItem('localGameList', JSON.stringify(updated_localGameList))\n            localStorage.setItem('allGameData', JSON.stringify(updated_allGameData))\n            localStorage.setItem('activePoll', JSON.stringify(updated_active_poll))\n            localStorage.setItem('activeThumbs', JSON.stringify(updated_activeThumbs))\n\n            return { \n                activePoll: updated_active_poll,\n                activeGameList: updated_activeGameList,\n                activeThumbs: updated_activeThumbs,\n                localGameList: updated_localGameList,\n                allGameData: updated_allGameData,\n                routedGames: updated_routedGames,\n                filterPlayercount: updated_filterPlayercount,\n                filterTitles: updated_filterTitles,\n                filterWeight: updated_filterWeight,\n            }\n        })\n\n        if (validation_result !== null && wasRouted) {\n            this.props.history.push('/boardgameinator')\n        }\n    }\n\n    handleSortChange(event, value) {\n        this.setState(prevState => {\n            localStorage.setItem('sortOrder', JSON.stringify(value))\n            return {\n                sortOrder: value,\n            }\n        })\n    }\n\n    handleFilterChange(event, value) {\n        if (this.state.activePoll.id === 'local') {\n            switch (value) {\n                case 'titles':\n                    this.setState(prevState => {\n                        let filterTitles = !prevState.filterTitles\n                        localStorage.setItem('filterTitles', JSON.stringify(filterTitles))\n                        return { \n                            filterTitles: !this.state.filterTitles,\n                        }\n                    })\n                    break\n                case 'playercount':\n                    this.setState(prevState => {\n                        let filterPlayercount = !prevState.filterPlayercount\n                        localStorage.setItem('filterPlayercount', JSON.stringify(filterPlayercount))\n                        return { \n                            filterPlayercount: !this.state.filterPlayercount,\n                        }\n                    })\n                    break\n                case 'weight':\n                    this.setState(prevState => {\n                        let filterWeight = !prevState.filterWeight\n                        localStorage.setItem('filterWeight', JSON.stringify(filterWeight))\n                        return { \n                            filterWeight: !this.state.filterWeight,\n                        }\n                    })\n                    break\n                default:\n                    break\n            }\n        }\n    }\n\n    handleUserChange(new_username) {\n        this.setState(prevState => {\n            const myCountsOnly = (this.state.activePoll.id === 'local') ? true : false;\n            let updated_activeThumbs = JSON.parse(JSON.stringify(prevState.activeThumbs))\n            let updatedTitleCount = this.totalTitleVotes(prevState.activeThumbs.titles, myCountsOnly, new_username)\n            updated_activeThumbs.total_title_votes = updatedTitleCount\n            localStorage.setItem('user', JSON.stringify(new_username))\n            return {\n                user: new_username,\n                activeThumbs: updated_activeThumbs,\n            }\n        })\n    }\n\n    onHamburger(event) {\n        // FIXME: (WIP) add modal functionality\n        // alert('(FIXME/WIP) Make this a slide out menu of what are now buttons.')\n    }\n\n    render() {\n        const { windowWidth } = this.state\n        const styles = {\n            reallyNarrow: windowWidth < 650\n        }\n        const activeGameData = this.state.allGameData.filter( gameData => this.state.activeGameList.includes(gameData.id) )\n        const cachedGameTitles = this.getCachedGameTitles()\n        let filterTitles = (this.state.filterTitles !== null && this.state.activePoll.id === 'local') ? this.state.filterTitles : false\n        let filterPlayercount = (this.state.filterPlayercount !== null && this.state.activePoll.id === 'local') ? this.state.filterPlayercount : false\n        let filterWeight = (this.state.filterWeight !== null && this.state.activePoll.id === 'local') ? this.state.filterWeight : false\n\n        return (\n            <React.Fragment>\n            <div id=\"page-header\">\n                <div id=\"buttonrow-left\">\n                    <button className=\"fa fa-button\"><FontAwesomeIcon icon={faBars}/></button>\n                    <img src={purpleMeeple} alt=\"Boardgameinator logo\" />\n                    <TitleString poll={this.state.activePoll} />\n                    <PollInfo poll={this.state.activePoll} gamedata={this.state.allGameData} user={this.state.user} />\n                    <Clock poll={this.state.activePoll} />\n                </div>\n                <ViewControls \n                user={this.state.user}\n                activepoll={this.state.activePoll}\n                sortby={this.state.sortOrder}\n                onsortchange={this.handleSortChange}\n                filtertitles={filterTitles}\n                filterplayercount={filterPlayercount}\n                filterweight={filterWeight}\n                onfilterchange={this.handleFilterChange}\n                onuserchange={this.handleUserChange} />\n            </div>\n            <div id=\"content-wrapper\">\n                <GameList\n                    routedgames={this.state.routedGames}\n                    activegamedata={activeGameData} \n                    cachedgametitles={cachedGameTitles}\n                    addvalidatedgames={this.addValidatedGames}\n                    activethumbs={this.state.activeThumbs} \n                    sortby={this.state.sortOrder}\n                    filtertitles={filterTitles}\n                    filterplayercount={filterPlayercount}\n                    filterweight={filterWeight}\n                    ondelete={this.onDeleteTitle}\n                    ondeleteall={this.onDeleteAllTitles}\n                    onnewvote={this.onNewVote}\n                    onclearsectionvotes={this.onClearSectionVotes}\n                    activepoll={this.state.activePoll}\n                    onviewpoll={this.onViewPoll}\n                    reallynarrow={styles.reallyNarrow} \n                    user={this.state.user} />\n            </div>\n            </React.Fragment>\n        )\n    }\n}\n\nBoardgameinator.propTypes = {\n    location: PropTypes.object.isRequired,\n}","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Route, BrowserRouter as Router } from 'react-router-dom'\nimport './index.css'\nimport { Boardgameinator } from './Boardgameinator'\n\n\nconst routing = (\n    <Router>\n        <div>\n            <Route path=\"/\" component={Boardgameinator} />\n        </div>\n    </Router>\n)\n\nReactDOM.render(routing, document.getElementById('root'))"],"sourceRoot":""}